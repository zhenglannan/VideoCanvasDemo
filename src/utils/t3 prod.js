(()=>{var e={316:function(e,t,a){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,a,r){void 0===r&&(r=a),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[a]}})}:function(e,t,a,r){void 0===r&&(r=a),e[r]=t[a]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)"default"!==a&&Object.prototype.hasOwnProperty.call(e,a)&&r(t,e,a);return i(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),o(a(836));const n=o(a(353)),s=[Date,RegExp,Set,Map,WeakMap,WeakSet];class l{static cf(e,t,a){return e&&e.hasOwnProperty(t)?e[t]:a}static cp(e,t,a,r){return e&&e.hasOwnProperty(a)?(t[a]=e[a],!0):(null!=r&&(t[a]=r),!1)}static clone(e,t=new WeakMap){if(e&&"object"==typeof e){if(t.has(e))return t.get(e);if(s.includes(e.constructor))return new e.constructor(e);var a=Object.create(Object.getPrototypeOf(e));return t.set(e,a),e instanceof Array?e.forEach((e=>{a.push(l.clone(e))})):Object.keys(e).forEach((r=>{var i=Object.getOwnPropertyDescriptor(e,r);i.hasOwnProperty("value")?a[r]=l.clone(e[r],t):Object.defineProperty(a,r,i)})),a}return e}static copyObject(e,t){Object.keys(e).forEach((a=>{var r=Object.getOwnPropertyDescriptor(e,a);r.hasOwnProperty("value")?t[a]=l.clone(e[a]):Object.defineProperty(t,a,r)}))}static assignObject(e,t){Object.keys(e).forEach((a=>{var r=Object.getOwnPropertyDescriptor(e,a);if(r.hasOwnProperty("value")){var i=r.value;if("object"==typeof i){var o=i instanceof Array,n=t[a];"object"==typeof n&&n instanceof Array==o||(n=void 0),o?(n=n||[],i.forEach((e=>{n.push(l.clone(e))}))):(n=n||{},l.assignObject(i,n)),t[a]=n}else t[a]=i}else Object.defineProperty(t,a,r)}))}static traverseAncestors(e,t){for(;e&&"Scene"!=e.type;){if(t(e))return!0;e=e.parent}return!1}static getAncestors(e){for(var t=[];e&&"Scene"!=e.type;)t.push(e),e=e.parent;return t}static createCss(e,t){var a=document.createElement("style");a.appendChild(document.createTextNode(t)),e.appendChild(a)}}class u{constructor(){this._datas={}}load1(e,t){return!!this._datas.hasOwnProperty(e)&&(this._datas[e].data?t(this._datas[e].data):this._datas[e].calls.push(t),!0)}load2(e,t,a){this._datas[t]={calls:[a]},e.load(t,(e=>{console.log("load: "+t+" ok"),this._datas[t].data=e,this._datas[t].calls.forEach((t=>{t(e)})),this._datas[t].calls=[]}),void 0,(e=>{console.log("load:"+t,e)}))}load(e,t,a){this.load1(t,a)||this.load2(e,t,a)}}var d=new class{constructor(){this._fileLoader=new THREE.FileLoader,this._fileXLoader=new u,this._imageLoader=new THREE.ImageLoader,this._imageXLoader=new u,this._mtlLoader=new THREE.MTLLoader,this._mtlXLoader=new u,this._objLoader=new THREE.OBJLoader,this._objXLoader=new u,this._stlLoader=new THREE.STLLoader,this._stlXLoader=new u,this._fontLoader=new THREE.FontLoader,this._fontXLoader=new u}loadFile(e,t){this._fileXLoader.load(this._fileLoader,e,t)}loadImage(e,t){this._imageXLoader.load(this._imageLoader,e,t)}loadTexture(e,t=null){var a=new THREE.Texture;return this.loadImage(e,(e=>{a.image=e,a.needsUpdate=!0,t&&t()})),a}loadMtlObj(e,t,a){this._mtlXLoader.load(this._mtlLoader,e,(e=>{if(!this._objXLoader.load1(t,a)){var r=new THREE.OBJLoader;r.setMaterials(e),this._objXLoader.load2(r,t,a)}}))}loadObj(e,t){this._objXLoader.load(this._objLoader,e,t)}loadStl(e,t){this._stlXLoader.load(this._stlLoader,e,t)}loadFont(e,t){this._fontXLoader.load(this._fontLoader,e,t)}};class h{constructor(e){this.t3text=l.clone(e),this.canvas=document.createElement("canvas"),this.canvas.width=this.t3text.size.w,this.canvas.height=this.t3text.size.h,this.context=this.canvas.getContext("2d"),this.texture=new THREE.CanvasTexture(this.canvas),this.texture.text=this,this.updateEvent=0,this.update()}set text(e){this.t3text.value=e,this.update()}update(){this.context&&!this.updateEvent&&(this.updateEvent=setInterval((()=>{clearInterval(this.updateEvent),this.updateEvent=0;var e=this.canvas.width,t=this.canvas.height,a=this.context;a.clearRect(0,0,e,t),a.fillStyle=this.t3text.backColor,a.fillRect(0,0,e,t),a.textBaseline="middle",a.textAlign="center",a.font=this.t3text.font,a.strokeStyle=this.t3text.color,a.fillStyle=this.t3text.color,a.fillText(this.t3text.value,e/2,t/2),a.strokeText(this.t3text.value,e/2,t/2),this.texture.needsUpdate=!0}),1))}}var c=new class{Outline(e,t){var a=new THREE.OutlinePass(new THREE.Vector2(e.domElement.clientWidth,e.domElement.clientWidth),e.scene,e.camera);return l.cp(a,t,"edgeStrength"),l.cp(a,t,"edgeGlow"),l.cp(a,t,"edgeThickness"),l.cp(a,t,"pulsePeriod"),t.visibleEdgeColor&&a.visibleEdgeColor.set(t.visibleEdgeColor),a.onMouseMove=e=>{l.getAncestors(e).some((e=>{if(e.userData.outline)return a.selectedObjects=[e],!0}))||(a.selectedObjects=[])},a}Shader(e,t){return new THREE.ShaderPass(t.shader)}load(e,t){var a=null;return t&&(a=this[t.type](e,t)),a}};class p{constructor(e,t,a){if(e.emitListenerEvent(t,"init"),this.scene=e.scene,this.camera=e.camera,this.renderer=new THREE.WebGLRenderer(t.param),this.renderer.setSize(a.w,a.h),this.renderer.localClippingEnabled=!0,this.renderer.setPixelRatio(window.devicePixelRatio),this.renderer.setClearColor(t.clearColor,t.clearAlpha),this.renderer.gammaInput=!0,this.renderer.gammaOutput=!0,this.renderer.domElement.style.position="absolute",this.renderer.domElement.style.top="0",this.renderer.domElement.style.margin="0",this.renderer.domElement.style.padding="0",e.container.appendChild(this.renderer.domElement),this.d2Renderer=new THREE.CSS2DRenderer,this.d2Renderer.setSize(a.w,a.h),this.d2Renderer.domElement.style.position="absolute",this.d2Renderer.domElement.style.top="0",this.d2Renderer.domElement.style.margin="0",this.d2Renderer.domElement.style.padding="0",e.container.appendChild(this.d2Renderer.domElement),this.d3Renderer=new THREE.CSS3DRenderer,this.d3Renderer.setSize(a.w,a.h),this.d3Renderer.domElement.style.position="absolute",this.d3Renderer.domElement.style.top="0",this.d3Renderer.domElement.style.margin="0",this.d3Renderer.domElement.style.padding="0",e.container.appendChild(this.d3Renderer.domElement),this.domElement=this.d3Renderer.domElement,t.passes&&t.passes.length){this.composer=new THREE.EffectComposer(this.renderer);var r=new THREE.RenderPass(e.scene,e.camera);this.composer.addPass(r),t.passes.forEach((t=>{e.emitListenerEvent(t,"init");var a=c.load(this,t);a&&(this.composer.addPass(a),e.addListener(t,a))}))}e.addListener(t,this)}setSize(e,t){this.camera.setSize(e,t),this.renderer.setSize(e,t),this.d2Renderer.setSize(e,t),this.d3Renderer.setSize(e,t),this.composer&&this.composer.passes.forEach((a=>{a.setSize(e,t)}))}render(){this.composer?this.composer.render():this.renderer.render(this.scene,this.camera),this.d2Renderer.render(this.scene,this.camera),this.d3Renderer.render(this.scene,this.camera)}}var f=new class{Perspective(e,t){var a=new THREE.PerspectiveCamera(e.viewAngle,t.w/t.h,e.near,e.far);return e.position&&a.position.set(e.position.x,e.position.y,e.position.z),a.setSize=(e,t)=>{a.aspect=e/t,a.updateProjectionMatrix()},a}load(e,t,a){e.emitListenerEvent(t,"init");var r=this[t.type](t,a);return r.lookAt(0,0,0),e.addListener(t,r),r}},m=new class{Fly(e,t){return new THREE.FlyControls(e.camera,e.renderer.domElement)}Map(e,t){return new THREE.MapControls(e.camera,e.renderer.domElement)}Orbit(e,t){return new THREE.OrbitControls(e.camera,e.renderer.domElement)}Trackball(e,t){return new THREE.TrackballControls(e.camera,e.renderer.domElement)}Drag(e,t){var a=new THREE.DragControls([e.scene],e.camera,e.renderer.domElement);return a.addEventListener("dragstart",(function(t){e.control.setActive(a)})),a.addEventListener("dragend",(function(t){e.control.setActive(null)})),a.onselect=e=>{var t=null;return l.getAncestors(e).some((e=>{if(e.userData.drag)return t=e,!0})),t},a}Transform(e,t){return new THREE.TransformControls(e.camera,e.renderer.domElement)}load(e,t){e.emitListenerEvent(t,"init");var a=this[t.type](e,t);return l.copyObject(t,a),e.addListener(t,t),a}},E=new class{Directional(e){return new THREE.DirectionalLight(e.color,e.intensity)}Ambient(e){return new THREE.AmbientLight(e.color,e.intensity)}Spot(e){return new THREE.SpotLight(e.color,e.intensity)}load(e,t){e.emitListenerEvent(t,"init");var a=this[t.type](t);return t.position&&a.position.set(t.position.x,t.position.y,t.position.z),e.addListener(t,a),a}},T=new class{move(e,t){t.moveTo(e.x,e.y)}line(e,t){t.lineTo(e.x,e.y)}quadratic(e,t){t.quadraticCurveTo(e.cpx,e.cpy,e.x,e.y)}bezier(e,t){t.bezierCurveTo(e.cpx1,e.cpy1,e.cpx2,e.cpy2,e.x,e.y)}spline(e,t){}arc(e,t){t.arc(e.x,e.y,e.radius,e.startAngle,e.endAngle,e.clockWise)}ellipse(e,t){t.ellipse(e.x,e.y,e.xRadius,e.yRadius,e.startAngle,e.endAngle,e.clockWise,e.rotation)}load(e,t){e.forEach((e=>{this[e.type](e,t)}))}create(e){var t=new THREE.Path;return this.load(e,t),t}},v=new class{Box(e){return new THREE.BoxGeometry(e.width,e.height,e.depth)}Plane(e){return new THREE.PlaneGeometry(e.width,e.height)}Cylinder(e){return new THREE.CylinderGeometry(e.radiusTop,e.radiusBottom,e.height,e.radiusSegments,e.heightSegments,e.openEnded)}Sphere(e){return new THREE.SphereGeometry(e.radius,e.segmentsWidth,e.segmentsHeight)}Shape(e){var t=new THREE.Shape;return T.load(e.path,t),e.hole&&e.hole.forEach((e=>{t.holes.push(T.create(e))})),new THREE.ShapeGeometry(t)}create(e){var t=this[e.type](e);return e.position&&t.translate(e.position.x,e.position.y,e.position.z),e.rotation&&t.rotateX(e.rotation.x*Math.PI).rotateY(e.rotation.y*Math.PI).rotateZ(e.rotation.z*Math.PI),e.scale&&t.scale(e.scale.x,e.scale.y,e.scale.z),t}load(e){var t;return e instanceof Array?(t=new THREE.Geometry,e.forEach((e=>{t.merge(this.create(e))}))):t=this.create(e),t}},x=new class{load(e){var t=null;return e.text?(t=new h(e.text).texture).wrapS=t.wrapT=THREE.RepeatWrapping:e.url?(t=d.loadTexture(e.url)).wrapS=t.wrapT=THREE.RepeatWrapping:e.video&&((t=new THREE.VideoTexture(e.video)).wrapS=t.wrapT=THREE.ClampToEdgeWrapping),t&&e.repeat&&t.repeat.set(e.repeat.x,e.repeat.y),t}},g=new class{Basic(e){return new THREE.MeshBasicMaterial(e)}Depth(e){return new THREE.MeshDepthMaterial(e)}Normal(e){return new THREE.MeshNormalMaterial(e)}Lambert(e){return new THREE.MeshLambertMaterial(e)}Phong(e){return new THREE.MeshPhongMaterial(e)}Shader(e){return new THREE.ShaderMaterial(e)}create(e){if(e){if(!e.hasOwnProperty("texture"))return this[e.type](e.param);var t=x.load(e.texture);if(t){var a=Object.assign({},e.param,{map:t});return this[e.type](a)}}return new THREE.MeshBasicMaterial({color:"white",side:THREE.DoubleSide})}load(e){if(e instanceof Array){var t=[];return e.forEach((e=>{t.push(this.create(e))})),t}return this.create(e)}};class y extends THREE.Group{constructor(e){if(super(),e.hasOwnProperty("text")){var t=e;this.textTexture=new h(t.text),this.width=t.text.size.w,this.height=t.text.size.h}else{var a=e;this.texture=d.loadTexture(a.image),this.width=a.width,this.height=a.height}var r=this.texture?this.texture:this.textTexture.texture,i=Object.assign({},e.param,{map:r});this.material=new THREE.SpriteMaterial(i),this.sprite=new THREE.Sprite(this.material),this.sprite.scale.set(this.width,this.height,1),this.add(this.sprite)}set text(e){this.textTexture.text=e}set image(e){d.loadImage(e,(e=>{this.texture.image=e,this.texture.needsUpdate=!0}))}}var A=new class{create(e){var t=document.createElement(e.tagName);return l.cp(e,t,"className"),l.cp(e,t,"innerHTML"),l.cp(e,t,"style"),e.attributes&&l.copyObject(e.attributes,t),e.css&&l.createCss(t,e.css),e.is2D?new THREE.CSS2DObject(t):e.isSprite?new THREE.CSS3DSprite(t):new THREE.CSS3DObject(t)}},R=new class{Obj(e,t,a){if(t.hasOwnProperty("mtl"))d.loadMtlObj(t.mtl,t.url,(e=>{a(e.parent?e.clone():e)}));else{var r=e.loadMaterial(t.material);d.loadMtlObj(t.mtl,t.url,(e=>{var t=e.parent?e.clone():e;t.material=r,a(t)}))}}Stl(e,t,a){var r=e.loadMaterial(t.material);d.loadStl(t.url,(e=>{var t=r;e.hasColors&&(t=new THREE.MeshPhongMaterial({opacity:e.alpha,vertexColors:THREE.VertexColors})),a(new THREE.Mesh(e,t))}))}load(e,t){var a=new THREE.Group;return this[t.type](e,t,(r=>{t.position&&r.translateX(t.position.x).translateY(t.position.y).translateZ(t.position.z),t.rotation&&r.rotateX(t.rotation.x*Math.PI).rotateY(t.rotation.y*Math.PI).rotateZ(t.rotation.z*Math.PI),t.scale&&r.scale.set(t.scale.x,t.scale.y,t.scale.z),e.layer.updateMask(a.layers.mask,r),a.add(r)})),a}};class b{constructor(e,t){this.controls=[],t&&t.forEach((t=>{this.controls.push(m.load(e,t))})),this.active=null}update(){this.controls.forEach((e=>{e.enabled&&e.update&&e.update()}))}reset(){this.controls.forEach((e=>{e.reset&&e.reset()}))}setActive(e){e!=this.active&&(e?(this.active&&this.setActive(null),this.controls.forEach((t=>{t.enabled2=t.enabled,t.enabled=t==e}))):this.controls.forEach((e=>{e.enabled=e.enabled2})),this.active=e)}}class w{constructor(e){this.layers=[],this.player=e,this.player.camera.layers.enableAll(),this.player.lights.forEach((e=>{e.layers.enableAll()})),this.push("default")}getChannel(e){return 0!=(this.player.camera.layers.mask&this.mask(e))}setChannel(e,t){t?(this.player.camera.layers.enable(e),this.player.lights.forEach((t=>{t.layers.enable(e)}))):(this.player.camera.layers.disable(e),this.player.lights.forEach((t=>{t.layers.disable(e)})))}getLayer(e){return this.getChannel(this.channel(e))}setLayer(e,t){this.setChannel(this.channel(e),t)}channel(e){return e?this.hasOwnProperty(e)?this[e]:this.push(e):0}updateLayer(e,t){e.hasOwnProperty("layer")&&this.updateMask(this.mask(this.channel(e.layer)),t)}updateMask(e,t){t.traverse((t=>{t.layers.mask=e}))}push(e){var t=this.layers.length;return this[e]=t,this.layers.push(e),t}mask(e){return 1<<e|0}}Object.defineProperty(THREE.Object3D.prototype,"display",{get:function(){return this.visible},set:function(e){this.visible=e,this.traverse((t=>{t.element&&(t.element.style.display=e&&!t.element.hide?"":"none")}))}}),window.T3Tween=class{constructor(e,t,a,r){this.tween=new n.Tween(e),this.tween.to(t,a),this.tween.onUpdate(r),this.tween.repeat(1/0)}start(){this.tween.start()}stop(){this.tween.stop()}},window.T3Player=class{constructor(){this.events={},this.raymouse=new THREE.Vector2,this.mouseMoveObject=null,this.mouseMoveTip=null}addEventListener(e,t){this.events.hasOwnProperty(e)?this.events[e].push(t):this.events[e]=[t]}emitCall(e,t,a){e instanceof Array?e.forEach((e=>{e.call(t,a,this)})):e.call(t,a,this)}emitEvent(e){this.events.hasOwnProperty(e)&&this.events[e].forEach((t=>{this.emitCall(t.listener.events[e],t.listener,t)}))}emitObjectEvent(e,t){l.getAncestors(e).some((e=>{if(e.listener&&e.listener.events&&e.listener.events.hasOwnProperty(t))return this.emitCall(e.listener.events[t],e.listener,e),!0}))}emitListenerEvent(e,t){if(e&&e.events&&e.events.hasOwnProperty(t))return this.emitCall(e.events[t],e,e),!0}addListener(e,t){if(t.listener=e,t.player=this,e.events)for(var a in e.events)this.addEventListener(a,t)}load(e,t){if(this.unload(),this.t3scene=l.clone(t),this.container=document.createElement("div"),e.appendChild(this.container),this.scene=new THREE.Scene,this.t3scene.background)if("string"==typeof this.t3scene.background||"number"==typeof this.t3scene.background)this.scene.background=this.t3scene.background;else{var a=x.load(this.t3scene.background);a&&(this.scene.background=a)}if(this.t3scene.css&&l.createCss(this.container,this.t3scene.css),this.raycaster=new THREE.Raycaster,this.camera=f.load(this,this.t3scene.camera,this.t3scene.size),this.renderer=new p(this,this.t3scene.renderer,this.t3scene.size),this.renderer.domElement.addEventListener("mousemove",(e=>{this.mouseMove(e)})),this.renderer.domElement.addEventListener("click",(e=>{this.mouseClick(e)})),this.geometrys={},this.t3scene.hasOwnProperty("geometrys"))for(var r in this.t3scene.geometrys)this.geometrys[r]=v.load(this.t3scene.geometrys[r]);if(this.materials={},this.t3scene.hasOwnProperty("materials"))for(var r in this.t3scene.materials)this.materials[r]=g.load(this.t3scene.materials[r]);this.lights=[],this.t3scene.hasOwnProperty("lights")&&this.t3scene.lights.forEach((e=>{var t=E.load(this,e);t&&(this.lights.push(t),this.scene.add(t))})),this.templates=this.t3scene.templates,this.tags={},this.layer=new w(this),this.t3scene.hasOwnProperty("objects")&&this.t3scene.objects.forEach((e=>{var t=this.loadObject(e);t&&this.scene.add(t)})),this.control=new b(this,this.t3scene.controls),this.isLoaded=!0,this.emitEvent("create")}unload(){this.isLoaded&&(delete this.t3scene,delete this.scene,delete this.raycaster,delete this.camera,delete this.renderer,delete this.geometrys,delete this.materials,delete this.lights,delete this.templates,delete this.tags,delete this.layer,delete this.control,this.container&&(this.container.parentElement&&this.container.parentElement.removeChild(this.container),delete this.container),delete this.isLoaded)}animate(){this.isLoaded&&(n.update(),this.emitEvent("update"),this.control.update(),this.renderer.render())}setSize(e,t){this.renderer.setSize(e,t)}getObject(e,t){var a=this.tags[e];return a?a[t]:null}loadTexture(e){return x.load(e)}loadGeometry(e){return"string"==typeof e?this.geometrys[e]:v.load(e)}loadMaterial(e){return"string"==typeof e?this.materials[e]:g.load(e)}loadTemplate(e){var t=l.clone(this.templates[e.template]);return t?(Object.keys(e).forEach((a=>{if("template"==a);else if("events"==a){var r=t.events?t.events:{};Object.keys(e.events).forEach((t=>{r.hasOwnProperty(t)?r[t]=[r[t]].concat(e.events[t]):r[t]=e.events[t]})),t.events=r}else t.hasOwnProperty(a)&&"object"==typeof t[a]?l.assignObject(e[a],t[a]):t[a]=e[a]})),t):(console.log("miss: "+e.template),null)}loadMesh(e){var t=this.loadGeometry(e.geometry);if(e.hasOwnProperty("subtract")){var a=new ThreeBSP(t),r=new ThreeBSP(this.loadGeometry(e.subtract));t=a.subtract(r).toGeometry()}if(e.water){var i={};return l.cp(e.water,i,"color"),l.cp(e.water,i,"textureWidth"),l.cp(e.water,i,"textureHeight"),l.cp(e.water,i,"flowDirection"),l.cp(e.water,i,"flowSpeed"),l.cp(e.water,i,"reflectivity"),l.cp(e.water,i,"scale"),e.water.flowMap&&(i.flowMap=x.load(e.water.flowMap)),e.water.normalMap0&&(i.normalMap0=x.load(e.water.normalMap0)),e.water.normalMap1&&(i.normalMap1=x.load(e.water.normalMap1)),new THREE.Water(t,i)}var o=this.loadMaterial(e.material);return new THREE.Mesh(t,o)}loadDom(e){var t=A.create(e);return t&&t.element&&t.element.addEventListener("click",(()=>{setTimeout((()=>{this.emitClick(t)}),1)})),t}loadSprite(e){return new y(e)}loadModel(e){return R.load(this,e)}loadGroup(e){return new THREE.Group}loadCustom(e){return e.custom(this)}loadObject(e){if(e.hasOwnProperty("template"))return this.loadObject(this.loadTemplate(e));this.emitListenerEvent(e,"init");var t=null;if(e.hasOwnProperty("custom")?t=this.loadCustom(e):e.hasOwnProperty("model")?t=this.loadModel(e.model):e.hasOwnProperty("sprite")?t=this.loadSprite(e.sprite):e.hasOwnProperty("tagName")?t=this.loadDom(e):e.hasOwnProperty("geometry")?t=this.loadMesh(e):e.hasOwnProperty("childs")&&(t=this.loadGroup(e)),t){if(l.cp(e,t,"name"),e.hasOwnProperty("position")&&t.position.set(e.position.x,e.position.y,e.position.z),e.hasOwnProperty("rotation")&&t.rotation.set(e.rotation.x*Math.PI,e.rotation.y*Math.PI,e.rotation.z*Math.PI),e.hasOwnProperty("scale")&&t.scale.set(e.scale.x,e.scale.y,e.scale.z),e.hasOwnProperty("tag"))for(var a in e.tag)this.tags.hasOwnProperty(a)||(this.tags[a]={}),this.tags[a][e.tag[a]]=t;if(e.hasOwnProperty("attach")&&l.copyObject(e.attach,t),e.hasOwnProperty("userData")&&l.copyObject(e.userData,t.userData),e.hasOwnProperty("childs")&&e.childs.forEach((e=>{var a=this.loadObject(e);a&&t.add(a)})),e.hasOwnProperty("tip")){var r=this.loadObject(e.tip);r&&(t.tip=r)}l.cp(e,t,"display"),t.player=this,this.addListener(e,t),this.layer.updateLayer(e,t)}return t}mapToWorld(e){var t=this.renderer.domElement.getBoundingClientRect();e.x=(e.x-t.left)/t.width*2-1,e.y=-(e.y-t.top)/t.height*2+1}mapFromWorld(e){var t=this.renderer.domElement.getBoundingClientRect();e.x=(e.x+1)/2*t.width+t.left,e.y=-(e.y-1)/2*t.height+t.top}checkIntersection(e){this.raymouse.x=e.clientX,this.raymouse.y=e.clientY,this.mapToWorld(this.raymouse),this.raycaster.setFromCamera(this.raymouse,this.camera);for(var t=this.raycaster.intersectObjects([this.scene],!0),a=0;a<t.length;a++){var r=t[a].object;if(this.camera.layers.test(r.layers))return r}return null}setMouseMoveTip(e){this.mouseMoveTip!=e&&(this.mouseMoveTip&&this.mouseMoveTip.parent.remove(this.mouseMoveTip),this.mouseMoveTip=e)}moveIn(e){this.emitObjectEvent(e,"moveIn"),l.getAncestors(e).some((e=>{var t=e.tip;if(t&&t.display)return e.add(t),this.setMouseMoveTip(t),!0})),l.getAncestors(e).some((e=>{if(e.userData.cursor)return this.renderer.domElement.style.cursor=e.userData.cursor,!0}))}moveOut(e){this.emitObjectEvent(e,"moveOut"),this.setMouseMoveTip(null),this.renderer.domElement.style.cursor="auto"}mouseMove(e){e.preventDefault();var t=this.checkIntersection(e);t!=this.mouseMoveObject&&(this.mouseMoveObject&&this.moveOut(this.mouseMoveObject),t&&this.moveIn(t),this.mouseMoveObject=t),this.renderer.composer&&this.renderer.composer.passes.forEach((e=>{e.onMouseMove&&e.onMouseMove(t)}))}emitClick(e){this.emitObjectEvent(e,"click"),this.onObjectClick&&l.getAncestors(e).forEach((e=>{e.userData.click&&this.onObjectClick(e)}))}mouseClick(e){var t=this.checkIntersection(e);t&&this.emitClick(t)}},window._t3loader=d},833:()=>{THREE.DragControls=function(e,t,a){var r=new THREE.Plane,i=new THREE.Raycaster,o=new THREE.Vector2,n=new THREE.Vector3,s=new THREE.Vector3,l=new THREE.Vector3,u=new THREE.Matrix4,d=null,h=null,c=this;function p(){a.addEventListener("mousemove",m,!1),a.addEventListener("mousedown",E,!1),a.addEventListener("mouseup",T,!1),a.addEventListener("mouseleave",T,!1),a.addEventListener("touchmove",v,!1),a.addEventListener("touchstart",x,!1),a.addEventListener("touchend",g,!1)}function f(){a.removeEventListener("mousemove",m,!1),a.removeEventListener("mousedown",E,!1),a.removeEventListener("mouseup",T,!1),a.removeEventListener("mouseleave",T,!1),a.removeEventListener("touchmove",v,!1),a.removeEventListener("touchstart",x,!1),a.removeEventListener("touchend",g,!1)}function m(e){e.preventDefault();var p=a.getBoundingClientRect();if(o.x=(e.clientX-p.left)/p.width*2-1,o.y=-(e.clientY-p.top)/p.height*2+1,i.setFromCamera(o,t),d&&c.enabled)return i.ray.intersectPlane(r,s)&&d.position.copy(s.sub(n).applyMatrix4(u)),void c.dispatchEvent({type:"drag",object:d});i.setFromCamera(o,t);var f=i.intersectObjects(c.objects,!0);if(f.length>0){var m=f[0].object;r.setFromNormalAndCoplanarPoint(t.getWorldDirection(r.normal),l.setFromMatrixPosition(m.matrixWorld)),h!==m&&(c.dispatchEvent({type:"hoveron",object:m}),a.style.cursor="pointer",h=m)}else null!==h&&(c.dispatchEvent({type:"hoveroff",object:h}),a.style.cursor="auto",h=null)}function E(e){e.preventDefault(),i.setFromCamera(o,t);var h=i.intersectObjects(c.objects,!0);h.length>0&&(d=c.onselect?c.onselect(h[0].object):h[0].object),d&&(i.ray.intersectPlane(r,s)&&(u.getInverse(d.parent.matrixWorld),n.copy(s).sub(l.setFromMatrixPosition(d.matrixWorld))),a.style.cursor="move",c.dispatchEvent({type:"dragstart",object:d}))}function T(e){e.preventDefault(),d&&(c.dispatchEvent({type:"dragend",object:d}),d=null),a.style.cursor=h?"pointer":"auto"}function v(e){e.preventDefault(),e=e.changedTouches[0];var l=a.getBoundingClientRect();if(o.x=(e.clientX-l.left)/l.width*2-1,o.y=-(e.clientY-l.top)/l.height*2+1,i.setFromCamera(o,t),d&&c.enabled)return i.ray.intersectPlane(r,s)&&d.position.copy(s.sub(n).applyMatrix4(u)),void c.dispatchEvent({type:"drag",object:d})}function x(e){e.preventDefault(),e=e.changedTouches[0];var h=a.getBoundingClientRect();o.x=(e.clientX-h.left)/h.width*2-1,o.y=-(e.clientY-h.top)/h.height*2+1,i.setFromCamera(o,t);var p=i.intersectObjects(c.objects,!0);p.length>0&&(d=c.onselect?c.onselect(p[0].object):p[0].object),d&&(r.setFromNormalAndCoplanarPoint(t.getWorldDirection(r.normal),l.setFromMatrixPosition(d.matrixWorld)),i.ray.intersectPlane(r,s)&&(u.getInverse(d.parent.matrixWorld),n.copy(s).sub(l.setFromMatrixPosition(d.matrixWorld))),a.style.cursor="move",c.dispatchEvent({type:"dragstart",object:d}))}function g(e){e.preventDefault(),d&&(c.dispatchEvent({type:"dragend",object:d}),d=null),a.style.cursor="auto"}p(),this.enabled=!0,this.activate=p,this.deactivate=f,this.dispose=function(){f()},this.objects=e,this.onselect=null},THREE.DragControls.prototype=Object.create(THREE.EventDispatcher.prototype),THREE.DragControls.prototype.constructor=THREE.DragControls},517:()=>{THREE.FlyControls=function(e,t){function a(e,t){return function(){t.apply(e,arguments)}}function r(e){e.preventDefault()}void 0===t&&(console.warn('THREE.FlyControls: The second parameter "domElement" is now mandatory.'),t=document),this.object=e,this.domElement=t,t&&this.domElement.setAttribute("tabindex",-1),this.movementSpeed=1,this.rollSpeed=.005,this.dragToLook=!1,this.autoForward=!1,this.tmpQuaternion=new THREE.Quaternion,this.mouseStatus=0,this.moveState={up:0,down:0,left:0,right:0,forward:0,back:0,pitchUp:0,pitchDown:0,yawLeft:0,yawRight:0,rollLeft:0,rollRight:0},this.moveVector=new THREE.Vector3(0,0,0),this.rotationVector=new THREE.Vector3(0,0,0),this.keydown=function(e){if(!e.altKey){switch(e.keyCode){case 16:this.movementSpeedMultiplier=.1;break;case 87:this.moveState.forward=1;break;case 83:this.moveState.back=1;break;case 65:this.moveState.left=1;break;case 68:this.moveState.right=1;break;case 82:this.moveState.up=1;break;case 70:this.moveState.down=1;break;case 38:this.moveState.pitchUp=1;break;case 40:this.moveState.pitchDown=1;break;case 37:this.moveState.yawLeft=1;break;case 39:this.moveState.yawRight=1;break;case 81:this.moveState.rollLeft=1;break;case 69:this.moveState.rollRight=1}this.updateMovementVector(),this.updateRotationVector()}},this.keyup=function(e){switch(e.keyCode){case 16:this.movementSpeedMultiplier=1;break;case 87:this.moveState.forward=0;break;case 83:this.moveState.back=0;break;case 65:this.moveState.left=0;break;case 68:this.moveState.right=0;break;case 82:this.moveState.up=0;break;case 70:this.moveState.down=0;break;case 38:this.moveState.pitchUp=0;break;case 40:this.moveState.pitchDown=0;break;case 37:this.moveState.yawLeft=0;break;case 39:this.moveState.yawRight=0;break;case 81:this.moveState.rollLeft=0;break;case 69:this.moveState.rollRight=0}this.updateMovementVector(),this.updateRotationVector()},this.mousedown=function(e){if(this.domElement!==document&&this.domElement.focus(),e.preventDefault(),e.stopPropagation(),this.dragToLook)this.mouseStatus++;else{switch(e.button){case 0:this.moveState.forward=1;break;case 2:this.moveState.back=1}this.updateMovementVector()}},this.mousemove=function(e){if(!this.dragToLook||this.mouseStatus>0){var t=this.getContainerDimensions(),a=t.size[0]/2,r=t.size[1]/2;this.moveState.yawLeft=-(e.pageX-t.offset[0]-a)/a,this.moveState.pitchDown=(e.pageY-t.offset[1]-r)/r,this.updateRotationVector()}},this.mouseup=function(e){if(e.preventDefault(),e.stopPropagation(),this.dragToLook)this.mouseStatus--,this.moveState.yawLeft=this.moveState.pitchDown=0;else{switch(e.button){case 0:this.moveState.forward=0;break;case 2:this.moveState.back=0}this.updateMovementVector()}this.updateRotationVector()},this.update=function(e){var t=e*this.movementSpeed,a=e*this.rollSpeed;this.object.translateX(this.moveVector.x*t),this.object.translateY(this.moveVector.y*t),this.object.translateZ(this.moveVector.z*t),this.tmpQuaternion.set(this.rotationVector.x*a,this.rotationVector.y*a,this.rotationVector.z*a,1).normalize(),this.object.quaternion.multiply(this.tmpQuaternion),this.object.rotation.setFromQuaternion(this.object.quaternion,this.object.rotation.order)},this.updateMovementVector=function(){var e=this.moveState.forward||this.autoForward&&!this.moveState.back?1:0;this.moveVector.x=-this.moveState.left+this.moveState.right,this.moveVector.y=-this.moveState.down+this.moveState.up,this.moveVector.z=-e+this.moveState.back},this.updateRotationVector=function(){this.rotationVector.x=-this.moveState.pitchDown+this.moveState.pitchUp,this.rotationVector.y=-this.moveState.yawRight+this.moveState.yawLeft,this.rotationVector.z=-this.moveState.rollRight+this.moveState.rollLeft},this.getContainerDimensions=function(){return this.domElement!=document?{size:[this.domElement.offsetWidth,this.domElement.offsetHeight],offset:[this.domElement.offsetLeft,this.domElement.offsetTop]}:{size:[window.innerWidth,window.innerHeight],offset:[0,0]}},this.dispose=function(){this.domElement.removeEventListener("contextmenu",r,!1),this.domElement.removeEventListener("mousedown",o,!1),this.domElement.removeEventListener("mousemove",i,!1),this.domElement.removeEventListener("mouseup",n,!1),window.removeEventListener("keydown",s,!1),window.removeEventListener("keyup",l,!1)};var i=a(this,this.mousemove),o=a(this,this.mousedown),n=a(this,this.mouseup),s=a(this,this.keydown),l=a(this,this.keyup);this.domElement.addEventListener("contextmenu",r,!1),this.domElement.addEventListener("mousemove",i,!1),this.domElement.addEventListener("mousedown",o,!1),this.domElement.addEventListener("mouseup",n,!1),window.addEventListener("keydown",s,!1),window.addEventListener("keyup",l,!1),this.updateMovementVector(),this.updateRotationVector()}},479:()=>{THREE.OrbitControls=function(e,t){var a,r,i,o,n;void 0===t&&console.warn('THREE.OrbitControls: The second parameter "domElement" is now mandatory.'),t===document&&console.error('THREE.OrbitControls: "document" should not be used as the target "domElement". Please use "renderer.domElement" instead.'),this.object=e,this.domElement=t,this.enabled=!0,this.target=new THREE.Vector3,this.minDistance=0,this.maxDistance=1/0,this.minZoom=0,this.maxZoom=1/0,this.minPolarAngle=0,this.maxPolarAngle=Math.PI,this.minAzimuthAngle=-1/0,this.maxAzimuthAngle=1/0,this.enableDamping=!1,this.dampingFactor=.05,this.enableZoom=!0,this.zoomSpeed=1,this.enableRotate=!0,this.rotateSpeed=1,this.enablePan=!0,this.panSpeed=1,this.screenSpacePanning=!1,this.keyPanSpeed=7,this.autoRotate=!1,this.autoRotateSpeed=2,this.enableKeys=!0,this.keys={LEFT:37,UP:38,RIGHT:39,BOTTOM:40},this.mouseButtons={LEFT:THREE.MOUSE.ROTATE,MIDDLE:THREE.MOUSE.DOLLY,RIGHT:THREE.MOUSE.PAN},this.touches={ONE:THREE.TOUCH.ROTATE,TWO:THREE.TOUCH.DOLLY_PAN},this.target0=this.target.clone(),this.position0=this.object.position.clone(),this.zoom0=this.object.zoom,this.getPolarAngle=function(){return f.phi},this.getAzimuthalAngle=function(){return f.theta},this.saveState=function(){s.target0.copy(s.target),s.position0.copy(s.object.position),s.zoom0=s.object.zoom},this.reset=function(){s.target.copy(s.target0),s.object.position.copy(s.position0),s.object.zoom=s.zoom0,s.object.updateProjectionMatrix(),s.dispatchEvent(l),s.update(),c=h.NONE},this.update=(a=new THREE.Vector3,r=(new THREE.Quaternion).setFromUnitVectors(e.up,new THREE.Vector3(0,1,0)),i=r.clone().inverse(),o=new THREE.Vector3,n=new THREE.Quaternion,function(){var e=s.object.position;return a.copy(e).sub(s.target),a.applyQuaternion(r),f.setFromVector3(a),s.autoRotate&&c===h.NONE&&S(2*Math.PI/60/60*s.autoRotateSpeed),s.enableDamping?(f.theta+=m.theta*s.dampingFactor,f.phi+=m.phi*s.dampingFactor):(f.theta+=m.theta,f.phi+=m.phi),f.theta=Math.max(s.minAzimuthAngle,Math.min(s.maxAzimuthAngle,f.theta)),f.phi=Math.max(s.minPolarAngle,Math.min(s.maxPolarAngle,f.phi)),f.makeSafe(),f.radius*=E,f.radius=Math.max(s.minDistance,Math.min(s.maxDistance,f.radius)),!0===s.enableDamping?s.target.addScaledVector(T,s.dampingFactor):s.target.add(T),a.setFromSpherical(f),a.applyQuaternion(i),e.copy(s.target).add(a),s.object.lookAt(s.target),!0===s.enableDamping?(m.theta*=1-s.dampingFactor,m.phi*=1-s.dampingFactor,T.multiplyScalar(1-s.dampingFactor)):(m.set(0,0,0),T.set(0,0,0)),E=1,!!(v||o.distanceToSquared(s.object.position)>p||8*(1-n.dot(s.object.quaternion))>p)&&(s.dispatchEvent(l),o.copy(s.object.position),n.copy(s.object.quaternion),v=!1,!0)}),this.dispose=function(){s.domElement.removeEventListener("contextmenu",$,!1),s.domElement.removeEventListener("mousedown",V,!1),s.domElement.removeEventListener("wheel",W,!1),s.domElement.removeEventListener("touchstart",q,!1),s.domElement.removeEventListener("touchend",J,!1),s.domElement.removeEventListener("touchmove",K,!1),document.removeEventListener("mousemove",z,!1),document.removeEventListener("mouseup",G,!1),s.domElement.removeEventListener("keydown",Z,!1)};var s=this,l={type:"change"},u={type:"start"},d={type:"end"},h={NONE:-1,ROTATE:0,DOLLY:1,PAN:2,TOUCH_ROTATE:3,TOUCH_PAN:4,TOUCH_DOLLY_PAN:5,TOUCH_DOLLY_ROTATE:6},c=h.NONE,p=1e-6,f=new THREE.Spherical,m=new THREE.Spherical,E=1,T=new THREE.Vector3,v=!1,x=new THREE.Vector2,g=new THREE.Vector2,y=new THREE.Vector2,A=new THREE.Vector2,R=new THREE.Vector2,b=new THREE.Vector2,w=new THREE.Vector2,P=new THREE.Vector2,_=new THREE.Vector2;function F(){return Math.pow(.95,s.zoomSpeed)}function S(e){m.theta-=e}function H(e){m.phi-=e}var M,L=(M=new THREE.Vector3,function(e,t){M.setFromMatrixColumn(t,0),M.multiplyScalar(-e),T.add(M)}),O=function(){var e=new THREE.Vector3;return function(t,a){!0===s.screenSpacePanning?e.setFromMatrixColumn(a,1):(e.setFromMatrixColumn(a,0),e.crossVectors(s.object.up,e)),e.multiplyScalar(t),T.add(e)}}(),I=function(){var e=new THREE.Vector3;return function(t,a){var r=s.domElement;if(s.object.isPerspectiveCamera){var i=s.object.position;e.copy(i).sub(s.target);var o=e.length();o*=Math.tan(s.object.fov/2*Math.PI/180),L(2*t*o/r.clientHeight,s.object.matrix),O(2*a*o/r.clientHeight,s.object.matrix)}else s.object.isOrthographicCamera?(L(t*(s.object.right-s.object.left)/s.object.zoom/r.clientWidth,s.object.matrix),O(a*(s.object.top-s.object.bottom)/s.object.zoom/r.clientHeight,s.object.matrix)):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - pan disabled."),s.enablePan=!1)}}();function N(e){s.object.isPerspectiveCamera?E/=e:s.object.isOrthographicCamera?(s.object.zoom=Math.max(s.minZoom,Math.min(s.maxZoom,s.object.zoom*e)),s.object.updateProjectionMatrix(),v=!0):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),s.enableZoom=!1)}function C(e){s.object.isPerspectiveCamera?E*=e:s.object.isOrthographicCamera?(s.object.zoom=Math.max(s.minZoom,Math.min(s.maxZoom,s.object.zoom/e)),s.object.updateProjectionMatrix(),v=!0):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),s.enableZoom=!1)}function X(e){x.set(e.clientX,e.clientY)}function U(e){A.set(e.clientX,e.clientY)}function j(e){if(1==e.touches.length)x.set(e.touches[0].pageX,e.touches[0].pageY);else{var t=.5*(e.touches[0].pageX+e.touches[1].pageX),a=.5*(e.touches[0].pageY+e.touches[1].pageY);x.set(t,a)}}function k(e){if(1==e.touches.length)A.set(e.touches[0].pageX,e.touches[0].pageY);else{var t=.5*(e.touches[0].pageX+e.touches[1].pageX),a=.5*(e.touches[0].pageY+e.touches[1].pageY);A.set(t,a)}}function Y(e){var t=e.touches[0].pageX-e.touches[1].pageX,a=e.touches[0].pageY-e.touches[1].pageY,r=Math.sqrt(t*t+a*a);w.set(0,r)}function D(e){if(1==e.touches.length)g.set(e.touches[0].pageX,e.touches[0].pageY);else{var t=.5*(e.touches[0].pageX+e.touches[1].pageX),a=.5*(e.touches[0].pageY+e.touches[1].pageY);g.set(t,a)}y.subVectors(g,x).multiplyScalar(s.rotateSpeed);var r=s.domElement;S(2*Math.PI*y.x/r.clientHeight),H(2*Math.PI*y.y/r.clientHeight),x.copy(g)}function Q(e){if(1==e.touches.length)R.set(e.touches[0].pageX,e.touches[0].pageY);else{var t=.5*(e.touches[0].pageX+e.touches[1].pageX),a=.5*(e.touches[0].pageY+e.touches[1].pageY);R.set(t,a)}b.subVectors(R,A).multiplyScalar(s.panSpeed),I(b.x,b.y),A.copy(R)}function B(e){var t=e.touches[0].pageX-e.touches[1].pageX,a=e.touches[0].pageY-e.touches[1].pageY,r=Math.sqrt(t*t+a*a);P.set(0,r),_.set(0,Math.pow(P.y/w.y,s.zoomSpeed)),N(_.y),w.copy(P)}function V(e){if(!1!==s.enabled){switch(e.preventDefault(),s.domElement.focus?s.domElement.focus():window.focus(),e.button){case 0:switch(s.mouseButtons.LEFT){case THREE.MOUSE.ROTATE:if(e.ctrlKey||e.metaKey||e.shiftKey){if(!1===s.enablePan)return;U(e),c=h.PAN}else{if(!1===s.enableRotate)return;X(e),c=h.ROTATE}break;case THREE.MOUSE.PAN:if(e.ctrlKey||e.metaKey||e.shiftKey){if(!1===s.enableRotate)return;X(e),c=h.ROTATE}else{if(!1===s.enablePan)return;U(e),c=h.PAN}break;default:c=h.NONE}break;case 1:switch(s.mouseButtons.MIDDLE){case THREE.MOUSE.DOLLY:if(!1===s.enableZoom)return;!function(e){w.set(e.clientX,e.clientY)}(e),c=h.DOLLY;break;default:c=h.NONE}break;case 2:switch(s.mouseButtons.RIGHT){case THREE.MOUSE.ROTATE:if(!1===s.enableRotate)return;X(e),c=h.ROTATE;break;case THREE.MOUSE.PAN:if(!1===s.enablePan)return;U(e),c=h.PAN;break;default:c=h.NONE}}c!==h.NONE&&(document.addEventListener("mousemove",z,!1),document.addEventListener("mouseup",G,!1),s.dispatchEvent(u))}}function z(e){if(!1!==s.enabled)switch(e.preventDefault(),c){case h.ROTATE:if(!1===s.enableRotate)return;!function(e){g.set(e.clientX,e.clientY),y.subVectors(g,x).multiplyScalar(s.rotateSpeed);var t=s.domElement;S(2*Math.PI*y.x/t.clientHeight),H(2*Math.PI*y.y/t.clientHeight),x.copy(g),s.update()}(e);break;case h.DOLLY:if(!1===s.enableZoom)return;!function(e){P.set(e.clientX,e.clientY),_.subVectors(P,w),_.y>0?N(F()):_.y<0&&C(F()),w.copy(P),s.update()}(e);break;case h.PAN:if(!1===s.enablePan)return;!function(e){R.set(e.clientX,e.clientY),b.subVectors(R,A).multiplyScalar(s.panSpeed),I(b.x,b.y),A.copy(R),s.update()}(e)}}function G(e){!1!==s.enabled&&(document.removeEventListener("mousemove",z,!1),document.removeEventListener("mouseup",G,!1),s.dispatchEvent(d),c=h.NONE)}function W(e){!1===s.enabled||!1===s.enableZoom||c!==h.NONE&&c!==h.ROTATE||(e.preventDefault(),e.stopPropagation(),s.dispatchEvent(u),function(e){e.deltaY<0?C(F()):e.deltaY>0&&N(F()),s.update()}(e),s.dispatchEvent(d))}function Z(e){!1!==s.enabled&&!1!==s.enableKeys&&!1!==s.enablePan&&function(e){var t=!1;switch(e.keyCode){case s.keys.UP:I(0,s.keyPanSpeed),t=!0;break;case s.keys.BOTTOM:I(0,-s.keyPanSpeed),t=!0;break;case s.keys.LEFT:I(s.keyPanSpeed,0),t=!0;break;case s.keys.RIGHT:I(-s.keyPanSpeed,0),t=!0}t&&(e.preventDefault(),s.update())}(e)}function q(e){if(!1!==s.enabled){switch(e.preventDefault(),e.touches.length){case 1:switch(s.touches.ONE){case THREE.TOUCH.ROTATE:if(!1===s.enableRotate)return;j(e),c=h.TOUCH_ROTATE;break;case THREE.TOUCH.PAN:if(!1===s.enablePan)return;k(e),c=h.TOUCH_PAN;break;default:c=h.NONE}break;case 2:switch(s.touches.TWO){case THREE.TOUCH.DOLLY_PAN:if(!1===s.enableZoom&&!1===s.enablePan)return;!function(e){s.enableZoom&&Y(e),s.enablePan&&k(e)}(e),c=h.TOUCH_DOLLY_PAN;break;case THREE.TOUCH.DOLLY_ROTATE:if(!1===s.enableZoom&&!1===s.enableRotate)return;!function(e){s.enableZoom&&Y(e),s.enableRotate&&j(e)}(e),c=h.TOUCH_DOLLY_ROTATE;break;default:c=h.NONE}break;default:c=h.NONE}c!==h.NONE&&s.dispatchEvent(u)}}function K(e){if(!1!==s.enabled)switch(e.preventDefault(),e.stopPropagation(),c){case h.TOUCH_ROTATE:if(!1===s.enableRotate)return;D(e),s.update();break;case h.TOUCH_PAN:if(!1===s.enablePan)return;Q(e),s.update();break;case h.TOUCH_DOLLY_PAN:if(!1===s.enableZoom&&!1===s.enablePan)return;!function(e){s.enableZoom&&B(e),s.enablePan&&Q(e)}(e),s.update();break;case h.TOUCH_DOLLY_ROTATE:if(!1===s.enableZoom&&!1===s.enableRotate)return;!function(e){s.enableZoom&&B(e),s.enableRotate&&D(e)}(e),s.update();break;default:c=h.NONE}}function J(e){!1!==s.enabled&&(s.dispatchEvent(d),c=h.NONE)}function $(e){!1!==s.enabled&&e.preventDefault()}s.domElement.addEventListener("contextmenu",$,!1),s.domElement.addEventListener("mousedown",V,!1),s.domElement.addEventListener("wheel",W,!1),s.domElement.addEventListener("touchstart",q,!1),s.domElement.addEventListener("touchend",J,!1),s.domElement.addEventListener("touchmove",K,!1),s.domElement.addEventListener("keydown",Z,!1),-1===s.domElement.tabIndex&&(s.domElement.tabIndex=0),this.update()},THREE.OrbitControls.prototype=Object.create(THREE.EventDispatcher.prototype),THREE.OrbitControls.prototype.constructor=THREE.OrbitControls,THREE.MapControls=function(e,t){THREE.OrbitControls.call(this,e,t),this.mouseButtons.LEFT=THREE.MOUSE.PAN,this.mouseButtons.RIGHT=THREE.MOUSE.ROTATE,this.touches.ONE=THREE.TOUCH.PAN,this.touches.TWO=THREE.TOUCH.DOLLY_ROTATE},THREE.MapControls.prototype=Object.create(THREE.EventDispatcher.prototype),THREE.MapControls.prototype.constructor=THREE.MapControls},506:()=>{THREE.TrackballControls=function(e,t){void 0===t&&console.warn('THREE.TrackballControls: The second parameter "domElement" is now mandatory.'),t===document&&console.error('THREE.TrackballControls: "document" should not be used as the target "domElement". Please use "renderer.domElement" instead.');var a=this,r=-1;this.object=e,this.domElement=t,this.enabled=!0,this.screen={left:0,top:0,width:0,height:0},this.rotateSpeed=1,this.zoomSpeed=1.2,this.panSpeed=.3,this.noRotate=!1,this.noZoom=!1,this.noPan=!1,this.staticMoving=!1,this.dynamicDampingFactor=.2,this.minDistance=0,this.maxDistance=1/0,this.keys=[65,83,68],this.mouseButtons={LEFT:THREE.MOUSE.ROTATE,MIDDLE:THREE.MOUSE.ZOOM,RIGHT:THREE.MOUSE.PAN},this.target=new THREE.Vector3;var i=1e-6,o=new THREE.Vector3,n=1,s=r,l=r,u=new THREE.Vector3,d=new THREE.Vector2,h=new THREE.Vector2,c=new THREE.Vector3,p=0,f=new THREE.Vector2,m=new THREE.Vector2,E=0,T=0,v=new THREE.Vector2,x=new THREE.Vector2;this.target0=this.target.clone(),this.position0=this.object.position.clone(),this.up0=this.object.up.clone(),this.zoom0=this.object.zoom;var g={type:"change"},y={type:"start"},A={type:"end"};this.handleResize=function(){var e=this.domElement.getBoundingClientRect(),t=this.domElement.ownerDocument.documentElement;this.screen.left=e.left+window.pageXOffset-t.clientLeft,this.screen.top=e.top+window.pageYOffset-t.clientTop,this.screen.width=e.width,this.screen.height=e.height};var R,b,w,P,_,F,S,H,M,L,O,I=(R=new THREE.Vector2,function(e,t){return R.set((e-a.screen.left)/a.screen.width,(t-a.screen.top)/a.screen.height),R}),N=function(){var e=new THREE.Vector2;return function(t,r){return e.set((t-.5*a.screen.width-a.screen.left)/(.5*a.screen.width),(a.screen.height+2*(a.screen.top-r))/a.screen.width),e}}();function C(e){!1!==a.enabled&&(window.removeEventListener("keydown",C),l===r&&(e.keyCode!==a.keys[0]||a.noRotate?e.keyCode!==a.keys[1]||a.noZoom?e.keyCode!==a.keys[2]||a.noPan||(l=2):l=1:l=0))}function X(){!1!==a.enabled&&(l=r,window.addEventListener("keydown",C,!1))}function U(e){if(!1!==a.enabled){if(e.preventDefault(),e.stopPropagation(),s===r)switch(e.button){case a.mouseButtons.LEFT:s=0;break;case a.mouseButtons.MIDDLE:s=1;break;case a.mouseButtons.RIGHT:s=2;break;default:s=r}var t=l!==r?l:s;0!==t||a.noRotate?1!==t||a.noZoom?2!==t||a.noPan||(v.copy(I(e.pageX,e.pageY)),x.copy(v)):(f.copy(I(e.pageX,e.pageY)),m.copy(f)):(h.copy(N(e.pageX,e.pageY)),d.copy(h)),document.addEventListener("mousemove",j,!1),document.addEventListener("mouseup",k,!1),a.dispatchEvent(y)}}function j(e){if(!1!==a.enabled){e.preventDefault(),e.stopPropagation();var t=l!==r?l:s;0!==t||a.noRotate?1!==t||a.noZoom?2!==t||a.noPan||x.copy(I(e.pageX,e.pageY)):m.copy(I(e.pageX,e.pageY)):(d.copy(h),h.copy(N(e.pageX,e.pageY)))}}function k(e){!1!==a.enabled&&(e.preventDefault(),e.stopPropagation(),s=r,document.removeEventListener("mousemove",j),document.removeEventListener("mouseup",k),a.dispatchEvent(A))}function Y(e){if(!1!==a.enabled&&!0!==a.noZoom){switch(e.preventDefault(),e.stopPropagation(),e.deltaMode){case 2:f.y-=.025*e.deltaY;break;case 1:f.y-=.01*e.deltaY;break;default:f.y-=25e-5*e.deltaY}a.dispatchEvent(y),a.dispatchEvent(A)}}function D(e){if(!1!==a.enabled){switch(e.preventDefault(),e.touches.length){case 1:s=3,h.copy(N(e.touches[0].pageX,e.touches[0].pageY)),d.copy(h);break;default:s=4;var t=e.touches[0].pageX-e.touches[1].pageX,r=e.touches[0].pageY-e.touches[1].pageY;T=E=Math.sqrt(t*t+r*r);var i=(e.touches[0].pageX+e.touches[1].pageX)/2,o=(e.touches[0].pageY+e.touches[1].pageY)/2;v.copy(I(i,o)),x.copy(v)}a.dispatchEvent(y)}}function Q(e){if(!1!==a.enabled)switch(e.preventDefault(),e.stopPropagation(),e.touches.length){case 1:d.copy(h),h.copy(N(e.touches[0].pageX,e.touches[0].pageY));break;default:var t=e.touches[0].pageX-e.touches[1].pageX,r=e.touches[0].pageY-e.touches[1].pageY;T=Math.sqrt(t*t+r*r);var i=(e.touches[0].pageX+e.touches[1].pageX)/2,o=(e.touches[0].pageY+e.touches[1].pageY)/2;x.copy(I(i,o))}}function B(e){if(!1!==a.enabled){switch(e.touches.length){case 0:s=r;break;case 1:s=3,h.copy(N(e.touches[0].pageX,e.touches[0].pageY)),d.copy(h)}a.dispatchEvent(A)}}function V(e){!1!==a.enabled&&e.preventDefault()}this.rotateCamera=(w=new THREE.Vector3,P=new THREE.Quaternion,_=new THREE.Vector3,F=new THREE.Vector3,S=new THREE.Vector3,H=new THREE.Vector3,function(){H.set(h.x-d.x,h.y-d.y,0),(b=H.length())?(u.copy(a.object.position).sub(a.target),_.copy(u).normalize(),F.copy(a.object.up).normalize(),S.crossVectors(F,_).normalize(),F.setLength(h.y-d.y),S.setLength(h.x-d.x),H.copy(F.add(S)),w.crossVectors(H,u).normalize(),b*=a.rotateSpeed,P.setFromAxisAngle(w,b),u.applyQuaternion(P),a.object.up.applyQuaternion(P),c.copy(w),p=b):!a.staticMoving&&p&&(p*=Math.sqrt(1-a.dynamicDampingFactor),u.copy(a.object.position).sub(a.target),P.setFromAxisAngle(c,p),u.applyQuaternion(P),a.object.up.applyQuaternion(P)),d.copy(h)}),this.zoomCamera=function(){var e;4===s?(e=E/T,E=T,a.object.isPerspectiveCamera?u.multiplyScalar(e):a.object.isOrthographicCamera?(a.object.zoom*=e,a.object.updateProjectionMatrix()):console.warn("THREE.TrackballControls: Unsupported camera type")):(1!=(e=1+(m.y-f.y)*a.zoomSpeed)&&e>0&&(a.object.isPerspectiveCamera?u.multiplyScalar(e):a.object.isOrthographicCamera?(a.object.zoom/=e,a.object.updateProjectionMatrix()):console.warn("THREE.TrackballControls: Unsupported camera type")),a.staticMoving?f.copy(m):f.y+=(m.y-f.y)*this.dynamicDampingFactor)},this.panCamera=(M=new THREE.Vector2,L=new THREE.Vector3,O=new THREE.Vector3,function(){if(M.copy(x).sub(v),M.lengthSq()){if(a.object.isOrthographicCamera){var e=(a.object.right-a.object.left)/a.object.zoom/a.domElement.clientWidth,t=(a.object.top-a.object.bottom)/a.object.zoom/a.domElement.clientWidth;M.x*=e,M.y*=t}M.multiplyScalar(u.length()*a.panSpeed),O.copy(u).cross(a.object.up).setLength(M.x),O.add(L.copy(a.object.up).setLength(M.y)),a.object.position.add(O),a.target.add(O),a.staticMoving?v.copy(x):v.add(M.subVectors(x,v).multiplyScalar(a.dynamicDampingFactor))}}),this.checkDistances=function(){a.noZoom&&a.noPan||(u.lengthSq()>a.maxDistance*a.maxDistance&&(a.object.position.addVectors(a.target,u.setLength(a.maxDistance)),f.copy(m)),u.lengthSq()<a.minDistance*a.minDistance&&(a.object.position.addVectors(a.target,u.setLength(a.minDistance)),f.copy(m)))},this.update=function(){u.subVectors(a.object.position,a.target),a.noRotate||a.rotateCamera(),a.noZoom||a.zoomCamera(),a.noPan||a.panCamera(),a.object.position.addVectors(a.target,u),a.object.isPerspectiveCamera?(a.checkDistances(),a.object.lookAt(a.target),o.distanceToSquared(a.object.position)>i&&(a.dispatchEvent(g),o.copy(a.object.position))):a.object.isOrthographicCamera?(a.object.lookAt(a.target),(o.distanceToSquared(a.object.position)>i||n!==a.object.zoom)&&(a.dispatchEvent(g),o.copy(a.object.position),n=a.object.zoom)):console.warn("THREE.TrackballControls: Unsupported camera type")},this.reset=function(){s=r,l=r,a.target.copy(a.target0),a.object.position.copy(a.position0),a.object.up.copy(a.up0),a.object.zoom=a.zoom0,a.object.updateProjectionMatrix(),u.subVectors(a.object.position,a.target),a.object.lookAt(a.target),a.dispatchEvent(g),o.copy(a.object.position),n=a.object.zoom},this.dispose=function(){this.domElement.removeEventListener("contextmenu",V,!1),this.domElement.removeEventListener("mousedown",U,!1),this.domElement.removeEventListener("wheel",Y,!1),this.domElement.removeEventListener("touchstart",D,!1),this.domElement.removeEventListener("touchend",B,!1),this.domElement.removeEventListener("touchmove",Q,!1),document.removeEventListener("mousemove",j,!1),document.removeEventListener("mouseup",k,!1),window.removeEventListener("keydown",C,!1),window.removeEventListener("keyup",X,!1)},this.domElement.addEventListener("contextmenu",V,!1),this.domElement.addEventListener("mousedown",U,!1),this.domElement.addEventListener("wheel",Y,!1),this.domElement.addEventListener("touchstart",D,!1),this.domElement.addEventListener("touchend",B,!1),this.domElement.addEventListener("touchmove",Q,!1),window.addEventListener("keydown",C,!1),window.addEventListener("keyup",X,!1),this.handleResize(),this.update()},THREE.TrackballControls.prototype=Object.create(THREE.EventDispatcher.prototype),THREE.TrackballControls.prototype.constructor=THREE.TrackballControls},86:()=>{THREE.TransformControls=function(e,t){void 0===t&&(console.warn('THREE.TransformControls: The second parameter "domElement" is now mandatory.'),t=document),THREE.Object3D.call(this),this.visible=!1;var a=new THREE.TransformControlsGizmo;this.add(a);var r=new THREE.TransformControlsPlane;this.add(r);var i=this;j("camera",e),j("object",void 0),j("enabled",!0),j("axis",null),j("mode","translate"),j("translationSnap",null),j("rotationSnap",null),j("space","world"),j("size",1),j("dragging",!1),j("showX",!0),j("showY",!0),j("showZ",!0);var o={type:"change"},n={type:"mouseDown"},s={type:"mouseUp",mode:i.mode},l={type:"objectChange"},u=new THREE.Raycaster,d=new THREE.Vector3,h=new THREE.Vector3,c=new THREE.Quaternion,p={X:new THREE.Vector3(1,0,0),Y:new THREE.Vector3(0,1,0),Z:new THREE.Vector3(0,0,1)},f=new THREE.Vector3,m=new THREE.Vector3,E=new THREE.Vector3,T=new THREE.Vector3,v=new THREE.Vector3,x=new THREE.Vector3,g=0,y=new THREE.Vector3,A=new THREE.Quaternion,R=new THREE.Vector3,b=new THREE.Vector3,w=new THREE.Quaternion,P=new THREE.Quaternion,_=new THREE.Vector3,F=new THREE.Vector3,S=new THREE.Quaternion,H=new THREE.Vector3,M=new THREE.Vector3,L=new THREE.Quaternion,O=new THREE.Quaternion,I=new THREE.Vector3,N=new THREE.Vector3,C=new THREE.Vector3,X=new THREE.Quaternion,U=new THREE.Vector3;function j(e,t){var n=t;Object.defineProperty(i,e,{get:function(){return void 0!==n?n:t},set:function(t){n!==t&&(n=t,r[e]=t,a[e]=t,i.dispatchEvent({type:e+"-changed",value:t}),i.dispatchEvent(o))}}),i[e]=t,r[e]=t,a[e]=t}function k(e){if(document.pointerLockElement)return{x:0,y:0,button:e.button};var a=e.changedTouches?e.changedTouches[0]:e,r=t.getBoundingClientRect();return{x:(a.clientX-r.left)/r.width*2-1,y:-(a.clientY-r.top)/r.height*2+1,button:e.button}}function Y(e){i.enabled&&i.pointerHover(k(e))}function D(e){i.enabled&&(document.addEventListener("mousemove",Q,!1),i.pointerHover(k(e)),i.pointerDown(k(e)))}function Q(e){i.enabled&&i.pointerMove(k(e))}function B(e){i.enabled&&(document.removeEventListener("mousemove",Q,!1),i.pointerUp(k(e)))}j("worldPosition",M),j("worldPositionStart",F),j("worldQuaternion",L),j("worldQuaternionStart",S),j("cameraPosition",y),j("cameraQuaternion",A),j("pointStart",f),j("pointEnd",m),j("rotationAxis",T),j("rotationAngle",g),j("eye",N),t.addEventListener("mousedown",D,!1),t.addEventListener("touchstart",D,!1),t.addEventListener("mousemove",Y,!1),t.addEventListener("touchmove",Y,!1),t.addEventListener("touchmove",Q,!1),document.addEventListener("mouseup",B,!1),t.addEventListener("touchend",B,!1),t.addEventListener("touchcancel",B,!1),t.addEventListener("touchleave",B,!1),this.dispose=function(){t.removeEventListener("mousedown",D),t.removeEventListener("touchstart",D),t.removeEventListener("mousemove",Y),document.removeEventListener("mousemove",Q),t.removeEventListener("touchmove",Y),t.removeEventListener("touchmove",Q),document.removeEventListener("mouseup",B),t.removeEventListener("touchend",B),t.removeEventListener("touchcancel",B),t.removeEventListener("touchleave",B),this.traverse((function(e){e.geometry&&e.geometry.dispose(),e.material&&e.material.dispose()}))},this.attach=function(e){return this.object=e,this.visible=!0,this},this.detach=function(){return this.object=void 0,this.visible=!1,this.axis=null,this},this.updateMatrixWorld=function(){void 0!==this.object&&(this.object.updateMatrixWorld(),this.object.parent.matrixWorld.decompose(b,w,_),this.object.matrixWorld.decompose(M,L,I),P.copy(w).inverse(),O.copy(L).inverse()),this.camera.updateMatrixWorld(),this.camera.matrixWorld.decompose(y,A,R),N.copy(y).sub(M).normalize(),THREE.Object3D.prototype.updateMatrixWorld.call(this)},this.pointerHover=function(e){if(void 0!==this.object&&!0!==this.dragging&&(void 0===e.button||0===e.button)){u.setFromCamera(e,this.camera);var t=u.intersectObjects(a.picker[this.mode].children,!0)[0]||!1;this.axis=t?t.object.name:null}},this.pointerDown=function(e){if(!(void 0===this.object||!0===this.dragging||void 0!==e.button&&0!==e.button||0!==e.button&&void 0!==e.button||null===this.axis)){u.setFromCamera(e,this.camera);var t=u.intersectObjects([r],!0)[0]||!1;if(t){var a=this.space;if("scale"===this.mode?a="local":"E"!==this.axis&&"XYZE"!==this.axis&&"XYZ"!==this.axis||(a="world"),"local"===a&&"rotate"===this.mode){var i=this.rotationSnap;"X"===this.axis&&i&&(this.object.rotation.x=Math.round(this.object.rotation.x/i)*i),"Y"===this.axis&&i&&(this.object.rotation.y=Math.round(this.object.rotation.y/i)*i),"Z"===this.axis&&i&&(this.object.rotation.z=Math.round(this.object.rotation.z/i)*i)}this.object.updateMatrixWorld(),this.object.parent.updateMatrixWorld(),C.copy(this.object.position),X.copy(this.object.quaternion),U.copy(this.object.scale),this.object.matrixWorld.decompose(F,S,H),f.copy(t.point).sub(F)}this.dragging=!0,n.mode=this.mode,this.dispatchEvent(n)}},this.pointerMove=function(e){var t=this.axis,a=this.mode,i=this.object,n=this.space;if("scale"===a?n="local":"E"!==t&&"XYZE"!==t&&"XYZ"!==t||(n="world"),void 0!==i&&null!==t&&!1!==this.dragging&&(void 0===e.button||0===e.button)){u.setFromCamera(e,this.camera);var s=u.intersectObjects([r],!0)[0]||!1;if(!1!==s){if(m.copy(s.point).sub(F),"translate"===a)E.copy(m).sub(f),"local"===n&&"XYZ"!==t&&E.applyQuaternion(O),-1===t.indexOf("X")&&(E.x=0),-1===t.indexOf("Y")&&(E.y=0),-1===t.indexOf("Z")&&(E.z=0),"local"===n&&"XYZ"!==t?E.applyQuaternion(X).divide(_):E.applyQuaternion(P).divide(_),i.position.copy(E).add(C),this.translationSnap&&("local"===n&&(i.position.applyQuaternion(c.copy(X).inverse()),-1!==t.search("X")&&(i.position.x=Math.round(i.position.x/this.translationSnap)*this.translationSnap),-1!==t.search("Y")&&(i.position.y=Math.round(i.position.y/this.translationSnap)*this.translationSnap),-1!==t.search("Z")&&(i.position.z=Math.round(i.position.z/this.translationSnap)*this.translationSnap),i.position.applyQuaternion(X)),"world"===n&&(i.parent&&i.position.add(d.setFromMatrixPosition(i.parent.matrixWorld)),-1!==t.search("X")&&(i.position.x=Math.round(i.position.x/this.translationSnap)*this.translationSnap),-1!==t.search("Y")&&(i.position.y=Math.round(i.position.y/this.translationSnap)*this.translationSnap),-1!==t.search("Z")&&(i.position.z=Math.round(i.position.z/this.translationSnap)*this.translationSnap),i.parent&&i.position.sub(d.setFromMatrixPosition(i.parent.matrixWorld))));else if("scale"===a){if(-1!==t.search("XYZ")){var y=m.length()/f.length();m.dot(f)<0&&(y*=-1),h.set(y,y,y)}else d.copy(f),h.copy(m),d.applyQuaternion(O),h.applyQuaternion(O),h.divide(d),-1===t.search("X")&&(h.x=1),-1===t.search("Y")&&(h.y=1),-1===t.search("Z")&&(h.z=1);i.scale.copy(U).multiply(h)}else if("rotate"===a){E.copy(m).sub(f);var A=20/M.distanceTo(d.setFromMatrixPosition(this.camera.matrixWorld));"E"===t?(T.copy(N),g=m.angleTo(f),v.copy(f).normalize(),x.copy(m).normalize(),g*=x.cross(v).dot(N)<0?1:-1):"XYZE"===t?(T.copy(E).cross(N).normalize(),g=E.dot(d.copy(T).cross(this.eye))*A):"X"!==t&&"Y"!==t&&"Z"!==t||(T.copy(p[t]),d.copy(p[t]),"local"===n&&d.applyQuaternion(L),g=E.dot(d.cross(N).normalize())*A),this.rotationSnap&&(g=Math.round(g/this.rotationSnap)*this.rotationSnap),this.rotationAngle=g,"local"===n&&"E"!==t&&"XYZE"!==t?(i.quaternion.copy(X),i.quaternion.multiply(c.setFromAxisAngle(T,g)).normalize()):(T.applyQuaternion(P),i.quaternion.copy(c.setFromAxisAngle(T,g)),i.quaternion.multiply(X).normalize())}this.dispatchEvent(o),this.dispatchEvent(l)}}},this.pointerUp=function(e){void 0!==e.button&&0!==e.button||(this.dragging&&null!==this.axis&&(s.mode=this.mode,this.dispatchEvent(s)),this.dragging=!1,void 0===e.button&&(this.axis=null))},this.getMode=function(){return i.mode},this.setMode=function(e){i.mode=e},this.setTranslationSnap=function(e){i.translationSnap=e},this.setRotationSnap=function(e){i.rotationSnap=e},this.setSize=function(e){i.size=e},this.setSpace=function(e){i.space=e},this.update=function(){console.warn("THREE.TransformControls: update function has no more functionality and therefore has been deprecated.")}},THREE.TransformControls.prototype=Object.assign(Object.create(THREE.Object3D.prototype),{constructor:THREE.TransformControls,isTransformControls:!0}),THREE.TransformControlsGizmo=function(){"use strict";THREE.Object3D.call(this),this.type="TransformControlsGizmo";var e=new THREE.MeshBasicMaterial({depthTest:!1,depthWrite:!1,transparent:!0,side:THREE.DoubleSide,fog:!1}),t=new THREE.LineBasicMaterial({depthTest:!1,depthWrite:!1,transparent:!0,linewidth:1,fog:!1}),a=e.clone();a.opacity=.15;var r=e.clone();r.opacity=.33;var i=e.clone();i.color.set(16711680);var o=e.clone();o.color.set(65280);var n=e.clone();n.color.set(255);var s=e.clone();s.opacity=.25;var l=s.clone();l.color.set(16776960);var u=s.clone();u.color.set(65535);var d=s.clone();d.color.set(16711935),e.clone().color.set(16776960);var h=t.clone();h.color.set(16711680);var c=t.clone();c.color.set(65280);var p=t.clone();p.color.set(255);var f=t.clone();f.color.set(65535);var m=t.clone();m.color.set(16711935);var E=t.clone();E.color.set(16776960);var T=t.clone();T.color.set(7895160);var v=E.clone();v.opacity=.25;var x=new THREE.CylinderBufferGeometry(0,.05,.2,12,1,!1),g=new THREE.BoxBufferGeometry(.125,.125,.125),y=new THREE.BufferGeometry;y.setAttribute("position",new THREE.Float32BufferAttribute([0,0,0,1,0,0],3));var A,R=function(e,t){for(var a=new THREE.BufferGeometry,r=[],i=0;i<=64*t;++i)r.push(0,Math.cos(i/32*Math.PI)*e,Math.sin(i/32*Math.PI)*e);return a.setAttribute("position",new THREE.Float32BufferAttribute(r,3)),a},b={X:[[new THREE.Mesh(x,i),[1,0,0],[0,0,-Math.PI/2],null,"fwd"],[new THREE.Mesh(x,i),[1,0,0],[0,0,Math.PI/2],null,"bwd"],[new THREE.Line(y,h)]],Y:[[new THREE.Mesh(x,o),[0,1,0],null,null,"fwd"],[new THREE.Mesh(x,o),[0,1,0],[Math.PI,0,0],null,"bwd"],[new THREE.Line(y,c),null,[0,0,Math.PI/2]]],Z:[[new THREE.Mesh(x,n),[0,0,1],[Math.PI/2,0,0],null,"fwd"],[new THREE.Mesh(x,n),[0,0,1],[-Math.PI/2,0,0],null,"bwd"],[new THREE.Line(y,p),null,[0,-Math.PI/2,0]]],XYZ:[[new THREE.Mesh(new THREE.OctahedronBufferGeometry(.1,0),s.clone()),[0,0,0],[0,0,0]]],XY:[[new THREE.Mesh(new THREE.PlaneBufferGeometry(.295,.295),l.clone()),[.15,.15,0]],[new THREE.Line(y,E),[.18,.3,0],null,[.125,1,1]],[new THREE.Line(y,E),[.3,.18,0],[0,0,Math.PI/2],[.125,1,1]]],YZ:[[new THREE.Mesh(new THREE.PlaneBufferGeometry(.295,.295),u.clone()),[0,.15,.15],[0,Math.PI/2,0]],[new THREE.Line(y,f),[0,.18,.3],[0,0,Math.PI/2],[.125,1,1]],[new THREE.Line(y,f),[0,.3,.18],[0,-Math.PI/2,0],[.125,1,1]]],XZ:[[new THREE.Mesh(new THREE.PlaneBufferGeometry(.295,.295),d.clone()),[.15,0,.15],[-Math.PI/2,0,0]],[new THREE.Line(y,m),[.18,0,.3],null,[.125,1,1]],[new THREE.Line(y,m),[.3,0,.18],[0,-Math.PI/2,0],[.125,1,1]]]},w={X:[[new THREE.Mesh(new THREE.CylinderBufferGeometry(.2,0,1,4,1,!1),a),[.6,0,0],[0,0,-Math.PI/2]]],Y:[[new THREE.Mesh(new THREE.CylinderBufferGeometry(.2,0,1,4,1,!1),a),[0,.6,0]]],Z:[[new THREE.Mesh(new THREE.CylinderBufferGeometry(.2,0,1,4,1,!1),a),[0,0,.6],[Math.PI/2,0,0]]],XYZ:[[new THREE.Mesh(new THREE.OctahedronBufferGeometry(.2,0),a)]],XY:[[new THREE.Mesh(new THREE.PlaneBufferGeometry(.4,.4),a),[.2,.2,0]]],YZ:[[new THREE.Mesh(new THREE.PlaneBufferGeometry(.4,.4),a),[0,.2,.2],[0,Math.PI/2,0]]],XZ:[[new THREE.Mesh(new THREE.PlaneBufferGeometry(.4,.4),a),[.2,0,.2],[-Math.PI/2,0,0]]]},P={START:[[new THREE.Mesh(new THREE.OctahedronBufferGeometry(.01,2),r),null,null,null,"helper"]],END:[[new THREE.Mesh(new THREE.OctahedronBufferGeometry(.01,2),r),null,null,null,"helper"]],DELTA:[[new THREE.Line((A=new THREE.BufferGeometry,A.setAttribute("position",new THREE.Float32BufferAttribute([0,0,0,1,1,1],3)),A),r),null,null,null,"helper"]],X:[[new THREE.Line(y,r.clone()),[-1e3,0,0],null,[1e6,1,1],"helper"]],Y:[[new THREE.Line(y,r.clone()),[0,-1e3,0],[0,0,Math.PI/2],[1e6,1,1],"helper"]],Z:[[new THREE.Line(y,r.clone()),[0,0,-1e3],[0,-Math.PI/2,0],[1e6,1,1],"helper"]]},_={X:[[new THREE.Line(R(1,.5),h)],[new THREE.Mesh(new THREE.OctahedronBufferGeometry(.04,0),i),[0,0,.99],null,[1,3,1]]],Y:[[new THREE.Line(R(1,.5),c),null,[0,0,-Math.PI/2]],[new THREE.Mesh(new THREE.OctahedronBufferGeometry(.04,0),o),[0,0,.99],null,[3,1,1]]],Z:[[new THREE.Line(R(1,.5),p),null,[0,Math.PI/2,0]],[new THREE.Mesh(new THREE.OctahedronBufferGeometry(.04,0),n),[.99,0,0],null,[1,3,1]]],E:[[new THREE.Line(R(1.25,1),v),null,[0,Math.PI/2,0]],[new THREE.Mesh(new THREE.CylinderBufferGeometry(.03,0,.15,4,1,!1),v),[1.17,0,0],[0,0,-Math.PI/2],[1,1,.001]],[new THREE.Mesh(new THREE.CylinderBufferGeometry(.03,0,.15,4,1,!1),v),[-1.17,0,0],[0,0,Math.PI/2],[1,1,.001]],[new THREE.Mesh(new THREE.CylinderBufferGeometry(.03,0,.15,4,1,!1),v),[0,-1.17,0],[Math.PI,0,0],[1,1,.001]],[new THREE.Mesh(new THREE.CylinderBufferGeometry(.03,0,.15,4,1,!1),v),[0,1.17,0],[0,0,0],[1,1,.001]]],XYZE:[[new THREE.Line(R(1,1),T),null,[0,Math.PI/2,0]]]},F={AXIS:[[new THREE.Line(y,r.clone()),[-1e3,0,0],null,[1e6,1,1],"helper"]]},S={X:[[new THREE.Mesh(new THREE.TorusBufferGeometry(1,.1,4,24),a),[0,0,0],[0,-Math.PI/2,-Math.PI/2]]],Y:[[new THREE.Mesh(new THREE.TorusBufferGeometry(1,.1,4,24),a),[0,0,0],[Math.PI/2,0,0]]],Z:[[new THREE.Mesh(new THREE.TorusBufferGeometry(1,.1,4,24),a),[0,0,0],[0,0,-Math.PI/2]]],E:[[new THREE.Mesh(new THREE.TorusBufferGeometry(1.25,.1,2,24),a)]],XYZE:[[new THREE.Mesh(new THREE.SphereBufferGeometry(.7,10,8),a)]]},H={X:[[new THREE.Mesh(g,i),[.8,0,0],[0,0,-Math.PI/2]],[new THREE.Line(y,h),null,null,[.8,1,1]]],Y:[[new THREE.Mesh(g,o),[0,.8,0]],[new THREE.Line(y,c),null,[0,0,Math.PI/2],[.8,1,1]]],Z:[[new THREE.Mesh(g,n),[0,0,.8],[Math.PI/2,0,0]],[new THREE.Line(y,p),null,[0,-Math.PI/2,0],[.8,1,1]]],XY:[[new THREE.Mesh(g,l),[.85,.85,0],null,[2,2,.2]],[new THREE.Line(y,E),[.855,.98,0],null,[.125,1,1]],[new THREE.Line(y,E),[.98,.855,0],[0,0,Math.PI/2],[.125,1,1]]],YZ:[[new THREE.Mesh(g,u),[0,.85,.85],null,[.2,2,2]],[new THREE.Line(y,f),[0,.855,.98],[0,0,Math.PI/2],[.125,1,1]],[new THREE.Line(y,f),[0,.98,.855],[0,-Math.PI/2,0],[.125,1,1]]],XZ:[[new THREE.Mesh(g,d),[.85,0,.85],null,[2,.2,2]],[new THREE.Line(y,m),[.855,0,.98],null,[.125,1,1]],[new THREE.Line(y,m),[.98,0,.855],[0,-Math.PI/2,0],[.125,1,1]]],XYZX:[[new THREE.Mesh(new THREE.BoxBufferGeometry(.125,.125,.125),s.clone()),[1.1,0,0]]],XYZY:[[new THREE.Mesh(new THREE.BoxBufferGeometry(.125,.125,.125),s.clone()),[0,1.1,0]]],XYZZ:[[new THREE.Mesh(new THREE.BoxBufferGeometry(.125,.125,.125),s.clone()),[0,0,1.1]]]},M={X:[[new THREE.Mesh(new THREE.CylinderBufferGeometry(.2,0,.8,4,1,!1),a),[.5,0,0],[0,0,-Math.PI/2]]],Y:[[new THREE.Mesh(new THREE.CylinderBufferGeometry(.2,0,.8,4,1,!1),a),[0,.5,0]]],Z:[[new THREE.Mesh(new THREE.CylinderBufferGeometry(.2,0,.8,4,1,!1),a),[0,0,.5],[Math.PI/2,0,0]]],XY:[[new THREE.Mesh(g,a),[.85,.85,0],null,[3,3,.2]]],YZ:[[new THREE.Mesh(g,a),[0,.85,.85],null,[.2,3,3]]],XZ:[[new THREE.Mesh(g,a),[.85,0,.85],null,[3,.2,3]]],XYZX:[[new THREE.Mesh(new THREE.BoxBufferGeometry(.2,.2,.2),a),[1.1,0,0]]],XYZY:[[new THREE.Mesh(new THREE.BoxBufferGeometry(.2,.2,.2),a),[0,1.1,0]]],XYZZ:[[new THREE.Mesh(new THREE.BoxBufferGeometry(.2,.2,.2),a),[0,0,1.1]]]},L={X:[[new THREE.Line(y,r.clone()),[-1e3,0,0],null,[1e6,1,1],"helper"]],Y:[[new THREE.Line(y,r.clone()),[0,-1e3,0],[0,0,Math.PI/2],[1e6,1,1],"helper"]],Z:[[new THREE.Line(y,r.clone()),[0,0,-1e3],[0,-Math.PI/2,0],[1e6,1,1],"helper"]]},O=function(e){var t=new THREE.Object3D;for(var a in e)for(var r=e[a].length;r--;){var i=e[a][r][0].clone(),o=e[a][r][1],n=e[a][r][2],s=e[a][r][3],l=e[a][r][4];i.name=a,i.tag=l,o&&i.position.set(o[0],o[1],o[2]),n&&i.rotation.set(n[0],n[1],n[2]),s&&i.scale.set(s[0],s[1],s[2]),i.updateMatrix();var u=i.geometry.clone();u.applyMatrix(i.matrix),i.geometry=u,i.renderOrder=1/0,i.position.set(0,0,0),i.rotation.set(0,0,0),i.scale.set(1,1,1),t.add(i)}return t},I=new THREE.Vector3(0,0,0),N=new THREE.Euler,C=new THREE.Vector3(0,1,0),X=new THREE.Vector3(0,0,0),U=new THREE.Matrix4,j=new THREE.Quaternion,k=new THREE.Quaternion,Y=new THREE.Quaternion,D=new THREE.Vector3(1,0,0),Q=new THREE.Vector3(0,1,0),B=new THREE.Vector3(0,0,1);this.gizmo={},this.picker={},this.helper={},this.add(this.gizmo.translate=O(b)),this.add(this.gizmo.rotate=O(_)),this.add(this.gizmo.scale=O(H)),this.add(this.picker.translate=O(w)),this.add(this.picker.rotate=O(S)),this.add(this.picker.scale=O(M)),this.add(this.helper.translate=O(P)),this.add(this.helper.rotate=O(F)),this.add(this.helper.scale=O(L)),this.picker.translate.visible=!1,this.picker.rotate.visible=!1,this.picker.scale.visible=!1,this.updateMatrixWorld=function(){var e=this.space;"scale"===this.mode&&(e="local");var t="local"===e?this.worldQuaternion:Y;this.gizmo.translate.visible="translate"===this.mode,this.gizmo.rotate.visible="rotate"===this.mode,this.gizmo.scale.visible="scale"===this.mode,this.helper.translate.visible="translate"===this.mode,this.helper.rotate.visible="rotate"===this.mode,this.helper.scale.visible="scale"===this.mode;var a=[];a=(a=(a=a.concat(this.picker[this.mode].children)).concat(this.gizmo[this.mode].children)).concat(this.helper[this.mode].children);for(var r=0;r<a.length;r++){var i=a[r];i.visible=!0,i.rotation.set(0,0,0),i.position.copy(this.worldPosition);var o=this.worldPosition.distanceTo(this.cameraPosition);if(i.scale.set(1,1,1).multiplyScalar(o*this.size/7),"helper"!==i.tag){if(i.quaternion.copy(t),"translate"===this.mode||"scale"===this.mode){var n=.99;"X"!==i.name&&"XYZX"!==i.name||Math.abs(C.copy(D).applyQuaternion(t).dot(this.eye))>n&&(i.scale.set(1e-10,1e-10,1e-10),i.visible=!1),"Y"!==i.name&&"XYZY"!==i.name||Math.abs(C.copy(Q).applyQuaternion(t).dot(this.eye))>n&&(i.scale.set(1e-10,1e-10,1e-10),i.visible=!1),"Z"!==i.name&&"XYZZ"!==i.name||Math.abs(C.copy(B).applyQuaternion(t).dot(this.eye))>n&&(i.scale.set(1e-10,1e-10,1e-10),i.visible=!1),"XY"===i.name&&Math.abs(C.copy(B).applyQuaternion(t).dot(this.eye))<.2&&(i.scale.set(1e-10,1e-10,1e-10),i.visible=!1),"YZ"===i.name&&Math.abs(C.copy(D).applyQuaternion(t).dot(this.eye))<.2&&(i.scale.set(1e-10,1e-10,1e-10),i.visible=!1),"XZ"===i.name&&Math.abs(C.copy(Q).applyQuaternion(t).dot(this.eye))<.2&&(i.scale.set(1e-10,1e-10,1e-10),i.visible=!1),-1!==i.name.search("X")&&(C.copy(D).applyQuaternion(t).dot(this.eye)<0?"fwd"===i.tag?i.visible=!1:i.scale.x*=-1:"bwd"===i.tag&&(i.visible=!1)),-1!==i.name.search("Y")&&(C.copy(Q).applyQuaternion(t).dot(this.eye)<0?"fwd"===i.tag?i.visible=!1:i.scale.y*=-1:"bwd"===i.tag&&(i.visible=!1)),-1!==i.name.search("Z")&&(C.copy(B).applyQuaternion(t).dot(this.eye)<0?"fwd"===i.tag?i.visible=!1:i.scale.z*=-1:"bwd"===i.tag&&(i.visible=!1))}else"rotate"===this.mode&&(k.copy(t),C.copy(this.eye).applyQuaternion(j.copy(t).inverse()),-1!==i.name.search("E")&&i.quaternion.setFromRotationMatrix(U.lookAt(this.eye,X,Q)),"X"===i.name&&(j.setFromAxisAngle(D,Math.atan2(-C.y,C.z)),j.multiplyQuaternions(k,j),i.quaternion.copy(j)),"Y"===i.name&&(j.setFromAxisAngle(Q,Math.atan2(C.x,C.z)),j.multiplyQuaternions(k,j),i.quaternion.copy(j)),"Z"===i.name&&(j.setFromAxisAngle(B,Math.atan2(C.y,C.x)),j.multiplyQuaternions(k,j),i.quaternion.copy(j)));i.visible=i.visible&&(-1===i.name.indexOf("X")||this.showX),i.visible=i.visible&&(-1===i.name.indexOf("Y")||this.showY),i.visible=i.visible&&(-1===i.name.indexOf("Z")||this.showZ),i.visible=i.visible&&(-1===i.name.indexOf("E")||this.showX&&this.showY&&this.showZ),i.material._opacity=i.material._opacity||i.material.opacity,i.material._color=i.material._color||i.material.color.clone(),i.material.color.copy(i.material._color),i.material.opacity=i.material._opacity,this.enabled?this.axis&&(i.name===this.axis||this.axis.split("").some((function(e){return i.name===e}))?(i.material.opacity=1,i.material.color.lerp(new THREE.Color(1,1,1),.5)):(i.material.opacity*=.25,i.material.color.lerp(new THREE.Color(1,1,1),.5))):(i.material.opacity*=.5,i.material.color.lerp(new THREE.Color(1,1,1),.5))}else i.visible=!1,"AXIS"===i.name?(i.position.copy(this.worldPositionStart),i.visible=!!this.axis,"X"===this.axis&&(j.setFromEuler(N.set(0,0,0)),i.quaternion.copy(t).multiply(j),Math.abs(C.copy(D).applyQuaternion(t).dot(this.eye))>.9&&(i.visible=!1)),"Y"===this.axis&&(j.setFromEuler(N.set(0,0,Math.PI/2)),i.quaternion.copy(t).multiply(j),Math.abs(C.copy(Q).applyQuaternion(t).dot(this.eye))>.9&&(i.visible=!1)),"Z"===this.axis&&(j.setFromEuler(N.set(0,Math.PI/2,0)),i.quaternion.copy(t).multiply(j),Math.abs(C.copy(B).applyQuaternion(t).dot(this.eye))>.9&&(i.visible=!1)),"XYZE"===this.axis&&(j.setFromEuler(N.set(0,Math.PI/2,0)),C.copy(this.rotationAxis),i.quaternion.setFromRotationMatrix(U.lookAt(X,C,Q)),i.quaternion.multiply(j),i.visible=this.dragging),"E"===this.axis&&(i.visible=!1)):"START"===i.name?(i.position.copy(this.worldPositionStart),i.visible=this.dragging):"END"===i.name?(i.position.copy(this.worldPosition),i.visible=this.dragging):"DELTA"===i.name?(i.position.copy(this.worldPositionStart),i.quaternion.copy(this.worldQuaternionStart),I.set(1e-10,1e-10,1e-10).add(this.worldPositionStart).sub(this.worldPosition).multiplyScalar(-1),I.applyQuaternion(this.worldQuaternionStart.clone().inverse()),i.scale.copy(I),i.visible=this.dragging):(i.quaternion.copy(t),this.dragging?i.position.copy(this.worldPositionStart):i.position.copy(this.worldPosition),this.axis&&(i.visible=-1!==this.axis.search(i.name)))}THREE.Object3D.prototype.updateMatrixWorld.call(this)}},THREE.TransformControlsGizmo.prototype=Object.assign(Object.create(THREE.Object3D.prototype),{constructor:THREE.TransformControlsGizmo,isTransformControlsGizmo:!0}),THREE.TransformControlsPlane=function(){"use strict";THREE.Mesh.call(this,new THREE.PlaneBufferGeometry(1e5,1e5,2,2),new THREE.MeshBasicMaterial({visible:!1,wireframe:!0,side:THREE.DoubleSide,transparent:!0,opacity:.1})),this.type="TransformControlsPlane";var e=new THREE.Vector3(1,0,0),t=new THREE.Vector3(0,1,0),a=new THREE.Vector3(0,0,1),r=new THREE.Vector3,i=new THREE.Vector3,o=new THREE.Vector3,n=new THREE.Matrix4,s=new THREE.Quaternion;this.updateMatrixWorld=function(){var l=this.space;switch(this.position.copy(this.worldPosition),"scale"===this.mode&&(l="local"),e.set(1,0,0).applyQuaternion("local"===l?this.worldQuaternion:s),t.set(0,1,0).applyQuaternion("local"===l?this.worldQuaternion:s),a.set(0,0,1).applyQuaternion("local"===l?this.worldQuaternion:s),o.copy(t),this.mode){case"translate":case"scale":switch(this.axis){case"X":o.copy(this.eye).cross(e),i.copy(e).cross(o);break;case"Y":o.copy(this.eye).cross(t),i.copy(t).cross(o);break;case"Z":o.copy(this.eye).cross(a),i.copy(a).cross(o);break;case"XY":i.copy(a);break;case"YZ":i.copy(e);break;case"XZ":o.copy(a),i.copy(t);break;case"XYZ":case"E":i.set(0,0,0)}break;case"rotate":default:i.set(0,0,0)}0===i.length()?this.quaternion.copy(this.cameraQuaternion):(n.lookAt(r.set(0,0,0),i,o),this.quaternion.setFromRotationMatrix(n)),THREE.Object3D.prototype.updateMatrixWorld.call(this)}},THREE.TransformControlsPlane.prototype=Object.assign(Object.create(THREE.Mesh.prototype),{constructor:THREE.TransformControlsPlane,isTransformControlsPlane:!0})},705:function(){var e,t,a,r,i;a=function(e,t){return function(){return e.apply(t,arguments)}},r=[].slice,i={}.hasOwnProperty,t=function(e,t){return t(),e},e=function(){function e(e,t){this.timeout=e,this.progress=t,this.doTask=a(this.doTask,this),this.finish=a(this.finish,this),this.start=a(this.start,this),this.check=a(this.check,this)}return e.prototype.check=function(){var e,a;if(null!=this.started)return t(e=Date.now()-this.started,(a=this,function(){var t,r,i;if(null==(t=e>=a.timeout)||t)throw new Error("Timeout reached: "+e+"/"+a.timeout+", "+(null!=(r=a.tasks)?r:0)+" tasks unfinished "+(null!=(i=a.done)?i:0)+" finished.")}))},e.prototype.start=function(){return null==this.started&&(this.started=Date.now()),null==this.tasks&&(this.tasks=0),null==this.total&&(this.total=0),this.total+=1,this.tasks+=1,this.check()},e.prototype.finish=function(){if(null!=this.tasks&&this.tasks<1)throw new Error("Finished more tasks than started");if(this.tasks-=1,this.check(),null==this.done&&(this.done=0),this.done+=1,null!=this.progress&&this.progress(this.done,this.total),0===this.tasks)return this.done,this.timeout,this.started=this.done=this.total=void 0},e.prototype.doTask=function(e){var t;return this.start(),t=e(),this.finish(),t},e}(),window.ThreeBSP=function(){function i(t,r,i){var o,n,s,l,u;this.matrix=r,this.options=null!=i?i:{},this.intersect=a(this.intersect,this),this.union=a(this.union,this),this.subtract=a(this.subtract,this),this.toGeometry=a(this.toGeometry,this),this.toMesh=a(this.toMesh,this),this.toTree=a(this.toTree,this),this.withTimer=a(this.withTimer,this),null==this.matrix||this.matrix instanceof THREE.Matrix4||(this.options=this.matrix,this.matrix=void 0),null==this.options&&(this.options={}),null==this.matrix&&(this.matrix=new THREE.Matrix4),null==(o=this.options).timer&&(o.timer=new e(null!=(n=null!=(s=this.options.timer)?s.timeout:void 0)?n:this.options.timeout,null!=(l=null!=(u=this.options.timer)?u.progress:void 0)?l:this.options.progress)),this.tree=this.toTree(t)}return i.prototype.withTimer=function(e,t){var a;a=this.options.timer;try{return this.options.timer=e,t()}finally{this.options.timer=a}},i.prototype.toTree=function(e){var t,a,r,o,n,s,l,u;if(e instanceof i.Node)return e;for(s=[],l=(a=e instanceof THREE.Geometry?e:e instanceof THREE.Mesh?(e.updateMatrix(),this.matrix=e.matrix.clone(),e.geometry):void 0).faces,u=this,t=function(e,t){var r,o,n,l,d,h,c,p,f;for(null==(r=null!=(h=a.faceVertexUvs)?h[0][t]:void 0)&&(r=[new THREE.Vector2,new THREE.Vector2,new THREE.Vector2,new THREE.Vector2]),d=new i.Polygon,p=n=0,l=(c=["a","b","c","d"]).length;n<l;p=++n)null!=(o=e[c[p]])&&(f=a.vertices[o],(f=new i.Vertex(f.x,f.y,f.z,e.vertexNormals[0],new THREE.Vector2(r[p].x,r[p].y))).applyMatrix4(u.matrix),d.vertices.push(f));return s.push(d.calculateProperties())},r=o=0,n=l.length;o<n;r=++o)t(l[r],r);return new i.Node(s,this.options)},i.prototype.toMesh=function(e){return null==e&&(e=new THREE.MeshNormalMaterial),this.options.timer.doTask((a=this,function(){var r,i;return r=a.toGeometry(),t(i=new THREE.Mesh(r,e),(function(){return i.position.setFromMatrixPosition(a.matrix),i.rotation.setFromRotationMatrix(a.matrix)}))}));var a},i.prototype.toGeometry=function(){return this.options.timer.doTask((e=this,function(){var a,i;return i=(new THREE.Matrix4).getInverse(e.matrix),t(a=new THREE.Geometry,(function(){var t,o,n,s,l;for(l=[],t=0,o=(s=e.tree.allPolygons()).length;t<o;t++)n=s[t],l.push(e.options.timer.doTask((function(){var e,t,o,s,l,u,d,h,c;for(s=function(){var e,t,a,r;for(r=[],e=0,t=(a=n.vertices).length;e<t;e++)d=a[e],r.push(d.clone().applyMatrix4(i));return r}(),u=[],t=o=2,l=s.length;2<=l?o<l:o>l;t=2<=l?++o:--o)c=[s[0],s[t-1],s[t]],h=function(){var e,t,a,r,i;for(i=[],t=0,e=c.length;t<e;t++)d=c[t],i.push(new THREE.Vector2(null!=(a=d.uv)?a.x:void 0,null!=(r=d.uv)?r.y:void 0));return i}(),e=function(e,t,a){a.prototype=e.prototype;var r=new a,i=e.apply(r,t);return Object(i)===i?i:r}(THREE.Face3,r.call(function(){var e,t,r;for(r=[],t=0,e=c.length;t<e;t++)d=c[t],r.push(a.vertices.push(d)-1);return r}()).concat([n.normal.clone()]),(function(){})),a.faces.push(e),u.push(a.faceVertexUvs[0].push(h));return u})));return l}))}));var e},i.prototype.subtract=function(e){return this.options.timer.doTask((t=this,function(){return e.withTimer(t.options.timer,(function(){var a,r,o;return r=(a=[t.tree.clone(),e.tree.clone()])[1],(o=a[0]).invert().clipTo(r),r.clipTo(o).invert().clipTo(o).invert(),new i(o.build(r.allPolygons()).invert(),t.matrix,t.options)}))}));var t},i.prototype.union=function(e){return this.options.timer.doTask((t=this,function(){return e.withTimer(t.options.timer,(function(){var a,r,o;return r=(a=[t.tree.clone(),e.tree.clone()])[1],(o=a[0]).clipTo(r),r.clipTo(o).invert().clipTo(o).invert(),new i(o.build(r.allPolygons()),t.matrix,t.options)}))}));var t},i.prototype.intersect=function(e){return this.options.timer.doTask((t=this,function(){return e.withTimer(t.options.timer,(function(){var a,r,o;return o=(a=[t.tree.clone(),e.tree.clone()])[0],(r=a[1]).clipTo(o.invert()).invert().clipTo(o.clipTo(r)),new i(o.build(r.allPolygons()).invert(),t.matrix,t.options)}))}));var t},i}(),ThreeBSP.Vertex=function(e){function o(e,t,r,i,n){this.normal=null!=i?i:new THREE.Vector3,this.uv=null!=n?n:new THREE.Vector2,this.interpolate=a(this.interpolate,this),this.lerp=a(this.lerp,this),o.__super__.constructor.call(this,e,t,r)}return function(e,t){for(var a in t)i.call(t,a)&&(e[a]=t[a]);function r(){this.constructor=e}r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype}(o,THREE.Vector3),o.prototype.clone=function(){return new ThreeBSP.Vertex(this.x,this.y,this.z,this.normal.clone(),this.uv.clone())},o.prototype.lerp=function(e,a){return t(o.__super__.lerp.apply(this,arguments),(r=this,function(){return r.uv.add(e.uv.clone().sub(r.uv).multiplyScalar(a)),r.normal.lerp(e,a)}));var r},o.prototype.interpolate=function(){var e,t;return e=1<=arguments.length?r.call(arguments,0):[],(t=this.clone()).lerp.apply(t,e)},o}(),ThreeBSP.Polygon=function(){function e(e,t,r){this.vertices=null!=e?e:[],this.normal=t,this.w=r,this.subdivide=a(this.subdivide,this),this.tessellate=a(this.tessellate,this),this.classifySide=a(this.classifySide,this),this.classifyVertex=a(this.classifyVertex,this),this.invert=a(this.invert,this),this.clone=a(this.clone,this),this.calculateProperties=a(this.calculateProperties,this),this.vertices.length&&this.calculateProperties()}return e.prototype.calculateProperties=function(){return t(this,(e=this,function(){var t,a,r,i;return t=(i=e.vertices)[0],a=i[1],r=i[2],e.normal=a.clone().sub(t).cross(r.clone().sub(t)).normalize(),e.w=e.normal.clone().dot(t)}));var e},e.prototype.clone=function(){var e;return new ThreeBSP.Polygon(function(){var t,a,r,i;for(i=[],t=0,a=(r=this.vertices).length;t<a;t++)e=r[t],i.push(e.clone());return i}.call(this),this.normal.clone(),this.w)},e.prototype.invert=function(){return t(this,(e=this,function(){return e.normal.multiplyScalar(-1),e.w*=-1,e.vertices.reverse()}));var e},e.prototype.classifyVertex=function(e){var t;switch(t=this.normal.dot(e)-this.w,!1){case!(t<-1e-5):return 2;case!(t>1e-5):return 1;default:return 0}},e.prototype.classifySide=function(e){var t,a,r,i,o,n,s,l;for(a=(o=[0,0])[0],t=o[1],l=this,s=function(e){switch(l.classifyVertex(e)){case 1:return a+=1;case 2:return t+=1}},r=0,i=(n=e.vertices).length;r<i;r++)s(n[r]);return a>0&&0===t?1:0===a&&t>0?2:a===t&&0===t?0:3},e.prototype.tessellate=function(e){var a,r,i,o,n,s,l,u,d,h,c,p,f,m,E,T;if(u={f:[],b:[],count:e.vertices.length},i=u.f,a=u.b,r=u.count,3!==this.classifySide(e))return[e];for(o=n=0,s=(d=e.vertices).length;n<s;o=++n)E=d[o],T=e.vertices[(o+1)%r],p=(h=function(){var e,t,a,r;for(r=[],e=0,t=(a=[E,T]).length;e<t;e++)m=a[e],r.push(this.classifyVertex(m));return r}.call(this))[0],f=h[1],2!==p&&i.push(E),1!==p&&a.push(E),3==(p|f)&&(c=(this.w-this.normal.dot(E))/this.normal.dot(T.clone().sub(E)),m=E.interpolate(T,c),i.push(m),a.push(m));return t(l=[],(function(){if(i.length>=3&&l.push(new ThreeBSP.Polygon(i)),a.length>=3)return l.push(new ThreeBSP.Polygon(a))}))},e.prototype.subdivide=function(e,t,a,r,i){var o,n,s,l,u,d;for(u=[],o=0,n=(l=this.tessellate(e)).length;o<n;o++)switch(s=l[o],d=this.classifySide(s)){case 1:u.push(r.push(s));break;case 2:u.push(i.push(s));break;case 0:this.normal.dot(s.normal)>0?u.push(t.push(s)):u.push(a.push(s));break;default:throw new Error("BUG: Polygon of classification "+d+" in subdivision")}return u},e}(),ThreeBSP.Node=function(){function e(e,t){var r;this.options=null!=t?t:{},this.clipTo=a(this.clipTo,this),this.clipPolygons=a(this.clipPolygons,this),this.invert=a(this.invert,this),this.allPolygons=a(this.allPolygons,this),this.isConvex=a(this.isConvex,this),this.build=a(this.build,this),this.clone=a(this.clone,this),null==e||e instanceof Array||(this.options=e,e=void 0),this.polygons=[],this.options.timer.doTask((r=this,function(){if(null!=e&&e.length)return r.build(e)}))}return e.prototype.clone=function(){var e,a;return t(e=new ThreeBSP.Node(this.options),(a=this,function(){var t;return e.divider=null!=(t=a.divider)?t.clone():void 0,e.polygons=a.options.timer.doTask((function(){var e,t,r,i,o;for(o=[],e=0,t=(i=a.polygons).length;e<t;e++)r=i[e],o.push(r.clone());return o})),e.front=a.options.timer.doTask((function(){var e;return null!=(e=a.front)?e.clone():void 0})),e.back=a.options.timer.doTask((function(){var e;return null!=(e=a.back)?e.clone():void 0}))}))},e.prototype.build=function(e){return t(this,(a=this,function(){var t,r,o,n;for(o in n={front:[],back:[]},null==a.divider&&(a.divider=e[0].clone()),a.options.timer.doTask((function(){var t,r,i,o;for(o=[],t=0,r=e.length;t<r;t++)i=e[t],o.push(a.options.timer.doTask((function(){return a.divider.subdivide(i,a.polygons,a.polygons,n.front,n.back)})));return o})),r=[],n)i.call(n,o)&&((t=n[o]).length?(null==a[o]&&(a[o]=new ThreeBSP.Node(a.options)),r.push(a[o].build(t))):r.push(void 0));return r}));var a},e.prototype.isConvex=function(e){var t,a,r,i,o,n;for(a=0,i=e.length;a<i;a++)for(t=e[a],r=0,o=e.length;r<o;r++)if(t!==(n=e[r])&&2!==n.classifySide(t))return!1;return!0},e.prototype.allPolygons=function(){return this.options.timer.doTask((e=this,function(){var t,a;return e.polygons.slice().concat((null!=(a=e.front)?a.allPolygons():void 0)||[]).concat((null!=(t=e.back)?t.allPolygons():void 0)||[])}));var e},e.prototype.invert=function(){return t(this,(e=this,function(){return e.options.timer.doTask((function(){var t,a,r,i,o,n,s,l,u;for(a=0,i=(s=e.polygons).length;a<i;a++)n=s[a],e.options.timer.doTask((function(){return n.invert()}));for(r=0,o=(l=[e.divider,e.front,e.back]).length;r<o;r++)t=l[r],e.options.timer.doTask((function(){return null!=t?t.invert():void 0}));return u=[e.back,e.front],e.front=u[0],e.back=u[1],u}))}));var e},e.prototype.clipPolygons=function(e){return this.options.timer.doTask((t=this,function(){var a,r,i,o,n;if(!t.divider)return e.slice();for(r=[],a=[],i=0,o=e.length;i<o;i++)n=e[i],t.options.timer.doTask((function(){return t.divider.subdivide(n,r,a,r,a)}));return t.front&&(r=t.front.clipPolygons(r)),t.back&&(a=t.back.clipPolygons(a)),t.back?r.concat(a):r}));var t},e.prototype.clipTo=function(e){return t(this,(a=this,function(){return a.options.timer.doTask((function(){var t,r;return a.polygons=e.clipPolygons(a.polygons),null!=(t=a.front)&&t.clipTo(e),null!=(r=a.back)?r.clipTo(e):void 0}))}));var a},e}()},890:()=>{THREE.MTLLoader=function(e){THREE.Loader.call(this,e)},THREE.MTLLoader.prototype=Object.assign(Object.create(THREE.Loader.prototype),{constructor:THREE.MTLLoader,load:function(e,t,a,r){var i=this,o=""===this.path?THREE.LoaderUtils.extractUrlBase(e):this.path,n=new THREE.FileLoader(this.manager);n.setPath(this.path),n.load(e,(function(e){t(i.parse(e,o))}),a,r)},setMaterialOptions:function(e){return this.materialOptions=e,this},parse:function(e,t){for(var a=e.split("\n"),r={},i=/\s+/,o={},n=0;n<a.length;n++){var s=a[n];if(0!==(s=s.trim()).length&&"#"!==s.charAt(0)){var l=s.indexOf(" "),u=l>=0?s.substring(0,l):s;u=u.toLowerCase();var d=l>=0?s.substring(l+1):"";if(d=d.trim(),"newmtl"===u)r={name:d},o[d]=r;else if("ka"===u||"kd"===u||"ks"===u||"ke"===u){var h=d.split(i,3);r[u]=[parseFloat(h[0]),parseFloat(h[1]),parseFloat(h[2])]}else r[u]=d}}var c=new THREE.MTLLoader.MaterialCreator(this.resourcePath||t,this.materialOptions);return c.setCrossOrigin(this.crossOrigin),c.setManager(this.manager),c.setMaterials(o),c}}),THREE.MTLLoader.MaterialCreator=function(e,t){this.baseUrl=e||"",this.options=t,this.materialsInfo={},this.materials={},this.materialsArray=[],this.nameLookup={},this.side=this.options&&this.options.side?this.options.side:THREE.FrontSide,this.wrap=this.options&&this.options.wrap?this.options.wrap:THREE.RepeatWrapping},THREE.MTLLoader.MaterialCreator.prototype={constructor:THREE.MTLLoader.MaterialCreator,crossOrigin:"anonymous",setCrossOrigin:function(e){return this.crossOrigin=e,this},setManager:function(e){this.manager=e},setMaterials:function(e){this.materialsInfo=this.convert(e),this.materials={},this.materialsArray=[],this.nameLookup={}},convert:function(e){if(!this.options)return e;var t={};for(var a in e){var r=e[a],i={};for(var o in t[a]=i,r){var n=!0,s=r[o],l=o.toLowerCase();switch(l){case"kd":case"ka":case"ks":this.options&&this.options.normalizeRGB&&(s=[s[0]/255,s[1]/255,s[2]/255]),this.options&&this.options.ignoreZeroRGBs&&0===s[0]&&0===s[1]&&0===s[2]&&(n=!1)}n&&(i[l]=s)}}return t},preload:function(){for(var e in this.materialsInfo)this.create(e)},getIndex:function(e){return this.nameLookup[e]},getAsArray:function(){var e=0;for(var t in this.materialsInfo)this.materialsArray[e]=this.create(t),this.nameLookup[t]=e,e++;return this.materialsArray},create:function(e){return void 0===this.materials[e]&&this.createMaterial_(e),this.materials[e]},createMaterial_:function(e){var t=this,a=this.materialsInfo[e],r={name:e,side:this.side};function i(e,a){if(!r[e]){var i,o,n=t.getTextureParams(a,r),s=t.loadTexture((i=t.baseUrl,"string"!=typeof(o=n.url)||""===o?"":/^https?:\/\//i.test(o)?o:i+o));s.repeat.copy(n.scale),s.offset.copy(n.offset),s.wrapS=t.wrap,s.wrapT=t.wrap,r[e]=s}}for(var o in a){var n,s=a[o];if(""!==s)switch(o.toLowerCase()){case"kd":r.color=(new THREE.Color).fromArray(s);break;case"ks":r.specular=(new THREE.Color).fromArray(s);break;case"ke":r.emissive=(new THREE.Color).fromArray(s);break;case"map_kd":i("map",s);break;case"map_ks":i("specularMap",s);break;case"map_ke":i("emissiveMap",s);break;case"norm":i("normalMap",s);break;case"map_bump":case"bump":i("bumpMap",s);break;case"map_d":i("alphaMap",s),r.transparent=!0;break;case"ns":r.shininess=parseFloat(s);break;case"d":(n=parseFloat(s))<1&&(r.opacity=n,r.transparent=!0);break;case"tr":n=parseFloat(s),this.options&&this.options.invertTrProperty&&(n=1-n),n>0&&(r.opacity=1-n,r.transparent=!0)}}return this.materials[e]=new THREE.MeshPhongMaterial(r),this.materials[e]},getTextureParams:function(e,t){var a,r={scale:new THREE.Vector2(1,1),offset:new THREE.Vector2(0,0)},i=e.split(/\s+/);return(a=i.indexOf("-bm"))>=0&&(t.bumpScale=parseFloat(i[a+1]),i.splice(a,2)),(a=i.indexOf("-s"))>=0&&(r.scale.set(parseFloat(i[a+1]),parseFloat(i[a+2])),i.splice(a,4)),(a=i.indexOf("-o"))>=0&&(r.offset.set(parseFloat(i[a+1]),parseFloat(i[a+2])),i.splice(a,4)),r.url=i.join(" ").trim(),r},loadTexture:function(e,t,a,r,i){var o,n=void 0!==this.manager?this.manager:THREE.DefaultLoadingManager,s=n.getHandler(e);return null===s&&(s=new THREE.TextureLoader(n)),s.setCrossOrigin&&s.setCrossOrigin(this.crossOrigin),o=s.load(e,a,r,i),void 0!==t&&(o.mapping=t),o}}},5:()=>{THREE.OBJLoader=function(){var e=/^[og]\s*(.+)?/,t=/^mtllib /,a=/^usemtl /,r=/^usemap /;function i(){var e={objects:[],object:{},vertices:[],normals:[],colors:[],uvs:[],materialLibraries:[],startObject:function(e,t){if(this.object&&!1===this.object.fromDeclaration)return this.object.name=e,void(this.object.fromDeclaration=!1!==t);var a=this.object&&"function"==typeof this.object.currentMaterial?this.object.currentMaterial():void 0;if(this.object&&"function"==typeof this.object._finalize&&this.object._finalize(!0),this.object={name:e||"",fromDeclaration:!1!==t,geometry:{vertices:[],normals:[],colors:[],uvs:[]},materials:[],smooth:!0,startMaterial:function(e,t){var a=this._finalize(!1);a&&(a.inherited||a.groupCount<=0)&&this.materials.splice(a.index,1);var r={index:this.materials.length,name:e||"",mtllib:Array.isArray(t)&&t.length>0?t[t.length-1]:"",smooth:void 0!==a?a.smooth:this.smooth,groupStart:void 0!==a?a.groupEnd:0,groupEnd:-1,groupCount:-1,inherited:!1,clone:function(e){var t={index:"number"==typeof e?e:this.index,name:this.name,mtllib:this.mtllib,smooth:this.smooth,groupStart:0,groupEnd:-1,groupCount:-1,inherited:!1};return t.clone=this.clone.bind(t),t}};return this.materials.push(r),r},currentMaterial:function(){if(this.materials.length>0)return this.materials[this.materials.length-1]},_finalize:function(e){var t=this.currentMaterial();if(t&&-1===t.groupEnd&&(t.groupEnd=this.geometry.vertices.length/3,t.groupCount=t.groupEnd-t.groupStart,t.inherited=!1),e&&this.materials.length>1)for(var a=this.materials.length-1;a>=0;a--)this.materials[a].groupCount<=0&&this.materials.splice(a,1);return e&&0===this.materials.length&&this.materials.push({name:"",smooth:this.smooth}),t}},a&&a.name&&"function"==typeof a.clone){var r=a.clone(0);r.inherited=!0,this.object.materials.push(r)}this.objects.push(this.object)},finalize:function(){this.object&&"function"==typeof this.object._finalize&&this.object._finalize(!0)},parseVertexIndex:function(e,t){var a=parseInt(e,10);return 3*(a>=0?a-1:a+t/3)},parseNormalIndex:function(e,t){var a=parseInt(e,10);return 3*(a>=0?a-1:a+t/3)},parseUVIndex:function(e,t){var a=parseInt(e,10);return 2*(a>=0?a-1:a+t/2)},addVertex:function(e,t,a){var r=this.vertices,i=this.object.geometry.vertices;i.push(r[e+0],r[e+1],r[e+2]),i.push(r[t+0],r[t+1],r[t+2]),i.push(r[a+0],r[a+1],r[a+2])},addVertexPoint:function(e){var t=this.vertices;this.object.geometry.vertices.push(t[e+0],t[e+1],t[e+2])},addVertexLine:function(e){var t=this.vertices;this.object.geometry.vertices.push(t[e+0],t[e+1],t[e+2])},addNormal:function(e,t,a){var r=this.normals,i=this.object.geometry.normals;i.push(r[e+0],r[e+1],r[e+2]),i.push(r[t+0],r[t+1],r[t+2]),i.push(r[a+0],r[a+1],r[a+2])},addColor:function(e,t,a){var r=this.colors,i=this.object.geometry.colors;i.push(r[e+0],r[e+1],r[e+2]),i.push(r[t+0],r[t+1],r[t+2]),i.push(r[a+0],r[a+1],r[a+2])},addUV:function(e,t,a){var r=this.uvs,i=this.object.geometry.uvs;i.push(r[e+0],r[e+1]),i.push(r[t+0],r[t+1]),i.push(r[a+0],r[a+1])},addUVLine:function(e){var t=this.uvs;this.object.geometry.uvs.push(t[e+0],t[e+1])},addFace:function(e,t,a,r,i,o,n,s,l){var u=this.vertices.length,d=this.parseVertexIndex(e,u),h=this.parseVertexIndex(t,u),c=this.parseVertexIndex(a,u);if(this.addVertex(d,h,c),this.colors.length>0&&this.addColor(d,h,c),void 0!==r&&""!==r){var p=this.uvs.length;d=this.parseUVIndex(r,p),h=this.parseUVIndex(i,p),c=this.parseUVIndex(o,p),this.addUV(d,h,c)}if(void 0!==n&&""!==n){var f=this.normals.length;d=this.parseNormalIndex(n,f),h=n===s?d:this.parseNormalIndex(s,f),c=n===l?d:this.parseNormalIndex(l,f),this.addNormal(d,h,c)}},addPointGeometry:function(e){this.object.geometry.type="Points";for(var t=this.vertices.length,a=0,r=e.length;a<r;a++)this.addVertexPoint(this.parseVertexIndex(e[a],t))},addLineGeometry:function(e,t){this.object.geometry.type="Line";for(var a=this.vertices.length,r=this.uvs.length,i=0,o=e.length;i<o;i++)this.addVertexLine(this.parseVertexIndex(e[i],a));var n=0;for(o=t.length;n<o;n++)this.addUVLine(this.parseUVIndex(t[n],r))}};return e.startObject("",!1),e}function o(e){THREE.Loader.call(this,e),this.materials=null}return o.prototype=Object.assign(Object.create(THREE.Loader.prototype),{constructor:o,load:function(e,t,a,r){var i=this,o=new THREE.FileLoader(i.manager);o.setPath(this.path),o.load(e,(function(e){t(i.parse(e))}),a,r)},setMaterials:function(e){return this.materials=e,this},parse:function(o){console.time("OBJLoader");var n=new i;-1!==o.indexOf("\r\n")&&(o=o.replace(/\r\n/g,"\n")),-1!==o.indexOf("\\\n")&&(o=o.replace(/\\\n/g,""));for(var s=o.split("\n"),l="",u="",d=[],h="function"==typeof"".trimLeft,c=0,p=s.length;c<p;c++)if(l=s[c],0!==(l=h?l.trimLeft():l.trim()).length&&"#"!==(u=l.charAt(0)))if("v"===u){var f=l.split(/\s+/);switch(f[0]){case"v":n.vertices.push(parseFloat(f[1]),parseFloat(f[2]),parseFloat(f[3])),f.length>=7&&n.colors.push(parseFloat(f[4]),parseFloat(f[5]),parseFloat(f[6]));break;case"vn":n.normals.push(parseFloat(f[1]),parseFloat(f[2]),parseFloat(f[3]));break;case"vt":n.uvs.push(parseFloat(f[1]),parseFloat(f[2]))}}else if("f"===u){for(var m=l.substr(1).trim().split(/\s+/),E=[],T=0,v=m.length;T<v;T++){var x=m[T];if(x.length>0){var g=x.split("/");E.push(g)}}var y=E[0];for(T=1,v=E.length-1;T<v;T++){var A=E[T],R=E[T+1];n.addFace(y[0],A[0],R[0],y[1],A[1],R[1],y[2],A[2],R[2])}}else if("l"===u){var b=l.substring(1).trim().split(" "),w=[],P=[];if(-1===l.indexOf("/"))w=b;else for(var _=0,F=b.length;_<F;_++){var S=b[_].split("/");""!==S[0]&&w.push(S[0]),""!==S[1]&&P.push(S[1])}n.addLineGeometry(w,P)}else if("p"===u){var H=l.substr(1).trim().split(" ");n.addPointGeometry(H)}else if(null!==(d=e.exec(l))){var M=(" "+d[0].substr(1).trim()).substr(1);n.startObject(M)}else if(a.test(l))n.object.startMaterial(l.substring(7).trim(),n.materialLibraries);else if(t.test(l))n.materialLibraries.push(l.substring(7).trim());else if(r.test(l))console.warn('THREE.OBJLoader: Rendering identifier "usemap" not supported. Textures must be defined in MTL files.');else{if("s"!==u){if("\0"===l)continue;throw new Error('THREE.OBJLoader: Unexpected line: "'+l+'"')}if((d=l.split(" ")).length>1){var L=d[1].trim().toLowerCase();n.object.smooth="0"!==L&&"off"!==L}else n.object.smooth=!0;(z=n.object.currentMaterial())&&(z.smooth=n.object.smooth)}n.finalize();var O=new THREE.Group;for(O.materialLibraries=[].concat(n.materialLibraries),c=0,p=n.objects.length;c<p;c++){var I=n.objects[c],N=I.geometry,C=I.materials,X="Line"===N.type,U="Points"===N.type,j=!1;if(0!==N.vertices.length){var k=new THREE.BufferGeometry;k.setAttribute("position",new THREE.Float32BufferAttribute(N.vertices,3)),N.normals.length>0?k.setAttribute("normal",new THREE.Float32BufferAttribute(N.normals,3)):k.computeVertexNormals(),N.colors.length>0&&(j=!0,k.setAttribute("color",new THREE.Float32BufferAttribute(N.colors,3))),N.uvs.length>0&&k.setAttribute("uv",new THREE.Float32BufferAttribute(N.uvs,2));for(var Y,D=[],Q=0,B=C.length;Q<B;Q++){var V=C[Q],z=void 0;if(null!==this.materials)if(z=this.materials.create(V.name),!X||!z||z instanceof THREE.LineBasicMaterial){if(U&&z&&!(z instanceof THREE.PointsMaterial)){var G=new THREE.PointsMaterial({size:10,sizeAttenuation:!1});THREE.Material.prototype.copy.call(G,z),G.color.copy(z.color),G.map=z.map,z=G}}else{var W=new THREE.LineBasicMaterial;THREE.Material.prototype.copy.call(W,z),W.color.copy(z.color),z=W}z||((z=X?new THREE.LineBasicMaterial:U?new THREE.PointsMaterial({size:1,sizeAttenuation:!1}):new THREE.MeshPhongMaterial).name=V.name),z.flatShading=!V.smooth,z.vertexColors=j?THREE.VertexColors:THREE.NoColors,D.push(z)}if(D.length>1){for(Q=0,B=C.length;Q<B;Q++)V=C[Q],k.addGroup(V.groupStart,V.groupCount,Q);Y=X?new THREE.LineSegments(k,D):U?new THREE.Points(k,D):new THREE.Mesh(k,D)}else Y=X?new THREE.LineSegments(k,D[0]):U?new THREE.Points(k,D[0]):new THREE.Mesh(k,D[0]);Y.name=I.name,O.add(Y)}}return console.timeEnd("OBJLoader"),O}}),o}()},29:()=>{THREE.STLLoader=function(e){THREE.Loader.call(this,e)},THREE.STLLoader.prototype=Object.assign(Object.create(THREE.Loader.prototype),{constructor:THREE.STLLoader,load:function(e,t,a,r){var i=this,o=new THREE.FileLoader(i.manager);o.setPath(i.path),o.setResponseType("arraybuffer"),o.load(e,(function(e){try{t(i.parse(e))}catch(e){r&&r(e)}}),a,r)},parse:function(e){function t(e,t,a){for(var r=0,i=e.length;r<i;r++)if(e[r]!==t.getUint8(a+r,!1))return!1;return!0}var a,r=function(e){if("string"==typeof e){for(var t=new Uint8Array(e.length),a=0;a<e.length;a++)t[a]=255&e.charCodeAt(a);return t.buffer||t}return e}(e);return function(e){var a;if(84+50*(a=new DataView(e)).getUint32(80,!0)===a.byteLength)return!0;for(var r=[115,111,108,105,100],i=0;i<5;i++)if(t(r,a,i))return!1;return!0}(r)?function(e){for(var t,a,r,i,o,n,s,l,u=new DataView(e),d=u.getUint32(80,!0),h=!1,c=0;c<70;c++)1129270351==u.getUint32(c,!1)&&82==u.getUint8(c+4)&&61==u.getUint8(c+5)&&(h=!0,i=new Float32Array(3*d*3),o=u.getUint8(c+6)/255,n=u.getUint8(c+7)/255,s=u.getUint8(c+8)/255,l=u.getUint8(c+9)/255);for(var p=new THREE.BufferGeometry,f=new Float32Array(3*d*3),m=new Float32Array(3*d*3),E=0;E<d;E++){var T=84+50*E,v=u.getFloat32(T,!0),x=u.getFloat32(T+4,!0),g=u.getFloat32(T+8,!0);if(h){var y=u.getUint16(T+48,!0);0==(32768&y)?(t=(31&y)/31,a=(y>>5&31)/31,r=(y>>10&31)/31):(t=o,a=n,r=s)}for(var A=1;A<=3;A++){var R=T+12*A,b=3*E*3+3*(A-1);f[b]=u.getFloat32(R,!0),f[b+1]=u.getFloat32(R+4,!0),f[b+2]=u.getFloat32(R+8,!0),m[b]=v,m[b+1]=x,m[b+2]=g,h&&(i[b]=t,i[b+1]=a,i[b+2]=r)}}return p.setAttribute("position",new THREE.BufferAttribute(f,3)),p.setAttribute("normal",new THREE.BufferAttribute(m,3)),h&&(p.setAttribute("color",new THREE.BufferAttribute(i,3)),p.hasColors=!0,p.alpha=l),p}(r):function(e){for(var t,a=new THREE.BufferGeometry,r=/solid([\s\S]*?)endsolid/g,i=/facet([\s\S]*?)endfacet/g,o=0,n=/[\s]+([+-]?(?:\d*)(?:\.\d*)?(?:[eE][+-]?\d+)?)/.source,s=new RegExp("vertex"+n+n+n,"g"),l=new RegExp("normal"+n+n+n,"g"),u=[],d=[],h=new THREE.Vector3,c=[],p=0,f=0,m=0;null!==(t=r.exec(e));){f=m;for(var E=t[0];null!==(t=i.exec(E));){for(var T=0,v=0,x=t[0];null!==(t=l.exec(x));)h.x=parseFloat(t[1]),h.y=parseFloat(t[2]),h.z=parseFloat(t[3]),v++;for(;null!==(t=s.exec(x));)u.push(parseFloat(t[1]),parseFloat(t[2]),parseFloat(t[3])),d.push(h.x,h.y,h.z),T++,m++;1!==v&&console.error("THREE.STLLoader: Something isn't right with the normal of face number "+o),3!==T&&console.error("THREE.STLLoader: Something isn't right with the vertices of face number "+o),o++}c.push({startVertex:f,endVertex:m}),p++}if(a.setAttribute("position",new THREE.Float32BufferAttribute(u,3)),a.setAttribute("normal",new THREE.Float32BufferAttribute(d,3)),p>0)for(var g=0;g<c.length;g++)a.addGroup(c[g].startVertex,c[g].endVertex,g);return a}("string"!=typeof(a=e)?THREE.LoaderUtils.decodeText(new Uint8Array(a)):a)}})},219:()=>{THREE.Reflector=function(e,t){THREE.Mesh.call(this,e),this.type="Reflector";var a=this,r=void 0!==(t=t||{}).color?new THREE.Color(t.color):new THREE.Color(8355711),i=t.textureWidth||512,o=t.textureHeight||512,n=t.clipBias||0,s=t.shader||THREE.Reflector.ReflectorShader,l=void 0!==t.recursion?t.recursion:0,u=new THREE.Plane,d=new THREE.Vector3,h=new THREE.Vector3,c=new THREE.Vector3,p=new THREE.Matrix4,f=new THREE.Vector3(0,0,-1),m=new THREE.Vector4,E=new THREE.Vector3,T=new THREE.Vector3,v=new THREE.Vector4,x=new THREE.Matrix4,g=new THREE.PerspectiveCamera,y={minFilter:THREE.LinearFilter,magFilter:THREE.LinearFilter,format:THREE.RGBFormat,stencilBuffer:!1},A=new THREE.WebGLRenderTarget(i,o,y);THREE.Math.isPowerOfTwo(i)&&THREE.Math.isPowerOfTwo(o)||(A.texture.generateMipmaps=!1);var R=new THREE.ShaderMaterial({uniforms:THREE.UniformsUtils.clone(s.uniforms),fragmentShader:s.fragmentShader,vertexShader:s.vertexShader});R.uniforms.tDiffuse.value=A.texture,R.uniforms.color.value=r,R.uniforms.textureMatrix.value=x,this.material=R,this.onBeforeRender=function(e,t,r){if("recursion"in r.userData){if(r.userData.recursion===l)return;r.userData.recursion++}if(h.setFromMatrixPosition(a.matrixWorld),c.setFromMatrixPosition(r.matrixWorld),p.extractRotation(a.matrixWorld),d.set(0,0,1),d.applyMatrix4(p),E.subVectors(h,c),!(E.dot(d)>0)){E.reflect(d).negate(),E.add(h),p.extractRotation(r.matrixWorld),f.set(0,0,-1),f.applyMatrix4(p),f.add(c),T.subVectors(h,f),T.reflect(d).negate(),T.add(h),g.position.copy(E),g.up.set(0,1,0),g.up.applyMatrix4(p),g.up.reflect(d),g.lookAt(T),g.far=r.far,g.updateMatrixWorld(),g.projectionMatrix.copy(r.projectionMatrix),g.userData.recursion=0,x.set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),x.multiply(g.projectionMatrix),x.multiply(g.matrixWorldInverse),x.multiply(a.matrixWorld),u.setFromNormalAndCoplanarPoint(d,h),u.applyMatrix4(g.matrixWorldInverse),m.set(u.normal.x,u.normal.y,u.normal.z,u.constant);var i=g.projectionMatrix;v.x=(Math.sign(m.x)+i.elements[8])/i.elements[0],v.y=(Math.sign(m.y)+i.elements[9])/i.elements[5],v.z=-1,v.w=(1+i.elements[10])/i.elements[14],m.multiplyScalar(2/m.dot(v)),i.elements[2]=m.x,i.elements[6]=m.y,i.elements[10]=m.z+1-n,i.elements[14]=m.w,a.visible=!1;var o=e.getRenderTarget(),s=e.vr.enabled,y=e.shadowMap.autoUpdate;e.vr.enabled=!1,e.shadowMap.autoUpdate=!1,e.setRenderTarget(A),e.clear(),e.render(t,g),e.vr.enabled=s,e.shadowMap.autoUpdate=y,e.setRenderTarget(o);var R=r.viewport;void 0!==R&&e.state.viewport(R),a.visible=!0}},this.getRenderTarget=function(){return A}},THREE.Reflector.prototype=Object.create(THREE.Mesh.prototype),THREE.Reflector.prototype.constructor=THREE.Reflector,THREE.Reflector.ReflectorShader={uniforms:{color:{value:null},tDiffuse:{value:null},textureMatrix:{value:null}},vertexShader:["uniform mat4 textureMatrix;","varying vec4 vUv;","void main() {","\tvUv = textureMatrix * vec4( position, 1.0 );","\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );","}"].join("\n"),fragmentShader:["uniform vec3 color;","uniform sampler2D tDiffuse;","varying vec4 vUv;","float blendOverlay( float base, float blend ) {","\treturn( base < 0.5 ? ( 2.0 * base * blend ) : ( 1.0 - 2.0 * ( 1.0 - base ) * ( 1.0 - blend ) ) );","}","vec3 blendOverlay( vec3 base, vec3 blend ) {","\treturn vec3( blendOverlay( base.r, blend.r ), blendOverlay( base.g, blend.g ), blendOverlay( base.b, blend.b ) );","}","void main() {","\tvec4 base = texture2DProj( tDiffuse, vUv );","\tgl_FragColor = vec4( blendOverlay( base.rgb, color ), 1.0 );","}"].join("\n")}},921:()=>{THREE.Refractor=function(e,t){THREE.Mesh.call(this,e),this.type="Refractor";var a=this,r=void 0!==(t=t||{}).color?new THREE.Color(t.color):new THREE.Color(8355711),i=t.textureWidth||512,o=t.textureHeight||512,n=t.clipBias||0,s=t.shader||THREE.Refractor.RefractorShader,l=new THREE.PerspectiveCamera;l.matrixAutoUpdate=!1,l.userData.refractor=!0;var u=new THREE.Plane,d=new THREE.Matrix4,h={minFilter:THREE.LinearFilter,magFilter:THREE.LinearFilter,format:THREE.RGBFormat,stencilBuffer:!1},c=new THREE.WebGLRenderTarget(i,o,h);THREE.Math.isPowerOfTwo(i)&&THREE.Math.isPowerOfTwo(o)||(c.texture.generateMipmaps=!1),this.material=new THREE.ShaderMaterial({uniforms:THREE.UniformsUtils.clone(s.uniforms),vertexShader:s.vertexShader,fragmentShader:s.fragmentShader,transparent:!0}),this.material.uniforms.color.value=r,this.material.uniforms.tDiffuse.value=c.texture,this.material.uniforms.textureMatrix.value=d;var p,f,m,E,T,v,x,g,y=(p=new THREE.Vector3,f=new THREE.Vector3,m=new THREE.Matrix4,E=new THREE.Vector3,T=new THREE.Vector3,function(e){return p.setFromMatrixPosition(a.matrixWorld),f.setFromMatrixPosition(e.matrixWorld),E.subVectors(p,f),m.extractRotation(a.matrixWorld),T.set(0,0,1),T.applyMatrix4(m),E.dot(T)<0}),A=function(){var e=new THREE.Vector3,t=new THREE.Vector3,r=new THREE.Quaternion,i=new THREE.Vector3;return function(){a.matrixWorld.decompose(t,r,i),e.set(0,0,1).applyQuaternion(r).normalize(),e.negate(),u.setFromNormalAndCoplanarPoint(e,t)}}(),R=(v=new THREE.Plane,x=new THREE.Vector4,g=new THREE.Vector4,function(e){l.matrixWorld.copy(e.matrixWorld),l.matrixWorldInverse.getInverse(l.matrixWorld),l.projectionMatrix.copy(e.projectionMatrix),l.far=e.far,v.copy(u),v.applyMatrix4(l.matrixWorldInverse),x.set(v.normal.x,v.normal.y,v.normal.z,v.constant);var t=l.projectionMatrix;g.x=(Math.sign(x.x)+t.elements[8])/t.elements[0],g.y=(Math.sign(x.y)+t.elements[9])/t.elements[5],g.z=-1,g.w=(1+t.elements[10])/t.elements[14],x.multiplyScalar(2/x.dot(g)),t.elements[2]=x.x,t.elements[6]=x.y,t.elements[10]=x.z+1-n,t.elements[14]=x.w});this.onBeforeRender=function(e,t,r){!0!==r.userData.refractor&&1!=!y(r)&&(A(),function(e){d.set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),d.multiply(e.projectionMatrix),d.multiply(e.matrixWorldInverse),d.multiply(a.matrixWorld)}(r),R(r),function(e,t,r){a.visible=!1;var i=e.getRenderTarget(),o=e.vr.enabled,n=e.shadowMap.autoUpdate;e.vr.enabled=!1,e.shadowMap.autoUpdate=!1,e.setRenderTarget(c),e.clear(),e.render(t,l),e.vr.enabled=o,e.shadowMap.autoUpdate=n,e.setRenderTarget(i);var s=r.viewport;void 0!==s&&e.state.viewport(s),a.visible=!0}(e,t,r))},this.getRenderTarget=function(){return c}},THREE.Refractor.prototype=Object.create(THREE.Mesh.prototype),THREE.Refractor.prototype.constructor=THREE.Refractor,THREE.Refractor.RefractorShader={uniforms:{color:{value:null},tDiffuse:{value:null},textureMatrix:{value:null}},vertexShader:["uniform mat4 textureMatrix;","varying vec4 vUv;","void main() {","\tvUv = textureMatrix * vec4( position, 1.0 );","\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );","}"].join("\n"),fragmentShader:["uniform vec3 color;","uniform sampler2D tDiffuse;","varying vec4 vUv;","float blendOverlay( float base, float blend ) {","\treturn( base < 0.5 ? ( 2.0 * base * blend ) : ( 1.0 - 2.0 * ( 1.0 - base ) * ( 1.0 - blend ) ) );","}","vec3 blendOverlay( vec3 base, vec3 blend ) {","\treturn vec3( blendOverlay( base.r, blend.r ), blendOverlay( base.g, blend.g ), blendOverlay( base.b, blend.b ) );","}","void main() {","\tvec4 base = texture2DProj( tDiffuse, vUv );","\tgl_FragColor = vec4( blendOverlay( base.rgb, color ), 1.0 );","}"].join("\n")}},62:()=>{THREE.Water=function(e,t){THREE.Mesh.call(this,e),this.type="Water";var a=this,r=void 0!==(t=t||{}).color?new THREE.Color(t.color):new THREE.Color(16777215),i=t.textureWidth||512,o=t.textureHeight||512,n=t.clipBias||0,s=t.flowDirection||new THREE.Vector2(1,0),l=t.flowSpeed||.03,u=t.reflectivity||.02,d=t.scale||1,h=t.shader||THREE.Water.WaterShader,c=new THREE.TextureLoader,p=t.flowMap||void 0,f=t.normalMap0||c.load("textures/water/Water_1_M_Normal.jpg"),m=t.normalMap1||c.load("textures/water/Water_2_M_Normal.jpg"),E=.15,T=.075,v=new THREE.Matrix4,x=new THREE.Clock;if(void 0!==THREE.Reflector)if(void 0!==THREE.Refractor){var g=new THREE.Reflector(e,{textureWidth:i,textureHeight:o,clipBias:n}),y=new THREE.Refractor(e,{textureWidth:i,textureHeight:o,clipBias:n});g.matrixAutoUpdate=!1,y.matrixAutoUpdate=!1,this.material=new THREE.ShaderMaterial({uniforms:THREE.UniformsUtils.merge([THREE.UniformsLib.fog,h.uniforms]),vertexShader:h.vertexShader,fragmentShader:h.fragmentShader,transparent:!0,fog:!0}),void 0!==p?(this.material.defines.USE_FLOWMAP="",this.material.uniforms.tFlowMap={type:"t",value:p}):this.material.uniforms.flowDirection={type:"v2",value:s},f.wrapS=f.wrapT=THREE.RepeatWrapping,m.wrapS=m.wrapT=THREE.RepeatWrapping,this.material.uniforms.tReflectionMap.value=g.getRenderTarget().texture,this.material.uniforms.tRefractionMap.value=y.getRenderTarget().texture,this.material.uniforms.tNormalMap0.value=f,this.material.uniforms.tNormalMap1.value=m,this.material.uniforms.color.value=r,this.material.uniforms.reflectivity.value=u,this.material.uniforms.textureMatrix.value=v,this.material.uniforms.config.value.x=0,this.material.uniforms.config.value.y=T,this.material.uniforms.config.value.z=T,this.material.uniforms.config.value.w=d,this.onBeforeRender=function(e,t,r){var i,o;!function(e){v.set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),v.multiply(e.projectionMatrix),v.multiply(e.matrixWorldInverse),v.multiply(a.matrixWorld)}(r),i=x.getDelta(),(o=a.material.uniforms.config).value.x+=l*i,o.value.y=o.value.x+T,o.value.x>=E?(o.value.x=0,o.value.y=T):o.value.y>=E&&(o.value.y=o.value.y-E),a.visible=!1,g.matrixWorld.copy(a.matrixWorld),y.matrixWorld.copy(a.matrixWorld),g.onBeforeRender(e,t,r),y.onBeforeRender(e,t,r),a.visible=!0}}else console.error("THREE.Water: Required component THREE.Refractor not found.");else console.error("THREE.Water: Required component THREE.Reflector not found.")},THREE.Water.prototype=Object.create(THREE.Mesh.prototype),THREE.Water.prototype.constructor=THREE.Water,THREE.Water.WaterShader={uniforms:{color:{type:"c",value:null},reflectivity:{type:"f",value:0},tReflectionMap:{type:"t",value:null},tRefractionMap:{type:"t",value:null},tNormalMap0:{type:"t",value:null},tNormalMap1:{type:"t",value:null},textureMatrix:{type:"m4",value:null},config:{type:"v4",value:new THREE.Vector4}},vertexShader:["#include <fog_pars_vertex>","#include <logdepthbuf_pars_vertex>","uniform mat4 textureMatrix;","varying vec4 vCoord;","varying vec2 vUv;","varying vec3 vToEye;","void main() {","\tvUv = uv;","\tvCoord = textureMatrix * vec4( position, 1.0 );","\tvec4 worldPosition = modelMatrix * vec4( position, 1.0 );","\tvToEye = cameraPosition - worldPosition.xyz;","\tvec4 mvPosition =  viewMatrix * worldPosition;","\tgl_Position = projectionMatrix * mvPosition;","\t#include <logdepthbuf_vertex>","\t#include <fog_vertex>","}"].join("\n"),fragmentShader:["#include <common>","#include <fog_pars_fragment>","#include <logdepthbuf_pars_fragment>","uniform sampler2D tReflectionMap;","uniform sampler2D tRefractionMap;","uniform sampler2D tNormalMap0;","uniform sampler2D tNormalMap1;","#ifdef USE_FLOWMAP","\tuniform sampler2D tFlowMap;","#else","\tuniform vec2 flowDirection;","#endif","uniform vec3 color;","uniform float reflectivity;","uniform vec4 config;","varying vec4 vCoord;","varying vec2 vUv;","varying vec3 vToEye;","void main() {","\t#include <logdepthbuf_fragment>","\tfloat flowMapOffset0 = config.x;","\tfloat flowMapOffset1 = config.y;","\tfloat halfCycle = config.z;","\tfloat scale = config.w;","\tvec3 toEye = normalize( vToEye );","\tvec2 flow;","\t#ifdef USE_FLOWMAP","\t\tflow = texture2D( tFlowMap, vUv ).rg * 2.0 - 1.0;","\t#else","\t\tflow = flowDirection;","\t#endif","\tflow.x *= - 1.0;","\tvec4 normalColor0 = texture2D( tNormalMap0, ( vUv * scale ) + flow * flowMapOffset0 );","\tvec4 normalColor1 = texture2D( tNormalMap1, ( vUv * scale ) + flow * flowMapOffset1 );","\tfloat flowLerp = abs( halfCycle - flowMapOffset0 ) / halfCycle;","\tvec4 normalColor = mix( normalColor0, normalColor1, flowLerp );","\tvec3 normal = normalize( vec3( normalColor.r * 2.0 - 1.0, normalColor.b,  normalColor.g * 2.0 - 1.0 ) );","\tfloat theta = max( dot( toEye, normal ), 0.0 );","\tfloat reflectance = reflectivity + ( 1.0 - reflectivity ) * pow( ( 1.0 - theta ), 5.0 );","\tvec3 coord = vCoord.xyz / vCoord.w;","\tvec2 uv = coord.xy + coord.z * normal.xz * 0.05;","\tvec4 reflectColor = texture2D( tReflectionMap, vec2( 1.0 - uv.x, uv.y ) );","\tvec4 refractColor = texture2D( tRefractionMap, uv );","\tgl_FragColor = vec4( color, 1.0 ) * mix( refractColor, reflectColor, reflectance );","\t#include <tonemapping_fragment>","\t#include <encodings_fragment>","\t#include <fog_fragment>","}"].join("\n")}},983:()=>{THREE.BloomPass=function(e,t,a,r){THREE.Pass.call(this),e=void 0!==e?e:1,t=void 0!==t?t:25,a=void 0!==a?a:4,r=void 0!==r?r:256;var i={minFilter:THREE.LinearFilter,magFilter:THREE.LinearFilter,format:THREE.RGBAFormat};this.renderTargetX=new THREE.WebGLRenderTarget(r,r,i),this.renderTargetX.texture.name="BloomPass.x",this.renderTargetY=new THREE.WebGLRenderTarget(r,r,i),this.renderTargetY.texture.name="BloomPass.y",void 0===THREE.CopyShader&&console.error("THREE.BloomPass relies on THREE.CopyShader");var o=THREE.CopyShader;this.copyUniforms=THREE.UniformsUtils.clone(o.uniforms),this.copyUniforms.opacity.value=e,this.materialCopy=new THREE.ShaderMaterial({uniforms:this.copyUniforms,vertexShader:o.vertexShader,fragmentShader:o.fragmentShader,blending:THREE.AdditiveBlending,transparent:!0}),void 0===THREE.ConvolutionShader&&console.error("THREE.BloomPass relies on THREE.ConvolutionShader");var n=THREE.ConvolutionShader;this.convolutionUniforms=THREE.UniformsUtils.clone(n.uniforms),this.convolutionUniforms.uImageIncrement.value=THREE.BloomPass.blurX,this.convolutionUniforms.cKernel.value=THREE.ConvolutionShader.buildKernel(a),this.materialConvolution=new THREE.ShaderMaterial({uniforms:this.convolutionUniforms,vertexShader:n.vertexShader,fragmentShader:n.fragmentShader,defines:{KERNEL_SIZE_FLOAT:t.toFixed(1),KERNEL_SIZE_INT:t.toFixed(0)}}),this.needsSwap=!1,this.fsQuad=new THREE.Pass.FullScreenQuad(null)},THREE.BloomPass.prototype=Object.assign(Object.create(THREE.Pass.prototype),{constructor:THREE.BloomPass,render:function(e,t,a,r,i){i&&e.state.buffers.stencil.setTest(!1),this.fsQuad.material=this.materialConvolution,this.convolutionUniforms.tDiffuse.value=a.texture,this.convolutionUniforms.uImageIncrement.value=THREE.BloomPass.blurX,e.setRenderTarget(this.renderTargetX),e.clear(),this.fsQuad.render(e),this.convolutionUniforms.tDiffuse.value=this.renderTargetX.texture,this.convolutionUniforms.uImageIncrement.value=THREE.BloomPass.blurY,e.setRenderTarget(this.renderTargetY),e.clear(),this.fsQuad.render(e),this.fsQuad.material=this.materialCopy,this.copyUniforms.tDiffuse.value=this.renderTargetY.texture,i&&e.state.buffers.stencil.setTest(!0),e.setRenderTarget(a),this.clear&&e.clear(),this.fsQuad.render(e)}}),THREE.BloomPass.blurX=new THREE.Vector2(.001953125,0),THREE.BloomPass.blurY=new THREE.Vector2(0,.001953125)},787:()=>{var e,t,a;THREE.EffectComposer=function(e,t){if(this.renderer=e,void 0===t){var a={minFilter:THREE.LinearFilter,magFilter:THREE.LinearFilter,format:THREE.RGBAFormat,stencilBuffer:!1},r=e.getSize(new THREE.Vector2);this._pixelRatio=e.getPixelRatio(),this._width=r.width,this._height=r.height,(t=new THREE.WebGLRenderTarget(this._width*this._pixelRatio,this._height*this._pixelRatio,a)).texture.name="EffectComposer.rt1"}else this._pixelRatio=1,this._width=t.width,this._height=t.height;this.renderTarget1=t,this.renderTarget2=t.clone(),this.renderTarget2.texture.name="EffectComposer.rt2",this.writeBuffer=this.renderTarget1,this.readBuffer=this.renderTarget2,this.renderToScreen=!0,this.passes=[],void 0===THREE.CopyShader&&console.error("THREE.EffectComposer relies on THREE.CopyShader"),void 0===THREE.ShaderPass&&console.error("THREE.EffectComposer relies on THREE.ShaderPass"),this.copyPass=new THREE.ShaderPass(THREE.CopyShader),this.clock=new THREE.Clock},Object.assign(THREE.EffectComposer.prototype,{swapBuffers:function(){var e=this.readBuffer;this.readBuffer=this.writeBuffer,this.writeBuffer=e},addPass:function(e){this.passes.push(e),e.setSize(this._width*this._pixelRatio,this._height*this._pixelRatio)},insertPass:function(e,t){this.passes.splice(t,0,e)},isLastEnabledPass:function(e){for(var t=e+1;t<this.passes.length;t++)if(this.passes[t].enabled)return!1;return!0},render:function(e){void 0===e&&(e=this.clock.getDelta());var t,a,r=this.renderer.getRenderTarget(),i=!1,o=this.passes.length;for(a=0;a<o;a++)if(!1!==(t=this.passes[a]).enabled){if(t.renderToScreen=this.renderToScreen&&this.isLastEnabledPass(a),t.render(this.renderer,this.writeBuffer,this.readBuffer,e,i),t.needsSwap){if(i){var n=this.renderer.getContext(),s=this.renderer.state.buffers.stencil;s.setFunc(n.NOTEQUAL,1,4294967295),this.copyPass.render(this.renderer,this.writeBuffer,this.readBuffer,e),s.setFunc(n.EQUAL,1,4294967295)}this.swapBuffers()}void 0!==THREE.MaskPass&&(t instanceof THREE.MaskPass?i=!0:t instanceof THREE.ClearMaskPass&&(i=!1))}this.renderer.setRenderTarget(r)},reset:function(e){if(void 0===e){var t=this.renderer.getSize(new THREE.Vector2);this._pixelRatio=this.renderer.getPixelRatio(),this._width=t.width,this._height=t.height,(e=this.renderTarget1.clone()).setSize(this._width*this._pixelRatio,this._height*this._pixelRatio)}this.renderTarget1.dispose(),this.renderTarget2.dispose(),this.renderTarget1=e,this.renderTarget2=e.clone(),this.writeBuffer=this.renderTarget1,this.readBuffer=this.renderTarget2},setSize:function(e,t){this._width=e,this._height=t;var a=this._width*this._pixelRatio,r=this._height*this._pixelRatio;this.renderTarget1.setSize(a,r),this.renderTarget2.setSize(a,r);for(var i=0;i<this.passes.length;i++)this.passes[i].setSize(a,r)},setPixelRatio:function(e){this._pixelRatio=e,this.setSize(this._width,this._height)}}),THREE.Pass=function(){this.enabled=!0,this.needsSwap=!0,this.clear=!1,this.renderToScreen=!1},Object.assign(THREE.Pass.prototype,{setSize:function(){},render:function(){console.error("THREE.Pass: .render() must be implemented in derived pass.")}}),THREE.Pass.FullScreenQuad=(e=new THREE.OrthographicCamera(-1,1,1,-1,0,1),t=new THREE.PlaneBufferGeometry(2,2),a=function(e){this._mesh=new THREE.Mesh(t,e)},Object.defineProperty(a.prototype,"material",{get:function(){return this._mesh.material},set:function(e){this._mesh.material=e}}),Object.assign(a.prototype,{render:function(t){t.render(this._mesh,e)}}),a)},443:()=>{THREE.OutlinePass=function(e,t,a,r){this.renderScene=t,this.renderCamera=a,this.selectedObjects=void 0!==r?r:[],this.visibleEdgeColor=new THREE.Color(1,1,1),this.hiddenEdgeColor=new THREE.Color(.1,.04,.02),this.edgeGlow=0,this.usePatternTexture=!1,this.edgeThickness=1,this.edgeStrength=3,this.downSampleRatio=2,this.pulsePeriod=0,THREE.Pass.call(this),this.resolution=void 0!==e?new THREE.Vector2(e.x,e.y):new THREE.Vector2(256,256);var i={minFilter:THREE.LinearFilter,magFilter:THREE.LinearFilter,format:THREE.RGBAFormat},o=Math.round(this.resolution.x/this.downSampleRatio),n=Math.round(this.resolution.y/this.downSampleRatio);this.maskBufferMaterial=new THREE.MeshBasicMaterial({color:16777215}),this.maskBufferMaterial.side=THREE.DoubleSide,this.renderTargetMaskBuffer=new THREE.WebGLRenderTarget(this.resolution.x,this.resolution.y,i),this.renderTargetMaskBuffer.texture.name="OutlinePass.mask",this.renderTargetMaskBuffer.texture.generateMipmaps=!1,this.depthMaterial=new THREE.MeshDepthMaterial,this.depthMaterial.side=THREE.DoubleSide,this.depthMaterial.depthPacking=THREE.RGBADepthPacking,this.depthMaterial.blending=THREE.NoBlending,this.prepareMaskMaterial=this.getPrepareMaskMaterial(),this.prepareMaskMaterial.side=THREE.DoubleSide,this.prepareMaskMaterial.fragmentShader=function(e,t){var a=t.isPerspectiveCamera?"perspective":"orthographic";return e.replace(/DEPTH_TO_VIEW_Z/g,a+"DepthToViewZ")}(this.prepareMaskMaterial.fragmentShader,this.renderCamera),this.renderTargetDepthBuffer=new THREE.WebGLRenderTarget(this.resolution.x,this.resolution.y,i),this.renderTargetDepthBuffer.texture.name="OutlinePass.depth",this.renderTargetDepthBuffer.texture.generateMipmaps=!1,this.renderTargetMaskDownSampleBuffer=new THREE.WebGLRenderTarget(o,n,i),this.renderTargetMaskDownSampleBuffer.texture.name="OutlinePass.depthDownSample",this.renderTargetMaskDownSampleBuffer.texture.generateMipmaps=!1,this.renderTargetBlurBuffer1=new THREE.WebGLRenderTarget(o,n,i),this.renderTargetBlurBuffer1.texture.name="OutlinePass.blur1",this.renderTargetBlurBuffer1.texture.generateMipmaps=!1,this.renderTargetBlurBuffer2=new THREE.WebGLRenderTarget(Math.round(o/2),Math.round(n/2),i),this.renderTargetBlurBuffer2.texture.name="OutlinePass.blur2",this.renderTargetBlurBuffer2.texture.generateMipmaps=!1,this.edgeDetectionMaterial=this.getEdgeDetectionMaterial(),this.renderTargetEdgeBuffer1=new THREE.WebGLRenderTarget(o,n,i),this.renderTargetEdgeBuffer1.texture.name="OutlinePass.edge1",this.renderTargetEdgeBuffer1.texture.generateMipmaps=!1,this.renderTargetEdgeBuffer2=new THREE.WebGLRenderTarget(Math.round(o/2),Math.round(n/2),i),this.renderTargetEdgeBuffer2.texture.name="OutlinePass.edge2",this.renderTargetEdgeBuffer2.texture.generateMipmaps=!1,this.separableBlurMaterial1=this.getSeperableBlurMaterial(4),this.separableBlurMaterial1.uniforms.texSize.value=new THREE.Vector2(o,n),this.separableBlurMaterial1.uniforms.kernelRadius.value=1,this.separableBlurMaterial2=this.getSeperableBlurMaterial(4),this.separableBlurMaterial2.uniforms.texSize.value=new THREE.Vector2(Math.round(o/2),Math.round(n/2)),this.separableBlurMaterial2.uniforms.kernelRadius.value=4,this.overlayMaterial=this.getOverlayMaterial(),void 0===THREE.CopyShader&&console.error("THREE.OutlinePass relies on THREE.CopyShader");var s=THREE.CopyShader;this.copyUniforms=THREE.UniformsUtils.clone(s.uniforms),this.copyUniforms.opacity.value=1,this.materialCopy=new THREE.ShaderMaterial({uniforms:this.copyUniforms,vertexShader:s.vertexShader,fragmentShader:s.fragmentShader,blending:THREE.NoBlending,depthTest:!1,depthWrite:!1,transparent:!0}),this.enabled=!0,this.needsSwap=!1,this.oldClearColor=new THREE.Color,this.oldClearAlpha=1,this.fsQuad=new THREE.Pass.FullScreenQuad(null),this.tempPulseColor1=new THREE.Color,this.tempPulseColor2=new THREE.Color,this.textureMatrix=new THREE.Matrix4},THREE.OutlinePass.prototype=Object.assign(Object.create(THREE.Pass.prototype),{constructor:THREE.OutlinePass,dispose:function(){this.renderTargetMaskBuffer.dispose(),this.renderTargetDepthBuffer.dispose(),this.renderTargetMaskDownSampleBuffer.dispose(),this.renderTargetBlurBuffer1.dispose(),this.renderTargetBlurBuffer2.dispose(),this.renderTargetEdgeBuffer1.dispose(),this.renderTargetEdgeBuffer2.dispose()},setSize:function(e,t){this.renderTargetMaskBuffer.setSize(e,t);var a=Math.round(e/this.downSampleRatio),r=Math.round(t/this.downSampleRatio);this.renderTargetMaskDownSampleBuffer.setSize(a,r),this.renderTargetBlurBuffer1.setSize(a,r),this.renderTargetEdgeBuffer1.setSize(a,r),this.separableBlurMaterial1.uniforms.texSize.value=new THREE.Vector2(a,r),a=Math.round(a/2),r=Math.round(r/2),this.renderTargetBlurBuffer2.setSize(a,r),this.renderTargetEdgeBuffer2.setSize(a,r),this.separableBlurMaterial2.uniforms.texSize.value=new THREE.Vector2(a,r)},changeVisibilityOfSelectedObjects:function(e){function t(t){t.isMesh&&(e?(t.visible=t.userData.oldVisible,delete t.userData.oldVisible):(t.userData.oldVisible=t.visible,t.visible=e))}for(var a=0;a<this.selectedObjects.length;a++)this.selectedObjects[a].traverse(t)},changeVisibilityOfNonSelectedObjects:function(e){var t=[];function a(e){e.isMesh&&t.push(e)}for(var r=0;r<this.selectedObjects.length;r++)this.selectedObjects[r].traverse(a);this.renderScene.traverse((function(a){if(a.isMesh||a.isLine||a.isSprite){for(var r=!1,i=0;i<t.length;i++)if(t[i].id===a.id){r=!0;break}if(!r){var o=a.visible;e&&!a.bVisible||(a.visible=e),a.bVisible=o}}}))},updateTextureMatrix:function(){this.textureMatrix.set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),this.textureMatrix.multiply(this.renderCamera.projectionMatrix),this.textureMatrix.multiply(this.renderCamera.matrixWorldInverse)},render:function(e,t,a,r,i){if(this.selectedObjects.length>0){this.oldClearColor.copy(e.getClearColor()),this.oldClearAlpha=e.getClearAlpha();var o=e.autoClear;e.autoClear=!1,i&&e.state.buffers.stencil.setTest(!1),e.setClearColor(16777215,1),this.changeVisibilityOfSelectedObjects(!1);var n=this.renderScene.background;if(this.renderScene.background=null,this.renderScene.overrideMaterial=this.depthMaterial,e.setRenderTarget(this.renderTargetDepthBuffer),e.clear(),e.render(this.renderScene,this.renderCamera),this.changeVisibilityOfSelectedObjects(!0),this.updateTextureMatrix(),this.changeVisibilityOfNonSelectedObjects(!1),this.renderScene.overrideMaterial=this.prepareMaskMaterial,this.prepareMaskMaterial.uniforms.cameraNearFar.value=new THREE.Vector2(this.renderCamera.near,this.renderCamera.far),this.prepareMaskMaterial.uniforms.depthTexture.value=this.renderTargetDepthBuffer.texture,this.prepareMaskMaterial.uniforms.textureMatrix.value=this.textureMatrix,e.setRenderTarget(this.renderTargetMaskBuffer),e.clear(),e.render(this.renderScene,this.renderCamera),this.renderScene.overrideMaterial=null,this.changeVisibilityOfNonSelectedObjects(!0),this.renderScene.background=n,this.fsQuad.material=this.materialCopy,this.copyUniforms.tDiffuse.value=this.renderTargetMaskBuffer.texture,e.setRenderTarget(this.renderTargetMaskDownSampleBuffer),e.clear(),this.fsQuad.render(e),this.tempPulseColor1.copy(this.visibleEdgeColor),this.tempPulseColor2.copy(this.hiddenEdgeColor),this.pulsePeriod>0){var s=.625+.75*Math.cos(.01*performance.now()/this.pulsePeriod)/2;this.tempPulseColor1.multiplyScalar(s),this.tempPulseColor2.multiplyScalar(s)}this.fsQuad.material=this.edgeDetectionMaterial,this.edgeDetectionMaterial.uniforms.maskTexture.value=this.renderTargetMaskDownSampleBuffer.texture,this.edgeDetectionMaterial.uniforms.texSize.value=new THREE.Vector2(this.renderTargetMaskDownSampleBuffer.width,this.renderTargetMaskDownSampleBuffer.height),this.edgeDetectionMaterial.uniforms.visibleEdgeColor.value=this.tempPulseColor1,this.edgeDetectionMaterial.uniforms.hiddenEdgeColor.value=this.tempPulseColor2,e.setRenderTarget(this.renderTargetEdgeBuffer1),e.clear(),this.fsQuad.render(e),this.fsQuad.material=this.separableBlurMaterial1,this.separableBlurMaterial1.uniforms.colorTexture.value=this.renderTargetEdgeBuffer1.texture,this.separableBlurMaterial1.uniforms.direction.value=THREE.OutlinePass.BlurDirectionX,this.separableBlurMaterial1.uniforms.kernelRadius.value=this.edgeThickness,e.setRenderTarget(this.renderTargetBlurBuffer1),e.clear(),this.fsQuad.render(e),this.separableBlurMaterial1.uniforms.colorTexture.value=this.renderTargetBlurBuffer1.texture,this.separableBlurMaterial1.uniforms.direction.value=THREE.OutlinePass.BlurDirectionY,e.setRenderTarget(this.renderTargetEdgeBuffer1),e.clear(),this.fsQuad.render(e),this.fsQuad.material=this.separableBlurMaterial2,this.separableBlurMaterial2.uniforms.colorTexture.value=this.renderTargetEdgeBuffer1.texture,this.separableBlurMaterial2.uniforms.direction.value=THREE.OutlinePass.BlurDirectionX,e.setRenderTarget(this.renderTargetBlurBuffer2),e.clear(),this.fsQuad.render(e),this.separableBlurMaterial2.uniforms.colorTexture.value=this.renderTargetBlurBuffer2.texture,this.separableBlurMaterial2.uniforms.direction.value=THREE.OutlinePass.BlurDirectionY,e.setRenderTarget(this.renderTargetEdgeBuffer2),e.clear(),this.fsQuad.render(e),this.fsQuad.material=this.overlayMaterial,this.overlayMaterial.uniforms.maskTexture.value=this.renderTargetMaskBuffer.texture,this.overlayMaterial.uniforms.edgeTexture1.value=this.renderTargetEdgeBuffer1.texture,this.overlayMaterial.uniforms.edgeTexture2.value=this.renderTargetEdgeBuffer2.texture,this.overlayMaterial.uniforms.patternTexture.value=this.patternTexture,this.overlayMaterial.uniforms.edgeStrength.value=this.edgeStrength,this.overlayMaterial.uniforms.edgeGlow.value=this.edgeGlow,this.overlayMaterial.uniforms.usePatternTexture.value=this.usePatternTexture,i&&e.state.buffers.stencil.setTest(!0),e.setRenderTarget(a),this.fsQuad.render(e),e.setClearColor(this.oldClearColor,this.oldClearAlpha),e.autoClear=o}this.renderToScreen&&(this.fsQuad.material=this.materialCopy,this.copyUniforms.tDiffuse.value=a.texture,e.setRenderTarget(null),this.fsQuad.render(e))},getPrepareMaskMaterial:function(){return new THREE.ShaderMaterial({uniforms:{depthTexture:{value:null},cameraNearFar:{value:new THREE.Vector2(.5,.5)},textureMatrix:{value:new THREE.Matrix4}},vertexShader:["varying vec4 projTexCoord;","varying vec4 vPosition;","uniform mat4 textureMatrix;","void main() {","\tvPosition = modelViewMatrix * vec4( position, 1.0 );","\tvec4 worldPosition = modelMatrix * vec4( position, 1.0 );","\tprojTexCoord = textureMatrix * worldPosition;","\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );","}"].join("\n"),fragmentShader:["#include <packing>","varying vec4 vPosition;","varying vec4 projTexCoord;","uniform sampler2D depthTexture;","uniform vec2 cameraNearFar;","void main() {","\tfloat depth = unpackRGBAToDepth(texture2DProj( depthTexture, projTexCoord ));","\tfloat viewZ = - DEPTH_TO_VIEW_Z( depth, cameraNearFar.x, cameraNearFar.y );","\tfloat depthTest = (-vPosition.z > viewZ) ? 1.0 : 0.0;","\tgl_FragColor = vec4(0.0, depthTest, 1.0, 1.0);","}"].join("\n")})},getEdgeDetectionMaterial:function(){return new THREE.ShaderMaterial({uniforms:{maskTexture:{value:null},texSize:{value:new THREE.Vector2(.5,.5)},visibleEdgeColor:{value:new THREE.Vector3(1,1,1)},hiddenEdgeColor:{value:new THREE.Vector3(1,1,1)}},vertexShader:"varying vec2 vUv;\n\t\t\t\tvoid main() {\n\t\t\t\t\tvUv = uv;\n\t\t\t\t\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n\t\t\t\t}",fragmentShader:"varying vec2 vUv;\t\t\t\tuniform sampler2D maskTexture;\t\t\t\tuniform vec2 texSize;\t\t\t\tuniform vec3 visibleEdgeColor;\t\t\t\tuniform vec3 hiddenEdgeColor;\t\t\t\t\t\t\t\tvoid main() {\n\t\t\t\t\tvec2 invSize = 1.0 / texSize;\t\t\t\t\tvec4 uvOffset = vec4(1.0, 0.0, 0.0, 1.0) * vec4(invSize, invSize);\t\t\t\t\tvec4 c1 = texture2D( maskTexture, vUv + uvOffset.xy);\t\t\t\t\tvec4 c2 = texture2D( maskTexture, vUv - uvOffset.xy);\t\t\t\t\tvec4 c3 = texture2D( maskTexture, vUv + uvOffset.yw);\t\t\t\t\tvec4 c4 = texture2D( maskTexture, vUv - uvOffset.yw);\t\t\t\t\tfloat diff1 = (c1.r - c2.r)*0.5;\t\t\t\t\tfloat diff2 = (c3.r - c4.r)*0.5;\t\t\t\t\tfloat d = length( vec2(diff1, diff2) );\t\t\t\t\tfloat a1 = min(c1.g, c2.g);\t\t\t\t\tfloat a2 = min(c3.g, c4.g);\t\t\t\t\tfloat visibilityFactor = min(a1, a2);\t\t\t\t\tvec3 edgeColor = 1.0 - visibilityFactor > 0.001 ? visibleEdgeColor : hiddenEdgeColor;\t\t\t\t\tgl_FragColor = vec4(edgeColor, 1.0) * vec4(d);\t\t\t\t}"})},getSeperableBlurMaterial:function(e){return new THREE.ShaderMaterial({defines:{MAX_RADIUS:e},uniforms:{colorTexture:{value:null},texSize:{value:new THREE.Vector2(.5,.5)},direction:{value:new THREE.Vector2(.5,.5)},kernelRadius:{value:1}},vertexShader:"varying vec2 vUv;\n\t\t\t\tvoid main() {\n\t\t\t\t\tvUv = uv;\n\t\t\t\t\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n\t\t\t\t}",fragmentShader:"#include <common>\t\t\t\tvarying vec2 vUv;\t\t\t\tuniform sampler2D colorTexture;\t\t\t\tuniform vec2 texSize;\t\t\t\tuniform vec2 direction;\t\t\t\tuniform float kernelRadius;\t\t\t\t\t\t\t\tfloat gaussianPdf(in float x, in float sigma) {\t\t\t\t\treturn 0.39894 * exp( -0.5 * x * x/( sigma * sigma))/sigma;\t\t\t\t}\t\t\t\tvoid main() {\t\t\t\t\tvec2 invSize = 1.0 / texSize;\t\t\t\t\tfloat weightSum = gaussianPdf(0.0, kernelRadius);\t\t\t\t\tvec4 diffuseSum = texture2D( colorTexture, vUv) * weightSum;\t\t\t\t\tvec2 delta = direction * invSize * kernelRadius/float(MAX_RADIUS);\t\t\t\t\tvec2 uvOffset = delta;\t\t\t\t\tfor( int i = 1; i <= MAX_RADIUS; i ++ ) {\t\t\t\t\t\tfloat w = gaussianPdf(uvOffset.x, kernelRadius);\t\t\t\t\t\tvec4 sample1 = texture2D( colorTexture, vUv + uvOffset);\t\t\t\t\t\tvec4 sample2 = texture2D( colorTexture, vUv - uvOffset);\t\t\t\t\t\tdiffuseSum += ((sample1 + sample2) * w);\t\t\t\t\t\tweightSum += (2.0 * w);\t\t\t\t\t\tuvOffset += delta;\t\t\t\t\t}\t\t\t\t\tgl_FragColor = diffuseSum/weightSum;\t\t\t\t}"})},getOverlayMaterial:function(){return new THREE.ShaderMaterial({uniforms:{maskTexture:{value:null},edgeTexture1:{value:null},edgeTexture2:{value:null},patternTexture:{value:null},edgeStrength:{value:1},edgeGlow:{value:1},usePatternTexture:{value:0}},vertexShader:"varying vec2 vUv;\n\t\t\t\tvoid main() {\n\t\t\t\t\tvUv = uv;\n\t\t\t\t\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n\t\t\t\t}",fragmentShader:"varying vec2 vUv;\t\t\t\tuniform sampler2D maskTexture;\t\t\t\tuniform sampler2D edgeTexture1;\t\t\t\tuniform sampler2D edgeTexture2;\t\t\t\tuniform sampler2D patternTexture;\t\t\t\tuniform float edgeStrength;\t\t\t\tuniform float edgeGlow;\t\t\t\tuniform bool usePatternTexture;\t\t\t\t\t\t\t\tvoid main() {\t\t\t\t\tvec4 edgeValue1 = texture2D(edgeTexture1, vUv);\t\t\t\t\tvec4 edgeValue2 = texture2D(edgeTexture2, vUv);\t\t\t\t\tvec4 maskColor = texture2D(maskTexture, vUv);\t\t\t\t\tvec4 patternColor = texture2D(patternTexture, 6.0 * vUv);\t\t\t\t\tfloat visibilityFactor = 1.0 - maskColor.g > 0.0 ? 1.0 : 0.5;\t\t\t\t\tvec4 edgeValue = edgeValue1 + edgeValue2 * edgeGlow;\t\t\t\t\tvec4 finalColor = edgeStrength * maskColor.r * edgeValue;\t\t\t\t\tif(usePatternTexture)\t\t\t\t\t\tfinalColor += + visibilityFactor * (1.0 - maskColor.r) * (1.0 - patternColor.r);\t\t\t\t\tgl_FragColor = finalColor;\t\t\t\t}",blending:THREE.AdditiveBlending,depthTest:!1,depthWrite:!1,transparent:!0})}}),THREE.OutlinePass.BlurDirectionX=new THREE.Vector2(1,0),THREE.OutlinePass.BlurDirectionY=new THREE.Vector2(0,1)},535:()=>{THREE.RenderPass=function(e,t,a,r,i){THREE.Pass.call(this),this.scene=e,this.camera=t,this.overrideMaterial=a,this.clearColor=r,this.clearAlpha=void 0!==i?i:0,this.clear=!0,this.clearDepth=!1,this.needsSwap=!1},THREE.RenderPass.prototype=Object.assign(Object.create(THREE.Pass.prototype),{constructor:THREE.RenderPass,render:function(e,t,a){var r,i,o=e.autoClear;e.autoClear=!1,this.scene.overrideMaterial=this.overrideMaterial,this.clearColor&&(r=e.getClearColor().getHex(),i=e.getClearAlpha(),e.setClearColor(this.clearColor,this.clearAlpha)),this.clearDepth&&e.clearDepth(),e.setRenderTarget(this.renderToScreen?null:a),this.clear&&e.clear(e.autoClearColor,e.autoClearDepth,e.autoClearStencil),e.render(this.scene,this.camera),this.clearColor&&e.setClearColor(r,i),this.scene.overrideMaterial=null,e.autoClear=o}})},679:()=>{THREE.ShaderPass=function(e,t){THREE.Pass.call(this),this.textureID=void 0!==t?t:"tDiffuse",e instanceof THREE.ShaderMaterial?(this.uniforms=e.uniforms,this.material=e):e&&(this.uniforms=THREE.UniformsUtils.clone(e.uniforms),this.material=new THREE.ShaderMaterial({defines:Object.assign({},e.defines),uniforms:this.uniforms,vertexShader:e.vertexShader,fragmentShader:e.fragmentShader})),this.fsQuad=new THREE.Pass.FullScreenQuad(this.material)},THREE.ShaderPass.prototype=Object.assign(Object.create(THREE.Pass.prototype),{constructor:THREE.ShaderPass,render:function(e,t,a){this.uniforms[this.textureID]&&(this.uniforms[this.textureID].value=a.texture),this.fsQuad.material=this.material,this.renderToScreen?(e.setRenderTarget(null),this.fsQuad.render(e)):(e.setRenderTarget(t),this.clear&&e.clear(e.autoClearColor,e.autoClearDepth,e.autoClearStencil),this.fsQuad.render(e))}})},216:()=>{THREE.CSS2DObject=function(e){THREE.Object3D.call(this),this.element=e,this.element.style.position="absolute",this.addEventListener("removed",(function(){this.traverse((function(e){e.element instanceof Element&&null!==e.element.parentNode&&e.element.parentNode.removeChild(e.element)}))}))},THREE.CSS2DObject.prototype=Object.create(THREE.Object3D.prototype),THREE.CSS2DObject.prototype.constructor=THREE.CSS2DObject,THREE.CSS2DRenderer=function(){var e,t,a,r,i=new THREE.Vector3,o=new THREE.Matrix4,n=new THREE.Matrix4,s={objects:new WeakMap},l=document.createElement("div");l.style.overflow="hidden",this.domElement=l,this.getSize=function(){return{width:e,height:t}},this.setSize=function(i,o){a=(e=i)/2,r=(t=o)/2,l.style.width=i+"px",l.style.height=o+"px"};var u,d,h=function(e,t){if(e instanceof THREE.CSS2DObject){i.setFromMatrixPosition(e.matrixWorld),i.applyMatrix4(n);var o=e.element,u="translate(-50%,-50%) translate("+(i.x*a+a)+"px,"+(-i.y*r+r)+"px)";o.style.WebkitTransform=u,o.style.MozTransform=u,o.style.oTransform=u,o.style.transform=u,o.style.display=e.visible&&i.z>=-1&&i.z<=1?"":"none";var d={distanceToCameraSquared:c(t,e)};s.objects.set(e,d),o.parentNode!==l&&l.appendChild(o)}for(var p=0,f=e.children.length;p<f;p++)h(e.children[p],t)},c=(u=new THREE.Vector3,d=new THREE.Vector3,function(e,t){return u.setFromMatrixPosition(e.matrixWorld),d.setFromMatrixPosition(t.matrixWorld),u.distanceToSquared(d)});this.render=function(e,t){e.updateMatrixWorld(),null===t.parent&&t.updateMatrixWorld(),o.copy(t.matrixWorldInverse),n.multiplyMatrices(t.projectionMatrix,o),h(e,t),function(e){for(var t=function(e){var t=[];return e.traverse((function(e){e instanceof THREE.CSS2DObject&&t.push(e)})),t}(e).sort((function(e,t){return s.objects.get(e).distanceToCameraSquared-s.objects.get(t).distanceToCameraSquared})),a=t.length,r=0,i=t.length;r<i;r++)t[r].element.style.zIndex=a-r}(e)}}},258:()=>{THREE.CSS3DObject=function(e){THREE.Object3D.call(this),this.element=e,this.element.style.position="absolute",this.addEventListener("removed",(function(){this.traverse((function(e){e.element instanceof Element&&null!==e.element.parentNode&&e.element.parentNode.removeChild(e.element)}))}))},THREE.CSS3DObject.prototype=Object.create(THREE.Object3D.prototype),THREE.CSS3DObject.prototype.constructor=THREE.CSS3DObject,THREE.CSS3DSprite=function(e){THREE.CSS3DObject.call(this,e)},THREE.CSS3DSprite.prototype=Object.create(THREE.CSS3DObject.prototype),THREE.CSS3DSprite.prototype.constructor=THREE.CSS3DSprite,THREE.CSS3DRenderer=function(){var e,t,a,r,i=new THREE.Matrix4,o={camera:{fov:0,style:""},objects:new WeakMap},n=document.createElement("div");n.style.overflow="hidden",this.domElement=n;var s=document.createElement("div");s.style.WebkitTransformStyle="preserve-3d",s.style.transformStyle="preserve-3d",n.appendChild(s);var l=/Trident/i.test(navigator.userAgent);function u(e){return Math.abs(e)<1e-10?0:e}function d(e){var t=e.elements;return"matrix3d("+u(t[0])+","+u(-t[1])+","+u(t[2])+","+u(t[3])+","+u(t[4])+","+u(-t[5])+","+u(t[6])+","+u(t[7])+","+u(t[8])+","+u(-t[9])+","+u(t[10])+","+u(t[11])+","+u(t[12])+","+u(-t[13])+","+u(t[14])+","+u(t[15])+")"}function h(e,t){var i=e.elements,o="matrix3d("+u(i[0])+","+u(i[1])+","+u(i[2])+","+u(i[3])+","+u(-i[4])+","+u(-i[5])+","+u(-i[6])+","+u(-i[7])+","+u(i[8])+","+u(i[9])+","+u(i[10])+","+u(i[11])+","+u(i[12])+","+u(i[13])+","+u(i[14])+","+u(i[15])+")";return l?"translate(-50%,-50%)translate("+a+"px,"+r+"px)"+t+o:"translate(-50%,-50%)"+o}function c(e,t,a){if(e instanceof THREE.CSS3DObject){var r;e instanceof THREE.CSS3DSprite?(i.copy(t.matrixWorldInverse),i.transpose(),i.copyPosition(e.matrixWorld),i.scale(e.scale),i.elements[3]=0,i.elements[7]=0,i.elements[11]=0,i.elements[15]=1,r=h(i,a)):r=h(e.matrixWorld,a);var n=e.element,u=o.objects.get(e);if(void 0===u||u.style!==r){n.style.WebkitTransform=r,n.style.transform=r;var d={style:r};l&&(d.distanceToCameraSquared=m(t,e)),o.objects.set(e,d)}n.parentNode!==s&&s.appendChild(n)}for(var p=0,f=e.children.length;p<f;p++)c(e.children[p],t,a)}this.getSize=function(){return{width:e,height:t}},this.setSize=function(i,o){a=(e=i)/2,r=(t=o)/2,n.style.width=i+"px",n.style.height=o+"px",s.style.width=i+"px",s.style.height=o+"px"};var p,f,m=(p=new THREE.Vector3,f=new THREE.Vector3,function(e,t){return p.setFromMatrixPosition(e.matrixWorld),f.setFromMatrixPosition(t.matrixWorld),p.distanceToSquared(f)});this.render=function(e,t){var i=t.projectionMatrix.elements[5]*r;if(o.camera.fov!==i&&(t.isPerspectiveCamera?(n.style.WebkitPerspective=i+"px",n.style.perspective=i+"px"):(n.style.WebkitPerspective="",n.style.perspective=""),o.camera.fov=i),e.updateMatrixWorld(),null===t.parent&&t.updateMatrixWorld(),t.isOrthographicCamera)var h=-(t.right+t.left)/2,p=(t.top+t.bottom)/2;var f=t.isOrthographicCamera?"scale("+i+")translate("+u(h)+"px,"+u(p)+"px)"+d(t.matrixWorldInverse):"translateZ("+i+"px)"+d(t.matrixWorldInverse),m=f+"translate("+a+"px,"+r+"px)";o.camera.style===m||l||(s.style.WebkitTransform=m,s.style.transform=m,o.camera.style=m),c(e,t,f),l&&function(e){for(var t=function(e){var t=[];return e.traverse((function(e){e instanceof THREE.CSS3DObject&&t.push(e)})),t}(e).sort((function(e,t){return o.objects.get(e).distanceToCameraSquared-o.objects.get(t).distanceToCameraSquared})),a=t.length,r=0,i=t.length;r<i;r++)t[r].element.style.zIndex=a-r}(e)}}},262:()=>{THREE.CopyShader={uniforms:{tDiffuse:{value:null},opacity:{value:1}},vertexShader:["varying vec2 vUv;","void main() {","\tvUv = uv;","\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );","}"].join("\n"),fragmentShader:["uniform float opacity;","uniform sampler2D tDiffuse;","varying vec2 vUv;","void main() {","\tvec4 texel = texture2D( tDiffuse, vUv );","\tgl_FragColor = opacity * texel;","}"].join("\n")}},346:()=>{THREE.FXAAShader={uniforms:{tDiffuse:{value:null},resolution:{value:new THREE.Vector2(1/1024,1/512)}},vertexShader:["varying vec2 vUv;","void main() {","\tvUv = uv;","\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );","}"].join("\n"),fragmentShader:["precision highp float;","","uniform sampler2D tDiffuse;","","uniform vec2 resolution;","","varying vec2 vUv;","","// FXAA 3.11 implementation by NVIDIA, ported to WebGL by Agost Biro (biro@archilogic.com)","","//----------------------------------------------------------------------------------","// File:        es3-keplerFXAAassetsshaders/FXAA_DefaultES.frag","// SDK Version: v3.00","// Email:       gameworks@nvidia.com","// Site:        http://developer.nvidia.com/","//","// Copyright (c) 2014-2015, NVIDIA CORPORATION. All rights reserved.","//","// Redistribution and use in source and binary forms, with or without","// modification, are permitted provided that the following conditions","// are met:","//  * Redistributions of source code must retain the above copyright","//    notice, this list of conditions and the following disclaimer.","//  * Redistributions in binary form must reproduce the above copyright","//    notice, this list of conditions and the following disclaimer in the","//    documentation and/or other materials provided with the distribution.","//  * Neither the name of NVIDIA CORPORATION nor the names of its","//    contributors may be used to endorse or promote products derived","//    from this software without specific prior written permission.","//","// THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS ``AS IS'' AND ANY","// EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE","// IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR","// PURPOSE ARE DISCLAIMED.  IN NO EVENT SHALL THE COPYRIGHT OWNER OR","// CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL,","// EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO,","// PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR","// PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY","// OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT","// (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE","// OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.","//","//----------------------------------------------------------------------------------","","#define FXAA_PC 1","#define FXAA_GLSL_100 1","#define FXAA_QUALITY_PRESET 12","","#define FXAA_GREEN_AS_LUMA 1","","/*--------------------------------------------------------------------------*/","#ifndef FXAA_PC_CONSOLE","    //","    // The console algorithm for PC is included","    // for developers targeting really low spec machines.","    // Likely better to just run FXAA_PC, and use a really low preset.","    //","    #define FXAA_PC_CONSOLE 0","#endif","/*--------------------------------------------------------------------------*/","#ifndef FXAA_GLSL_120","    #define FXAA_GLSL_120 0","#endif","/*--------------------------------------------------------------------------*/","#ifndef FXAA_GLSL_130","    #define FXAA_GLSL_130 0","#endif","/*--------------------------------------------------------------------------*/","#ifndef FXAA_HLSL_3","    #define FXAA_HLSL_3 0","#endif","/*--------------------------------------------------------------------------*/","#ifndef FXAA_HLSL_4","    #define FXAA_HLSL_4 0","#endif","/*--------------------------------------------------------------------------*/","#ifndef FXAA_HLSL_5","    #define FXAA_HLSL_5 0","#endif","/*==========================================================================*/","#ifndef FXAA_GREEN_AS_LUMA","    //","    // For those using non-linear color,","    // and either not able to get luma in alpha, or not wanting to,","    // this enables FXAA to run using green as a proxy for luma.","    // So with this enabled, no need to pack luma in alpha.","    //","    // This will turn off AA on anything which lacks some amount of green.","    // Pure red and blue or combination of only R and B, will get no AA.","    //","    // Might want to lower the settings for both,","    //    fxaaConsoleEdgeThresholdMin","    //    fxaaQualityEdgeThresholdMin","    // In order to insure AA does not get turned off on colors","    // which contain a minor amount of green.","    //","    // 1 = On.","    // 0 = Off.","    //","    #define FXAA_GREEN_AS_LUMA 0","#endif","/*--------------------------------------------------------------------------*/","#ifndef FXAA_EARLY_EXIT","    //","    // Controls algorithm's early exit path.","    // On PS3 turning this ON adds 2 cycles to the shader.","    // On 360 turning this OFF adds 10ths of a millisecond to the shader.","    // Turning this off on console will result in a more blurry image.","    // So this defaults to on.","    //","    // 1 = On.","    // 0 = Off.","    //","    #define FXAA_EARLY_EXIT 1","#endif","/*--------------------------------------------------------------------------*/","#ifndef FXAA_DISCARD","    //","    // Only valid for PC OpenGL currently.","    // Probably will not work when FXAA_GREEN_AS_LUMA = 1.","    //","    // 1 = Use discard on pixels which don't need AA.","    //     For APIs which enable concurrent TEX+ROP from same surface.","    // 0 = Return unchanged color on pixels which don't need AA.","    //","    #define FXAA_DISCARD 0","#endif","/*--------------------------------------------------------------------------*/","#ifndef FXAA_FAST_PIXEL_OFFSET","    //","    // Used for GLSL 120 only.","    //","    // 1 = GL API supports fast pixel offsets","    // 0 = do not use fast pixel offsets","    //","    #ifdef GL_EXT_gpu_shader4","        #define FXAA_FAST_PIXEL_OFFSET 1","    #endif","    #ifdef GL_NV_gpu_shader5","        #define FXAA_FAST_PIXEL_OFFSET 1","    #endif","    #ifdef GL_ARB_gpu_shader5","        #define FXAA_FAST_PIXEL_OFFSET 1","    #endif","    #ifndef FXAA_FAST_PIXEL_OFFSET","        #define FXAA_FAST_PIXEL_OFFSET 0","    #endif","#endif","/*--------------------------------------------------------------------------*/","#ifndef FXAA_GATHER4_ALPHA","    //","    // 1 = API supports gather4 on alpha channel.","    // 0 = API does not support gather4 on alpha channel.","    //","    #if (FXAA_HLSL_5 == 1)","        #define FXAA_GATHER4_ALPHA 1","    #endif","    #ifdef GL_ARB_gpu_shader5","        #define FXAA_GATHER4_ALPHA 1","    #endif","    #ifdef GL_NV_gpu_shader5","        #define FXAA_GATHER4_ALPHA 1","    #endif","    #ifndef FXAA_GATHER4_ALPHA","        #define FXAA_GATHER4_ALPHA 0","    #endif","#endif","","","/*============================================================================","                        FXAA QUALITY - TUNING KNOBS","------------------------------------------------------------------------------","NOTE the other tuning knobs are now in the shader function inputs!","============================================================================*/","#ifndef FXAA_QUALITY_PRESET","    //","    // Choose the quality preset.","    // This needs to be compiled into the shader as it effects code.","    // Best option to include multiple presets is to","    // in each shader define the preset, then include this file.","    //","    // OPTIONS","    // -----------------------------------------------------------------------","    // 10 to 15 - default medium dither (10=fastest, 15=highest quality)","    // 20 to 29 - less dither, more expensive (20=fastest, 29=highest quality)","    // 39       - no dither, very expensive","    //","    // NOTES","    // -----------------------------------------------------------------------","    // 12 = slightly faster then FXAA 3.9 and higher edge quality (default)","    // 13 = about same speed as FXAA 3.9 and better than 12","    // 23 = closest to FXAA 3.9 visually and performance wise","    //  _ = the lowest digit is directly related to performance","    // _  = the highest digit is directly related to style","    //","    #define FXAA_QUALITY_PRESET 12","#endif","","","/*============================================================================","","                           FXAA QUALITY - PRESETS","","============================================================================*/","","/*============================================================================","                     FXAA QUALITY - MEDIUM DITHER PRESETS","============================================================================*/","#if (FXAA_QUALITY_PRESET == 10)","    #define FXAA_QUALITY_PS 3","    #define FXAA_QUALITY_P0 1.5","    #define FXAA_QUALITY_P1 3.0","    #define FXAA_QUALITY_P2 12.0","#endif","/*--------------------------------------------------------------------------*/","#if (FXAA_QUALITY_PRESET == 11)","    #define FXAA_QUALITY_PS 4","    #define FXAA_QUALITY_P0 1.0","    #define FXAA_QUALITY_P1 1.5","    #define FXAA_QUALITY_P2 3.0","    #define FXAA_QUALITY_P3 12.0","#endif","/*--------------------------------------------------------------------------*/","#if (FXAA_QUALITY_PRESET == 12)","    #define FXAA_QUALITY_PS 5","    #define FXAA_QUALITY_P0 1.0","    #define FXAA_QUALITY_P1 1.5","    #define FXAA_QUALITY_P2 2.0","    #define FXAA_QUALITY_P3 4.0","    #define FXAA_QUALITY_P4 12.0","#endif","/*--------------------------------------------------------------------------*/","#if (FXAA_QUALITY_PRESET == 13)","    #define FXAA_QUALITY_PS 6","    #define FXAA_QUALITY_P0 1.0","    #define FXAA_QUALITY_P1 1.5","    #define FXAA_QUALITY_P2 2.0","    #define FXAA_QUALITY_P3 2.0","    #define FXAA_QUALITY_P4 4.0","    #define FXAA_QUALITY_P5 12.0","#endif","/*--------------------------------------------------------------------------*/","#if (FXAA_QUALITY_PRESET == 14)","    #define FXAA_QUALITY_PS 7","    #define FXAA_QUALITY_P0 1.0","    #define FXAA_QUALITY_P1 1.5","    #define FXAA_QUALITY_P2 2.0","    #define FXAA_QUALITY_P3 2.0","    #define FXAA_QUALITY_P4 2.0","    #define FXAA_QUALITY_P5 4.0","    #define FXAA_QUALITY_P6 12.0","#endif","/*--------------------------------------------------------------------------*/","#if (FXAA_QUALITY_PRESET == 15)","    #define FXAA_QUALITY_PS 8","    #define FXAA_QUALITY_P0 1.0","    #define FXAA_QUALITY_P1 1.5","    #define FXAA_QUALITY_P2 2.0","    #define FXAA_QUALITY_P3 2.0","    #define FXAA_QUALITY_P4 2.0","    #define FXAA_QUALITY_P5 2.0","    #define FXAA_QUALITY_P6 4.0","    #define FXAA_QUALITY_P7 12.0","#endif","","/*============================================================================","                     FXAA QUALITY - LOW DITHER PRESETS","============================================================================*/","#if (FXAA_QUALITY_PRESET == 20)","    #define FXAA_QUALITY_PS 3","    #define FXAA_QUALITY_P0 1.5","    #define FXAA_QUALITY_P1 2.0","    #define FXAA_QUALITY_P2 8.0","#endif","/*--------------------------------------------------------------------------*/","#if (FXAA_QUALITY_PRESET == 21)","    #define FXAA_QUALITY_PS 4","    #define FXAA_QUALITY_P0 1.0","    #define FXAA_QUALITY_P1 1.5","    #define FXAA_QUALITY_P2 2.0","    #define FXAA_QUALITY_P3 8.0","#endif","/*--------------------------------------------------------------------------*/","#if (FXAA_QUALITY_PRESET == 22)","    #define FXAA_QUALITY_PS 5","    #define FXAA_QUALITY_P0 1.0","    #define FXAA_QUALITY_P1 1.5","    #define FXAA_QUALITY_P2 2.0","    #define FXAA_QUALITY_P3 2.0","    #define FXAA_QUALITY_P4 8.0","#endif","/*--------------------------------------------------------------------------*/","#if (FXAA_QUALITY_PRESET == 23)","    #define FXAA_QUALITY_PS 6","    #define FXAA_QUALITY_P0 1.0","    #define FXAA_QUALITY_P1 1.5","    #define FXAA_QUALITY_P2 2.0","    #define FXAA_QUALITY_P3 2.0","    #define FXAA_QUALITY_P4 2.0","    #define FXAA_QUALITY_P5 8.0","#endif","/*--------------------------------------------------------------------------*/","#if (FXAA_QUALITY_PRESET == 24)","    #define FXAA_QUALITY_PS 7","    #define FXAA_QUALITY_P0 1.0","    #define FXAA_QUALITY_P1 1.5","    #define FXAA_QUALITY_P2 2.0","    #define FXAA_QUALITY_P3 2.0","    #define FXAA_QUALITY_P4 2.0","    #define FXAA_QUALITY_P5 3.0","    #define FXAA_QUALITY_P6 8.0","#endif","/*--------------------------------------------------------------------------*/","#if (FXAA_QUALITY_PRESET == 25)","    #define FXAA_QUALITY_PS 8","    #define FXAA_QUALITY_P0 1.0","    #define FXAA_QUALITY_P1 1.5","    #define FXAA_QUALITY_P2 2.0","    #define FXAA_QUALITY_P3 2.0","    #define FXAA_QUALITY_P4 2.0","    #define FXAA_QUALITY_P5 2.0","    #define FXAA_QUALITY_P6 4.0","    #define FXAA_QUALITY_P7 8.0","#endif","/*--------------------------------------------------------------------------*/","#if (FXAA_QUALITY_PRESET == 26)","    #define FXAA_QUALITY_PS 9","    #define FXAA_QUALITY_P0 1.0","    #define FXAA_QUALITY_P1 1.5","    #define FXAA_QUALITY_P2 2.0","    #define FXAA_QUALITY_P3 2.0","    #define FXAA_QUALITY_P4 2.0","    #define FXAA_QUALITY_P5 2.0","    #define FXAA_QUALITY_P6 2.0","    #define FXAA_QUALITY_P7 4.0","    #define FXAA_QUALITY_P8 8.0","#endif","/*--------------------------------------------------------------------------*/","#if (FXAA_QUALITY_PRESET == 27)","    #define FXAA_QUALITY_PS 10","    #define FXAA_QUALITY_P0 1.0","    #define FXAA_QUALITY_P1 1.5","    #define FXAA_QUALITY_P2 2.0","    #define FXAA_QUALITY_P3 2.0","    #define FXAA_QUALITY_P4 2.0","    #define FXAA_QUALITY_P5 2.0","    #define FXAA_QUALITY_P6 2.0","    #define FXAA_QUALITY_P7 2.0","    #define FXAA_QUALITY_P8 4.0","    #define FXAA_QUALITY_P9 8.0","#endif","/*--------------------------------------------------------------------------*/","#if (FXAA_QUALITY_PRESET == 28)","    #define FXAA_QUALITY_PS 11","    #define FXAA_QUALITY_P0 1.0","    #define FXAA_QUALITY_P1 1.5","    #define FXAA_QUALITY_P2 2.0","    #define FXAA_QUALITY_P3 2.0","    #define FXAA_QUALITY_P4 2.0","    #define FXAA_QUALITY_P5 2.0","    #define FXAA_QUALITY_P6 2.0","    #define FXAA_QUALITY_P7 2.0","    #define FXAA_QUALITY_P8 2.0","    #define FXAA_QUALITY_P9 4.0","    #define FXAA_QUALITY_P10 8.0","#endif","/*--------------------------------------------------------------------------*/","#if (FXAA_QUALITY_PRESET == 29)","    #define FXAA_QUALITY_PS 12","    #define FXAA_QUALITY_P0 1.0","    #define FXAA_QUALITY_P1 1.5","    #define FXAA_QUALITY_P2 2.0","    #define FXAA_QUALITY_P3 2.0","    #define FXAA_QUALITY_P4 2.0","    #define FXAA_QUALITY_P5 2.0","    #define FXAA_QUALITY_P6 2.0","    #define FXAA_QUALITY_P7 2.0","    #define FXAA_QUALITY_P8 2.0","    #define FXAA_QUALITY_P9 2.0","    #define FXAA_QUALITY_P10 4.0","    #define FXAA_QUALITY_P11 8.0","#endif","","/*============================================================================","                     FXAA QUALITY - EXTREME QUALITY","============================================================================*/","#if (FXAA_QUALITY_PRESET == 39)","    #define FXAA_QUALITY_PS 12","    #define FXAA_QUALITY_P0 1.0","    #define FXAA_QUALITY_P1 1.0","    #define FXAA_QUALITY_P2 1.0","    #define FXAA_QUALITY_P3 1.0","    #define FXAA_QUALITY_P4 1.0","    #define FXAA_QUALITY_P5 1.5","    #define FXAA_QUALITY_P6 2.0","    #define FXAA_QUALITY_P7 2.0","    #define FXAA_QUALITY_P8 2.0","    #define FXAA_QUALITY_P9 2.0","    #define FXAA_QUALITY_P10 4.0","    #define FXAA_QUALITY_P11 8.0","#endif","","","","/*============================================================================","","                                API PORTING","","============================================================================*/","#if (FXAA_GLSL_100 == 1) || (FXAA_GLSL_120 == 1) || (FXAA_GLSL_130 == 1)","    #define FxaaBool bool","    #define FxaaDiscard discard","    #define FxaaFloat float","    #define FxaaFloat2 vec2","    #define FxaaFloat3 vec3","    #define FxaaFloat4 vec4","    #define FxaaHalf float","    #define FxaaHalf2 vec2","    #define FxaaHalf3 vec3","    #define FxaaHalf4 vec4","    #define FxaaInt2 ivec2","    #define FxaaSat(x) clamp(x, 0.0, 1.0)","    #define FxaaTex sampler2D","#else","    #define FxaaBool bool","    #define FxaaDiscard clip(-1)","    #define FxaaFloat float","    #define FxaaFloat2 float2","    #define FxaaFloat3 float3","    #define FxaaFloat4 float4","    #define FxaaHalf half","    #define FxaaHalf2 half2","    #define FxaaHalf3 half3","    #define FxaaHalf4 half4","    #define FxaaSat(x) saturate(x)","#endif","/*--------------------------------------------------------------------------*/","#if (FXAA_GLSL_100 == 1)","  #define FxaaTexTop(t, p) texture2D(t, p, 0.0)","  #define FxaaTexOff(t, p, o, r) texture2D(t, p + (o * r), 0.0)","#endif","/*--------------------------------------------------------------------------*/","#if (FXAA_GLSL_120 == 1)","    // Requires,","    //  #version 120","    // And at least,","    //  #extension GL_EXT_gpu_shader4 : enable","    //  (or set FXAA_FAST_PIXEL_OFFSET 1 to work like DX9)","    #define FxaaTexTop(t, p) texture2DLod(t, p, 0.0)","    #if (FXAA_FAST_PIXEL_OFFSET == 1)","        #define FxaaTexOff(t, p, o, r) texture2DLodOffset(t, p, 0.0, o)","    #else","        #define FxaaTexOff(t, p, o, r) texture2DLod(t, p + (o * r), 0.0)","    #endif","    #if (FXAA_GATHER4_ALPHA == 1)","        // use #extension GL_ARB_gpu_shader5 : enable","        #define FxaaTexAlpha4(t, p) textureGather(t, p, 3)","        #define FxaaTexOffAlpha4(t, p, o) textureGatherOffset(t, p, o, 3)","        #define FxaaTexGreen4(t, p) textureGather(t, p, 1)","        #define FxaaTexOffGreen4(t, p, o) textureGatherOffset(t, p, o, 1)","    #endif","#endif","/*--------------------------------------------------------------------------*/","#if (FXAA_GLSL_130 == 1)",'    // Requires "#version 130" or better',"    #define FxaaTexTop(t, p) textureLod(t, p, 0.0)","    #define FxaaTexOff(t, p, o, r) textureLodOffset(t, p, 0.0, o)","    #if (FXAA_GATHER4_ALPHA == 1)","        // use #extension GL_ARB_gpu_shader5 : enable","        #define FxaaTexAlpha4(t, p) textureGather(t, p, 3)","        #define FxaaTexOffAlpha4(t, p, o) textureGatherOffset(t, p, o, 3)","        #define FxaaTexGreen4(t, p) textureGather(t, p, 1)","        #define FxaaTexOffGreen4(t, p, o) textureGatherOffset(t, p, o, 1)","    #endif","#endif","/*--------------------------------------------------------------------------*/","#if (FXAA_HLSL_3 == 1)","    #define FxaaInt2 float2","    #define FxaaTex sampler2D","    #define FxaaTexTop(t, p) tex2Dlod(t, float4(p, 0.0, 0.0))","    #define FxaaTexOff(t, p, o, r) tex2Dlod(t, float4(p + (o * r), 0, 0))","#endif","/*--------------------------------------------------------------------------*/","#if (FXAA_HLSL_4 == 1)","    #define FxaaInt2 int2","    struct FxaaTex { SamplerState smpl; Texture2D tex; };","    #define FxaaTexTop(t, p) t.tex.SampleLevel(t.smpl, p, 0.0)","    #define FxaaTexOff(t, p, o, r) t.tex.SampleLevel(t.smpl, p, 0.0, o)","#endif","/*--------------------------------------------------------------------------*/","#if (FXAA_HLSL_5 == 1)","    #define FxaaInt2 int2","    struct FxaaTex { SamplerState smpl; Texture2D tex; };","    #define FxaaTexTop(t, p) t.tex.SampleLevel(t.smpl, p, 0.0)","    #define FxaaTexOff(t, p, o, r) t.tex.SampleLevel(t.smpl, p, 0.0, o)","    #define FxaaTexAlpha4(t, p) t.tex.GatherAlpha(t.smpl, p)","    #define FxaaTexOffAlpha4(t, p, o) t.tex.GatherAlpha(t.smpl, p, o)","    #define FxaaTexGreen4(t, p) t.tex.GatherGreen(t.smpl, p)","    #define FxaaTexOffGreen4(t, p, o) t.tex.GatherGreen(t.smpl, p, o)","#endif","","","/*============================================================================","                   GREEN AS LUMA OPTION SUPPORT FUNCTION","============================================================================*/","#if (FXAA_GREEN_AS_LUMA == 0)","    FxaaFloat FxaaLuma(FxaaFloat4 rgba) { return rgba.w; }","#else","    FxaaFloat FxaaLuma(FxaaFloat4 rgba) { return rgba.y; }","#endif","","","","","/*============================================================================","","                             FXAA3 QUALITY - PC","","============================================================================*/","#if (FXAA_PC == 1)","/*--------------------------------------------------------------------------*/","FxaaFloat4 FxaaPixelShader(","    //","    // Use noperspective interpolation here (turn off perspective interpolation).","    // {xy} = center of pixel","    FxaaFloat2 pos,","    //","    // Used only for FXAA Console, and not used on the 360 version.","    // Use noperspective interpolation here (turn off perspective interpolation).","    // {xy_} = upper left of pixel","    // {_zw} = lower right of pixel","    FxaaFloat4 fxaaConsolePosPos,","    //","    // Input color texture.","    // {rgb_} = color in linear or perceptual color space","    // if (FXAA_GREEN_AS_LUMA == 0)","    //     {__a} = luma in perceptual color space (not linear)","    FxaaTex tex,","    //","    // Only used on the optimized 360 version of FXAA Console.",'    // For everything but 360, just use the same input here as for "tex".',"    // For 360, same texture, just alias with a 2nd sampler.","    // This sampler needs to have an exponent bias of -1.","    FxaaTex fxaaConsole360TexExpBiasNegOne,","    //","    // Only used on the optimized 360 version of FXAA Console.",'    // For everything but 360, just use the same input here as for "tex".',"    // For 360, same texture, just alias with a 3nd sampler.","    // This sampler needs to have an exponent bias of -2.","    FxaaTex fxaaConsole360TexExpBiasNegTwo,","    //","    // Only used on FXAA Quality.","    // This must be from a constant/uniform.","    // {x_} = 1.0/screenWidthInPixels","    // {_y} = 1.0/screenHeightInPixels","    FxaaFloat2 fxaaQualityRcpFrame,","    //","    // Only used on FXAA Console.","    // This must be from a constant/uniform.","    // This effects sub-pixel AA quality and inversely sharpness.","    //   Where N ranges between,","    //     N = 0.50 (default)","    //     N = 0.33 (sharper)","    // {x__} = -N/screenWidthInPixels","    // {_y_} = -N/screenHeightInPixels","    // {_z_} =  N/screenWidthInPixels","    // {__w} =  N/screenHeightInPixels","    FxaaFloat4 fxaaConsoleRcpFrameOpt,","    //","    // Only used on FXAA Console.","    // Not used on 360, but used on PS3 and PC.","    // This must be from a constant/uniform.","    // {x__} = -2.0/screenWidthInPixels","    // {_y_} = -2.0/screenHeightInPixels","    // {_z_} =  2.0/screenWidthInPixels","    // {__w} =  2.0/screenHeightInPixels","    FxaaFloat4 fxaaConsoleRcpFrameOpt2,","    //","    // Only used on FXAA Console.","    // Only used on 360 in place of fxaaConsoleRcpFrameOpt2.","    // This must be from a constant/uniform.","    // {x__} =  8.0/screenWidthInPixels","    // {_y_} =  8.0/screenHeightInPixels","    // {_z_} = -4.0/screenWidthInPixels","    // {__w} = -4.0/screenHeightInPixels","    FxaaFloat4 fxaaConsole360RcpFrameOpt2,","    //","    // Only used on FXAA Quality.","    // This used to be the FXAA_QUALITY_SUBPIX define.","    // It is here now to allow easier tuning.","    // Choose the amount of sub-pixel aliasing removal.","    // This can effect sharpness.","    //   1.00 - upper limit (softer)","    //   0.75 - default amount of filtering","    //   0.50 - lower limit (sharper, less sub-pixel aliasing removal)","    //   0.25 - almost off","    //   0.00 - completely off","    FxaaFloat fxaaQualitySubpix,","    //","    // Only used on FXAA Quality.","    // This used to be the FXAA_QUALITY_EDGE_THRESHOLD define.","    // It is here now to allow easier tuning.","    // The minimum amount of local contrast required to apply algorithm.","    //   0.333 - too little (faster)","    //   0.250 - low quality","    //   0.166 - default","    //   0.125 - high quality","    //   0.063 - overkill (slower)","    FxaaFloat fxaaQualityEdgeThreshold,","    //","    // Only used on FXAA Quality.","    // This used to be the FXAA_QUALITY_EDGE_THRESHOLD_MIN define.","    // It is here now to allow easier tuning.","    // Trims the algorithm from processing darks.","    //   0.0833 - upper limit (default, the start of visible unfiltered edges)","    //   0.0625 - high quality (faster)","    //   0.0312 - visible limit (slower)","    // Special notes when using FXAA_GREEN_AS_LUMA,","    //   Likely want to set this to zero.","    //   As colors that are mostly not-green","    //   will appear very dark in the green channel!","    //   Tune by looking at mostly non-green content,","    //   then start at zero and increase until aliasing is a problem.","    FxaaFloat fxaaQualityEdgeThresholdMin,","    //","    // Only used on FXAA Console.","    // This used to be the FXAA_CONSOLE_EDGE_SHARPNESS define.","    // It is here now to allow easier tuning.","    // This does not effect PS3, as this needs to be compiled in.","    //   Use FXAA_CONSOLE_PS3_EDGE_SHARPNESS for PS3.","    //   Due to the PS3 being ALU bound,","    //   there are only three safe values here: 2 and 4 and 8.","    //   These options use the shaders ability to a free *|/ by 2|4|8.","    // For all other platforms can be a non-power of two.","    //   8.0 is sharper (default!!!)","    //   4.0 is softer","    //   2.0 is really soft (good only for vector graphics inputs)","    FxaaFloat fxaaConsoleEdgeSharpness,","    //","    // Only used on FXAA Console.","    // This used to be the FXAA_CONSOLE_EDGE_THRESHOLD define.","    // It is here now to allow easier tuning.","    // This does not effect PS3, as this needs to be compiled in.","    //   Use FXAA_CONSOLE_PS3_EDGE_THRESHOLD for PS3.","    //   Due to the PS3 being ALU bound,","    //   there are only two safe values here: 1/4 and 1/8.","    //   These options use the shaders ability to a free *|/ by 2|4|8.","    // The console setting has a different mapping than the quality setting.","    // Other platforms can use other values.","    //   0.125 leaves less aliasing, but is softer (default!!!)","    //   0.25 leaves more aliasing, and is sharper","    FxaaFloat fxaaConsoleEdgeThreshold,","    //","    // Only used on FXAA Console.","    // This used to be the FXAA_CONSOLE_EDGE_THRESHOLD_MIN define.","    // It is here now to allow easier tuning.","    // Trims the algorithm from processing darks.","    // The console setting has a different mapping than the quality setting.","    // This only applies when FXAA_EARLY_EXIT is 1.","    // This does not apply to PS3,","    // PS3 was simplified to avoid more shader instructions.","    //   0.06 - faster but more aliasing in darks","    //   0.05 - default","    //   0.04 - slower and less aliasing in darks","    // Special notes when using FXAA_GREEN_AS_LUMA,","    //   Likely want to set this to zero.","    //   As colors that are mostly not-green","    //   will appear very dark in the green channel!","    //   Tune by looking at mostly non-green content,","    //   then start at zero and increase until aliasing is a problem.","    FxaaFloat fxaaConsoleEdgeThresholdMin,","    //","    // Extra constants for 360 FXAA Console only.","    // Use zeros or anything else for other platforms.","    // These must be in physical constant registers and NOT immediates.","    // Immediates will result in compiler un-optimizing.","    // {xyzw} = float4(1.0, -1.0, 0.25, -0.25)","    FxaaFloat4 fxaaConsole360ConstDir",") {","/*--------------------------------------------------------------------------*/","    FxaaFloat2 posM;","    posM.x = pos.x;","    posM.y = pos.y;","    #if (FXAA_GATHER4_ALPHA == 1)","        #if (FXAA_DISCARD == 0)","            FxaaFloat4 rgbyM = FxaaTexTop(tex, posM);","            #if (FXAA_GREEN_AS_LUMA == 0)","                #define lumaM rgbyM.w","            #else","                #define lumaM rgbyM.y","            #endif","        #endif","        #if (FXAA_GREEN_AS_LUMA == 0)","            FxaaFloat4 luma4A = FxaaTexAlpha4(tex, posM);","            FxaaFloat4 luma4B = FxaaTexOffAlpha4(tex, posM, FxaaInt2(-1, -1));","        #else","            FxaaFloat4 luma4A = FxaaTexGreen4(tex, posM);","            FxaaFloat4 luma4B = FxaaTexOffGreen4(tex, posM, FxaaInt2(-1, -1));","        #endif","        #if (FXAA_DISCARD == 1)","            #define lumaM luma4A.w","        #endif","        #define lumaE luma4A.z","        #define lumaS luma4A.x","        #define lumaSE luma4A.y","        #define lumaNW luma4B.w","        #define lumaN luma4B.z","        #define lumaW luma4B.x","    #else","        FxaaFloat4 rgbyM = FxaaTexTop(tex, posM);","        #if (FXAA_GREEN_AS_LUMA == 0)","            #define lumaM rgbyM.w","        #else","            #define lumaM rgbyM.y","        #endif","        #if (FXAA_GLSL_100 == 1)","          FxaaFloat lumaS = FxaaLuma(FxaaTexOff(tex, posM, FxaaFloat2( 0.0, 1.0), fxaaQualityRcpFrame.xy));","          FxaaFloat lumaE = FxaaLuma(FxaaTexOff(tex, posM, FxaaFloat2( 1.0, 0.0), fxaaQualityRcpFrame.xy));","          FxaaFloat lumaN = FxaaLuma(FxaaTexOff(tex, posM, FxaaFloat2( 0.0,-1.0), fxaaQualityRcpFrame.xy));","          FxaaFloat lumaW = FxaaLuma(FxaaTexOff(tex, posM, FxaaFloat2(-1.0, 0.0), fxaaQualityRcpFrame.xy));","        #else","          FxaaFloat lumaS = FxaaLuma(FxaaTexOff(tex, posM, FxaaInt2( 0, 1), fxaaQualityRcpFrame.xy));","          FxaaFloat lumaE = FxaaLuma(FxaaTexOff(tex, posM, FxaaInt2( 1, 0), fxaaQualityRcpFrame.xy));","          FxaaFloat lumaN = FxaaLuma(FxaaTexOff(tex, posM, FxaaInt2( 0,-1), fxaaQualityRcpFrame.xy));","          FxaaFloat lumaW = FxaaLuma(FxaaTexOff(tex, posM, FxaaInt2(-1, 0), fxaaQualityRcpFrame.xy));","        #endif","    #endif","/*--------------------------------------------------------------------------*/","    FxaaFloat maxSM = max(lumaS, lumaM);","    FxaaFloat minSM = min(lumaS, lumaM);","    FxaaFloat maxESM = max(lumaE, maxSM);","    FxaaFloat minESM = min(lumaE, minSM);","    FxaaFloat maxWN = max(lumaN, lumaW);","    FxaaFloat minWN = min(lumaN, lumaW);","    FxaaFloat rangeMax = max(maxWN, maxESM);","    FxaaFloat rangeMin = min(minWN, minESM);","    FxaaFloat rangeMaxScaled = rangeMax * fxaaQualityEdgeThreshold;","    FxaaFloat range = rangeMax - rangeMin;","    FxaaFloat rangeMaxClamped = max(fxaaQualityEdgeThresholdMin, rangeMaxScaled);","    FxaaBool earlyExit = range < rangeMaxClamped;","/*--------------------------------------------------------------------------*/","    if(earlyExit)","        #if (FXAA_DISCARD == 1)","            FxaaDiscard;","        #else","            return rgbyM;","        #endif","/*--------------------------------------------------------------------------*/","    #if (FXAA_GATHER4_ALPHA == 0)","        #if (FXAA_GLSL_100 == 1)","          FxaaFloat lumaNW = FxaaLuma(FxaaTexOff(tex, posM, FxaaFloat2(-1.0,-1.0), fxaaQualityRcpFrame.xy));","          FxaaFloat lumaSE = FxaaLuma(FxaaTexOff(tex, posM, FxaaFloat2( 1.0, 1.0), fxaaQualityRcpFrame.xy));","          FxaaFloat lumaNE = FxaaLuma(FxaaTexOff(tex, posM, FxaaFloat2( 1.0,-1.0), fxaaQualityRcpFrame.xy));","          FxaaFloat lumaSW = FxaaLuma(FxaaTexOff(tex, posM, FxaaFloat2(-1.0, 1.0), fxaaQualityRcpFrame.xy));","        #else","          FxaaFloat lumaNW = FxaaLuma(FxaaTexOff(tex, posM, FxaaInt2(-1,-1), fxaaQualityRcpFrame.xy));","          FxaaFloat lumaSE = FxaaLuma(FxaaTexOff(tex, posM, FxaaInt2( 1, 1), fxaaQualityRcpFrame.xy));","          FxaaFloat lumaNE = FxaaLuma(FxaaTexOff(tex, posM, FxaaInt2( 1,-1), fxaaQualityRcpFrame.xy));","          FxaaFloat lumaSW = FxaaLuma(FxaaTexOff(tex, posM, FxaaInt2(-1, 1), fxaaQualityRcpFrame.xy));","        #endif","    #else","        FxaaFloat lumaNE = FxaaLuma(FxaaTexOff(tex, posM, FxaaInt2(1, -1), fxaaQualityRcpFrame.xy));","        FxaaFloat lumaSW = FxaaLuma(FxaaTexOff(tex, posM, FxaaInt2(-1, 1), fxaaQualityRcpFrame.xy));","    #endif","/*--------------------------------------------------------------------------*/","    FxaaFloat lumaNS = lumaN + lumaS;","    FxaaFloat lumaWE = lumaW + lumaE;","    FxaaFloat subpixRcpRange = 1.0/range;","    FxaaFloat subpixNSWE = lumaNS + lumaWE;","    FxaaFloat edgeHorz1 = (-2.0 * lumaM) + lumaNS;","    FxaaFloat edgeVert1 = (-2.0 * lumaM) + lumaWE;","/*--------------------------------------------------------------------------*/","    FxaaFloat lumaNESE = lumaNE + lumaSE;","    FxaaFloat lumaNWNE = lumaNW + lumaNE;","    FxaaFloat edgeHorz2 = (-2.0 * lumaE) + lumaNESE;","    FxaaFloat edgeVert2 = (-2.0 * lumaN) + lumaNWNE;","/*--------------------------------------------------------------------------*/","    FxaaFloat lumaNWSW = lumaNW + lumaSW;","    FxaaFloat lumaSWSE = lumaSW + lumaSE;","    FxaaFloat edgeHorz4 = (abs(edgeHorz1) * 2.0) + abs(edgeHorz2);","    FxaaFloat edgeVert4 = (abs(edgeVert1) * 2.0) + abs(edgeVert2);","    FxaaFloat edgeHorz3 = (-2.0 * lumaW) + lumaNWSW;","    FxaaFloat edgeVert3 = (-2.0 * lumaS) + lumaSWSE;","    FxaaFloat edgeHorz = abs(edgeHorz3) + edgeHorz4;","    FxaaFloat edgeVert = abs(edgeVert3) + edgeVert4;","/*--------------------------------------------------------------------------*/","    FxaaFloat subpixNWSWNESE = lumaNWSW + lumaNESE;","    FxaaFloat lengthSign = fxaaQualityRcpFrame.x;","    FxaaBool horzSpan = edgeHorz >= edgeVert;","    FxaaFloat subpixA = subpixNSWE * 2.0 + subpixNWSWNESE;","/*--------------------------------------------------------------------------*/","    if(!horzSpan) lumaN = lumaW;","    if(!horzSpan) lumaS = lumaE;","    if(horzSpan) lengthSign = fxaaQualityRcpFrame.y;","    FxaaFloat subpixB = (subpixA * (1.0/12.0)) - lumaM;","/*--------------------------------------------------------------------------*/","    FxaaFloat gradientN = lumaN - lumaM;","    FxaaFloat gradientS = lumaS - lumaM;","    FxaaFloat lumaNN = lumaN + lumaM;","    FxaaFloat lumaSS = lumaS + lumaM;","    FxaaBool pairN = abs(gradientN) >= abs(gradientS);","    FxaaFloat gradient = max(abs(gradientN), abs(gradientS));","    if(pairN) lengthSign = -lengthSign;","    FxaaFloat subpixC = FxaaSat(abs(subpixB) * subpixRcpRange);","/*--------------------------------------------------------------------------*/","    FxaaFloat2 posB;","    posB.x = posM.x;","    posB.y = posM.y;","    FxaaFloat2 offNP;","    offNP.x = (!horzSpan) ? 0.0 : fxaaQualityRcpFrame.x;","    offNP.y = ( horzSpan) ? 0.0 : fxaaQualityRcpFrame.y;","    if(!horzSpan) posB.x += lengthSign * 0.5;","    if( horzSpan) posB.y += lengthSign * 0.5;","/*--------------------------------------------------------------------------*/","    FxaaFloat2 posN;","    posN.x = posB.x - offNP.x * FXAA_QUALITY_P0;","    posN.y = posB.y - offNP.y * FXAA_QUALITY_P0;","    FxaaFloat2 posP;","    posP.x = posB.x + offNP.x * FXAA_QUALITY_P0;","    posP.y = posB.y + offNP.y * FXAA_QUALITY_P0;","    FxaaFloat subpixD = ((-2.0)*subpixC) + 3.0;","    FxaaFloat lumaEndN = FxaaLuma(FxaaTexTop(tex, posN));","    FxaaFloat subpixE = subpixC * subpixC;","    FxaaFloat lumaEndP = FxaaLuma(FxaaTexTop(tex, posP));","/*--------------------------------------------------------------------------*/","    if(!pairN) lumaNN = lumaSS;","    FxaaFloat gradientScaled = gradient * 1.0/4.0;","    FxaaFloat lumaMM = lumaM - lumaNN * 0.5;","    FxaaFloat subpixF = subpixD * subpixE;","    FxaaBool lumaMLTZero = lumaMM < 0.0;","/*--------------------------------------------------------------------------*/","    lumaEndN -= lumaNN * 0.5;","    lumaEndP -= lumaNN * 0.5;","    FxaaBool doneN = abs(lumaEndN) >= gradientScaled;","    FxaaBool doneP = abs(lumaEndP) >= gradientScaled;","    if(!doneN) posN.x -= offNP.x * FXAA_QUALITY_P1;","    if(!doneN) posN.y -= offNP.y * FXAA_QUALITY_P1;","    FxaaBool doneNP = (!doneN) || (!doneP);","    if(!doneP) posP.x += offNP.x * FXAA_QUALITY_P1;","    if(!doneP) posP.y += offNP.y * FXAA_QUALITY_P1;","/*--------------------------------------------------------------------------*/","    if(doneNP) {","        if(!doneN) lumaEndN = FxaaLuma(FxaaTexTop(tex, posN.xy));","        if(!doneP) lumaEndP = FxaaLuma(FxaaTexTop(tex, posP.xy));","        if(!doneN) lumaEndN = lumaEndN - lumaNN * 0.5;","        if(!doneP) lumaEndP = lumaEndP - lumaNN * 0.5;","        doneN = abs(lumaEndN) >= gradientScaled;","        doneP = abs(lumaEndP) >= gradientScaled;","        if(!doneN) posN.x -= offNP.x * FXAA_QUALITY_P2;","        if(!doneN) posN.y -= offNP.y * FXAA_QUALITY_P2;","        doneNP = (!doneN) || (!doneP);","        if(!doneP) posP.x += offNP.x * FXAA_QUALITY_P2;","        if(!doneP) posP.y += offNP.y * FXAA_QUALITY_P2;","/*--------------------------------------------------------------------------*/","        #if (FXAA_QUALITY_PS > 3)","        if(doneNP) {","            if(!doneN) lumaEndN = FxaaLuma(FxaaTexTop(tex, posN.xy));","            if(!doneP) lumaEndP = FxaaLuma(FxaaTexTop(tex, posP.xy));","            if(!doneN) lumaEndN = lumaEndN - lumaNN * 0.5;","            if(!doneP) lumaEndP = lumaEndP - lumaNN * 0.5;","            doneN = abs(lumaEndN) >= gradientScaled;","            doneP = abs(lumaEndP) >= gradientScaled;","            if(!doneN) posN.x -= offNP.x * FXAA_QUALITY_P3;","            if(!doneN) posN.y -= offNP.y * FXAA_QUALITY_P3;","            doneNP = (!doneN) || (!doneP);","            if(!doneP) posP.x += offNP.x * FXAA_QUALITY_P3;","            if(!doneP) posP.y += offNP.y * FXAA_QUALITY_P3;","/*--------------------------------------------------------------------------*/","            #if (FXAA_QUALITY_PS > 4)","            if(doneNP) {","                if(!doneN) lumaEndN = FxaaLuma(FxaaTexTop(tex, posN.xy));","                if(!doneP) lumaEndP = FxaaLuma(FxaaTexTop(tex, posP.xy));","                if(!doneN) lumaEndN = lumaEndN - lumaNN * 0.5;","                if(!doneP) lumaEndP = lumaEndP - lumaNN * 0.5;","                doneN = abs(lumaEndN) >= gradientScaled;","                doneP = abs(lumaEndP) >= gradientScaled;","                if(!doneN) posN.x -= offNP.x * FXAA_QUALITY_P4;","                if(!doneN) posN.y -= offNP.y * FXAA_QUALITY_P4;","                doneNP = (!doneN) || (!doneP);","                if(!doneP) posP.x += offNP.x * FXAA_QUALITY_P4;","                if(!doneP) posP.y += offNP.y * FXAA_QUALITY_P4;","/*--------------------------------------------------------------------------*/","                #if (FXAA_QUALITY_PS > 5)","                if(doneNP) {","                    if(!doneN) lumaEndN = FxaaLuma(FxaaTexTop(tex, posN.xy));","                    if(!doneP) lumaEndP = FxaaLuma(FxaaTexTop(tex, posP.xy));","                    if(!doneN) lumaEndN = lumaEndN - lumaNN * 0.5;","                    if(!doneP) lumaEndP = lumaEndP - lumaNN * 0.5;","                    doneN = abs(lumaEndN) >= gradientScaled;","                    doneP = abs(lumaEndP) >= gradientScaled;","                    if(!doneN) posN.x -= offNP.x * FXAA_QUALITY_P5;","                    if(!doneN) posN.y -= offNP.y * FXAA_QUALITY_P5;","                    doneNP = (!doneN) || (!doneP);","                    if(!doneP) posP.x += offNP.x * FXAA_QUALITY_P5;","                    if(!doneP) posP.y += offNP.y * FXAA_QUALITY_P5;","/*--------------------------------------------------------------------------*/","                    #if (FXAA_QUALITY_PS > 6)","                    if(doneNP) {","                        if(!doneN) lumaEndN = FxaaLuma(FxaaTexTop(tex, posN.xy));","                        if(!doneP) lumaEndP = FxaaLuma(FxaaTexTop(tex, posP.xy));","                        if(!doneN) lumaEndN = lumaEndN - lumaNN * 0.5;","                        if(!doneP) lumaEndP = lumaEndP - lumaNN * 0.5;","                        doneN = abs(lumaEndN) >= gradientScaled;","                        doneP = abs(lumaEndP) >= gradientScaled;","                        if(!doneN) posN.x -= offNP.x * FXAA_QUALITY_P6;","                        if(!doneN) posN.y -= offNP.y * FXAA_QUALITY_P6;","                        doneNP = (!doneN) || (!doneP);","                        if(!doneP) posP.x += offNP.x * FXAA_QUALITY_P6;","                        if(!doneP) posP.y += offNP.y * FXAA_QUALITY_P6;","/*--------------------------------------------------------------------------*/","                        #if (FXAA_QUALITY_PS > 7)","                        if(doneNP) {","                            if(!doneN) lumaEndN = FxaaLuma(FxaaTexTop(tex, posN.xy));","                            if(!doneP) lumaEndP = FxaaLuma(FxaaTexTop(tex, posP.xy));","                            if(!doneN) lumaEndN = lumaEndN - lumaNN * 0.5;","                            if(!doneP) lumaEndP = lumaEndP - lumaNN * 0.5;","                            doneN = abs(lumaEndN) >= gradientScaled;","                            doneP = abs(lumaEndP) >= gradientScaled;","                            if(!doneN) posN.x -= offNP.x * FXAA_QUALITY_P7;","                            if(!doneN) posN.y -= offNP.y * FXAA_QUALITY_P7;","                            doneNP = (!doneN) || (!doneP);","                            if(!doneP) posP.x += offNP.x * FXAA_QUALITY_P7;","                            if(!doneP) posP.y += offNP.y * FXAA_QUALITY_P7;","/*--------------------------------------------------------------------------*/","    #if (FXAA_QUALITY_PS > 8)","    if(doneNP) {","        if(!doneN) lumaEndN = FxaaLuma(FxaaTexTop(tex, posN.xy));","        if(!doneP) lumaEndP = FxaaLuma(FxaaTexTop(tex, posP.xy));","        if(!doneN) lumaEndN = lumaEndN - lumaNN * 0.5;","        if(!doneP) lumaEndP = lumaEndP - lumaNN * 0.5;","        doneN = abs(lumaEndN) >= gradientScaled;","        doneP = abs(lumaEndP) >= gradientScaled;","        if(!doneN) posN.x -= offNP.x * FXAA_QUALITY_P8;","        if(!doneN) posN.y -= offNP.y * FXAA_QUALITY_P8;","        doneNP = (!doneN) || (!doneP);","        if(!doneP) posP.x += offNP.x * FXAA_QUALITY_P8;","        if(!doneP) posP.y += offNP.y * FXAA_QUALITY_P8;","/*--------------------------------------------------------------------------*/","        #if (FXAA_QUALITY_PS > 9)","        if(doneNP) {","            if(!doneN) lumaEndN = FxaaLuma(FxaaTexTop(tex, posN.xy));","            if(!doneP) lumaEndP = FxaaLuma(FxaaTexTop(tex, posP.xy));","            if(!doneN) lumaEndN = lumaEndN - lumaNN * 0.5;","            if(!doneP) lumaEndP = lumaEndP - lumaNN * 0.5;","            doneN = abs(lumaEndN) >= gradientScaled;","            doneP = abs(lumaEndP) >= gradientScaled;","            if(!doneN) posN.x -= offNP.x * FXAA_QUALITY_P9;","            if(!doneN) posN.y -= offNP.y * FXAA_QUALITY_P9;","            doneNP = (!doneN) || (!doneP);","            if(!doneP) posP.x += offNP.x * FXAA_QUALITY_P9;","            if(!doneP) posP.y += offNP.y * FXAA_QUALITY_P9;","/*--------------------------------------------------------------------------*/","            #if (FXAA_QUALITY_PS > 10)","            if(doneNP) {","                if(!doneN) lumaEndN = FxaaLuma(FxaaTexTop(tex, posN.xy));","                if(!doneP) lumaEndP = FxaaLuma(FxaaTexTop(tex, posP.xy));","                if(!doneN) lumaEndN = lumaEndN - lumaNN * 0.5;","                if(!doneP) lumaEndP = lumaEndP - lumaNN * 0.5;","                doneN = abs(lumaEndN) >= gradientScaled;","                doneP = abs(lumaEndP) >= gradientScaled;","                if(!doneN) posN.x -= offNP.x * FXAA_QUALITY_P10;","                if(!doneN) posN.y -= offNP.y * FXAA_QUALITY_P10;","                doneNP = (!doneN) || (!doneP);","                if(!doneP) posP.x += offNP.x * FXAA_QUALITY_P10;","                if(!doneP) posP.y += offNP.y * FXAA_QUALITY_P10;","/*--------------------------------------------------------------------------*/","                #if (FXAA_QUALITY_PS > 11)","                if(doneNP) {","                    if(!doneN) lumaEndN = FxaaLuma(FxaaTexTop(tex, posN.xy));","                    if(!doneP) lumaEndP = FxaaLuma(FxaaTexTop(tex, posP.xy));","                    if(!doneN) lumaEndN = lumaEndN - lumaNN * 0.5;","                    if(!doneP) lumaEndP = lumaEndP - lumaNN * 0.5;","                    doneN = abs(lumaEndN) >= gradientScaled;","                    doneP = abs(lumaEndP) >= gradientScaled;","                    if(!doneN) posN.x -= offNP.x * FXAA_QUALITY_P11;","                    if(!doneN) posN.y -= offNP.y * FXAA_QUALITY_P11;","                    doneNP = (!doneN) || (!doneP);","                    if(!doneP) posP.x += offNP.x * FXAA_QUALITY_P11;","                    if(!doneP) posP.y += offNP.y * FXAA_QUALITY_P11;","/*--------------------------------------------------------------------------*/","                    #if (FXAA_QUALITY_PS > 12)","                    if(doneNP) {","                        if(!doneN) lumaEndN = FxaaLuma(FxaaTexTop(tex, posN.xy));","                        if(!doneP) lumaEndP = FxaaLuma(FxaaTexTop(tex, posP.xy));","                        if(!doneN) lumaEndN = lumaEndN - lumaNN * 0.5;","                        if(!doneP) lumaEndP = lumaEndP - lumaNN * 0.5;","                        doneN = abs(lumaEndN) >= gradientScaled;","                        doneP = abs(lumaEndP) >= gradientScaled;","                        if(!doneN) posN.x -= offNP.x * FXAA_QUALITY_P12;","                        if(!doneN) posN.y -= offNP.y * FXAA_QUALITY_P12;","                        doneNP = (!doneN) || (!doneP);","                        if(!doneP) posP.x += offNP.x * FXAA_QUALITY_P12;","                        if(!doneP) posP.y += offNP.y * FXAA_QUALITY_P12;","/*--------------------------------------------------------------------------*/","                    }","                    #endif","/*--------------------------------------------------------------------------*/","                }","                #endif","/*--------------------------------------------------------------------------*/","            }","            #endif","/*--------------------------------------------------------------------------*/","        }","        #endif","/*--------------------------------------------------------------------------*/","    }","    #endif","/*--------------------------------------------------------------------------*/","                        }","                        #endif","/*--------------------------------------------------------------------------*/","                    }","                    #endif","/*--------------------------------------------------------------------------*/","                }","                #endif","/*--------------------------------------------------------------------------*/","            }","            #endif","/*--------------------------------------------------------------------------*/","        }","        #endif","/*--------------------------------------------------------------------------*/","    }","/*--------------------------------------------------------------------------*/","    FxaaFloat dstN = posM.x - posN.x;","    FxaaFloat dstP = posP.x - posM.x;","    if(!horzSpan) dstN = posM.y - posN.y;","    if(!horzSpan) dstP = posP.y - posM.y;","/*--------------------------------------------------------------------------*/","    FxaaBool goodSpanN = (lumaEndN < 0.0) != lumaMLTZero;","    FxaaFloat spanLength = (dstP + dstN);","    FxaaBool goodSpanP = (lumaEndP < 0.0) != lumaMLTZero;","    FxaaFloat spanLengthRcp = 1.0/spanLength;","/*--------------------------------------------------------------------------*/","    FxaaBool directionN = dstN < dstP;","    FxaaFloat dst = min(dstN, dstP);","    FxaaBool goodSpan = directionN ? goodSpanN : goodSpanP;","    FxaaFloat subpixG = subpixF * subpixF;","    FxaaFloat pixelOffset = (dst * (-spanLengthRcp)) + 0.5;","    FxaaFloat subpixH = subpixG * fxaaQualitySubpix;","/*--------------------------------------------------------------------------*/","    FxaaFloat pixelOffsetGood = goodSpan ? pixelOffset : 0.0;","    FxaaFloat pixelOffsetSubpix = max(pixelOffsetGood, subpixH);","    if(!horzSpan) posM.x += pixelOffsetSubpix * lengthSign;","    if( horzSpan) posM.y += pixelOffsetSubpix * lengthSign;","    #if (FXAA_DISCARD == 1)","        return FxaaTexTop(tex, posM);","    #else","        return FxaaFloat4(FxaaTexTop(tex, posM).xyz, lumaM);","    #endif","}","/*==========================================================================*/","#endif","","void main() {","  gl_FragColor = FxaaPixelShader(","    vUv,","    vec4(0.0),","    tDiffuse,","    tDiffuse,","    tDiffuse,","    resolution,","    vec4(0.0),","    vec4(0.0),","    vec4(0.0),","    0.75,","    0.166,","    0.0833,","    0.0,","    0.0,","    0.0,","    vec4(0.0)","  );","","  // TODO avoid querying texture twice for same texel","  gl_FragColor.a = texture2D(tDiffuse, vUv).a;","}"].join("\n")}},836:(e,t,a)=>{"use strict";a.r(t);var r=a(705),i={};for(const e in r)"default"!==e&&(i[e]=()=>r[e]);a.d(t,i);var o=a(517);i={};for(const e in o)"default"!==e&&(i[e]=()=>o[e]);a.d(t,i);var n=a(479);i={};for(const e in n)"default"!==e&&(i[e]=()=>n[e]);a.d(t,i);var s=a(506);i={};for(const e in s)"default"!==e&&(i[e]=()=>s[e]);a.d(t,i);var l=a(833);i={};for(const e in l)"default"!==e&&(i[e]=()=>l[e]);a.d(t,i),i={};for(const e in l)"default"!==e&&(i[e]=()=>l[e]);a.d(t,i);var u=a(86);i={};for(const e in u)"default"!==e&&(i[e]=()=>u[e]);a.d(t,i);var d=a(787);i={};for(const e in d)"default"!==e&&(i[e]=()=>d[e]);a.d(t,i);var h=a(535);i={};for(const e in h)"default"!==e&&(i[e]=()=>h[e]);a.d(t,i);var c=a(443);i={};for(const e in c)"default"!==e&&(i[e]=()=>c[e]);a.d(t,i);var p=a(983);i={};for(const e in p)"default"!==e&&(i[e]=()=>p[e]);a.d(t,i);var f=a(679);i={};for(const e in f)"default"!==e&&(i[e]=()=>f[e]);a.d(t,i);var m=a(262);i={};for(const e in m)"default"!==e&&(i[e]=()=>m[e]);a.d(t,i);var E=a(346);i={};for(const e in E)"default"!==e&&(i[e]=()=>E[e]);a.d(t,i);var T=a(921);i={};for(const e in T)"default"!==e&&(i[e]=()=>T[e]);a.d(t,i);var v=a(219);i={};for(const e in v)"default"!==e&&(i[e]=()=>v[e]);a.d(t,i);var x=a(62);i={};for(const e in x)"default"!==e&&(i[e]=()=>x[e]);a.d(t,i);var g=a(890);i={};for(const e in g)"default"!==e&&(i[e]=()=>g[e]);a.d(t,i);var y=a(5);i={};for(const e in y)"default"!==e&&(i[e]=()=>y[e]);a.d(t,i);var A=a(29);i={};for(const e in A)"default"!==e&&(i[e]=()=>A[e]);a.d(t,i);var R=a(216);i={};for(const e in R)"default"!==e&&(i[e]=()=>R[e]);a.d(t,i);var b=a(258);i={};for(const e in b)"default"!==e&&(i[e]=()=>b[e]);a.d(t,i)},949:(e,t)=>{var a;void 0===(a=function(e){"use strict";var t,a={Linear:{None:function(e){return e}},Quadratic:{In:function(e){return e*e},Out:function(e){return e*(2-e)},InOut:function(e){return(e*=2)<1?.5*e*e:-.5*(--e*(e-2)-1)}},Cubic:{In:function(e){return e*e*e},Out:function(e){return--e*e*e+1},InOut:function(e){return(e*=2)<1?.5*e*e*e:.5*((e-=2)*e*e+2)}},Quartic:{In:function(e){return e*e*e*e},Out:function(e){return 1- --e*e*e*e},InOut:function(e){return(e*=2)<1?.5*e*e*e*e:-.5*((e-=2)*e*e*e-2)}},Quintic:{In:function(e){return e*e*e*e*e},Out:function(e){return--e*e*e*e*e+1},InOut:function(e){return(e*=2)<1?.5*e*e*e*e*e:.5*((e-=2)*e*e*e*e+2)}},Sinusoidal:{In:function(e){return 1-Math.cos(e*Math.PI/2)},Out:function(e){return Math.sin(e*Math.PI/2)},InOut:function(e){return.5*(1-Math.cos(Math.PI*e))}},Exponential:{In:function(e){return 0===e?0:Math.pow(1024,e-1)},Out:function(e){return 1===e?1:1-Math.pow(2,-10*e)},InOut:function(e){return 0===e?0:1===e?1:(e*=2)<1?.5*Math.pow(1024,e-1):.5*(2-Math.pow(2,-10*(e-1)))}},Circular:{In:function(e){return 1-Math.sqrt(1-e*e)},Out:function(e){return Math.sqrt(1- --e*e)},InOut:function(e){return(e*=2)<1?-.5*(Math.sqrt(1-e*e)-1):.5*(Math.sqrt(1-(e-=2)*e)+1)}},Elastic:{In:function(e){return 0===e?0:1===e?1:-Math.pow(2,10*(e-1))*Math.sin(5*(e-1.1)*Math.PI)},Out:function(e){return 0===e?0:1===e?1:Math.pow(2,-10*e)*Math.sin(5*(e-.1)*Math.PI)+1},InOut:function(e){return 0===e?0:1===e?1:(e*=2)<1?-.5*Math.pow(2,10*(e-1))*Math.sin(5*(e-1.1)*Math.PI):.5*Math.pow(2,-10*(e-1))*Math.sin(5*(e-1.1)*Math.PI)+1}},Back:{In:function(e){var t=1.70158;return e*e*((t+1)*e-t)},Out:function(e){var t=1.70158;return--e*e*((t+1)*e+t)+1},InOut:function(e){var t=2.5949095;return(e*=2)<1?e*e*((t+1)*e-t)*.5:.5*((e-=2)*e*((t+1)*e+t)+2)}},Bounce:{In:function(e){return 1-a.Bounce.Out(1-e)},Out:function(e){return e<1/2.75?7.5625*e*e:e<2/2.75?7.5625*(e-=1.5/2.75)*e+.75:e<2.5/2.75?7.5625*(e-=2.25/2.75)*e+.9375:7.5625*(e-=2.625/2.75)*e+.984375},InOut:function(e){return e<.5?.5*a.Bounce.In(2*e):.5*a.Bounce.Out(2*e-1)+.5}}},r="undefined"==typeof self&&"undefined"!=typeof process&&process.hrtime?function(){var e=process.hrtime();return 1e3*e[0]+e[1]/1e6}:"undefined"!=typeof self&&void 0!==self.performance&&void 0!==self.performance.now?self.performance.now.bind(self.performance):void 0!==Date.now?Date.now:function(){return(new Date).getTime()},i=function(){function e(){this._tweens={},this._tweensAddedDuringUpdate={}}return e.prototype.getAll=function(){var e=this;return Object.keys(this._tweens).map((function(t){return e._tweens[t]}))},e.prototype.removeAll=function(){this._tweens={}},e.prototype.add=function(e){this._tweens[e.getId()]=e,this._tweensAddedDuringUpdate[e.getId()]=e},e.prototype.remove=function(e){delete this._tweens[e.getId()],delete this._tweensAddedDuringUpdate[e.getId()]},e.prototype.update=function(e,t){void 0===e&&(e=r()),void 0===t&&(t=!1);var a=Object.keys(this._tweens);if(0===a.length)return!1;for(;a.length>0;){this._tweensAddedDuringUpdate={};for(var i=0;i<a.length;i++){var o=this._tweens[a[i]],n=!t;o&&!1===o.update(e,n)&&!t&&delete this._tweens[a[i]]}a=Object.keys(this._tweensAddedDuringUpdate)}return!0},e}(),o={Linear:function(e,t){var a=e.length-1,r=a*t,i=Math.floor(r),n=o.Utils.Linear;return t<0?n(e[0],e[1],r):t>1?n(e[a],e[a-1],a-r):n(e[i],e[i+1>a?a:i+1],r-i)},Bezier:function(e,t){for(var a=0,r=e.length-1,i=Math.pow,n=o.Utils.Bernstein,s=0;s<=r;s++)a+=i(1-t,r-s)*i(t,s)*e[s]*n(r,s);return a},CatmullRom:function(e,t){var a=e.length-1,r=a*t,i=Math.floor(r),n=o.Utils.CatmullRom;return e[0]===e[a]?(t<0&&(i=Math.floor(r=a*(1+t))),n(e[(i-1+a)%a],e[i],e[(i+1)%a],e[(i+2)%a],r-i)):t<0?e[0]-(n(e[0],e[0],e[1],e[1],-r)-e[0]):t>1?e[a]-(n(e[a],e[a],e[a-1],e[a-1],r-a)-e[a]):n(e[i?i-1:0],e[i],e[a<i+1?a:i+1],e[a<i+2?a:i+2],r-i)},Utils:{Linear:function(e,t,a){return(t-e)*a+e},Bernstein:function(e,t){var a=o.Utils.Factorial;return a(e)/a(t)/a(e-t)},Factorial:(t=[1],function(e){var a=1;if(t[e])return t[e];for(var r=e;r>1;r--)a*=r;return t[e]=a,a}),CatmullRom:function(e,t,a,r,i){var o=.5*(a-e),n=.5*(r-t),s=i*i;return(2*t-2*a+o+n)*(i*s)+(-3*t+3*a-2*o-n)*s+o*i+t}}},n=function(){function e(){}return e.nextId=function(){return e._nextId++},e._nextId=0,e}(),s=new i,l=function(){function e(e,t){void 0===t&&(t=s),this._object=e,this._group=t,this._isPaused=!1,this._pauseStart=0,this._valuesStart={},this._valuesEnd={},this._valuesStartRepeat={},this._duration=1e3,this._initialRepeat=0,this._repeat=0,this._yoyo=!1,this._isPlaying=!1,this._reversed=!1,this._delayTime=0,this._startTime=0,this._easingFunction=a.Linear.None,this._interpolationFunction=o.Linear,this._chainedTweens=[],this._onStartCallbackFired=!1,this._id=n.nextId(),this._isChainStopped=!1,this._goToEnd=!1}return e.prototype.getId=function(){return this._id},e.prototype.isPlaying=function(){return this._isPlaying},e.prototype.isPaused=function(){return this._isPaused},e.prototype.to=function(e,t){return this._valuesEnd=Object.create(e),void 0!==t&&(this._duration=t),this},e.prototype.duration=function(e){return this._duration=e,this},e.prototype.start=function(e){if(this._isPlaying)return this;if(this._group&&this._group.add(this),this._repeat=this._initialRepeat,this._reversed)for(var t in this._reversed=!1,this._valuesStartRepeat)this._swapEndStartRepeatValues(t),this._valuesStart[t]=this._valuesStartRepeat[t];return this._isPlaying=!0,this._isPaused=!1,this._onStartCallbackFired=!1,this._isChainStopped=!1,this._startTime=void 0!==e?"string"==typeof e?r()+parseFloat(e):e:r(),this._startTime+=this._delayTime,this._setupProperties(this._object,this._valuesStart,this._valuesEnd,this._valuesStartRepeat),this},e.prototype._setupProperties=function(e,t,a,r){for(var i in a){var o=e[i],n=Array.isArray(o),s=n?"array":typeof o,l=!n&&Array.isArray(a[i]);if("undefined"!==s&&"function"!==s){if(l){var u=a[i];if(0===u.length)continue;u=u.map(this._handleRelativeValue.bind(this,o)),a[i]=[o].concat(u)}if("object"!==s&&!n||!o||l)void 0===t[i]&&(t[i]=o),n||(t[i]*=1),r[i]=l?a[i].slice().reverse():t[i]||0;else{for(var d in t[i]=n?[]:{},o)t[i][d]=o[d];r[i]=n?[]:{},this._setupProperties(o,t[i],a[i],r[i])}}}},e.prototype.stop=function(){return this._isChainStopped||(this._isChainStopped=!0,this.stopChainedTweens()),this._isPlaying?(this._group&&this._group.remove(this),this._isPlaying=!1,this._isPaused=!1,this._onStopCallback&&this._onStopCallback(this._object),this):this},e.prototype.end=function(){return this._goToEnd=!0,this.update(1/0),this},e.prototype.pause=function(e){return void 0===e&&(e=r()),this._isPaused||!this._isPlaying||(this._isPaused=!0,this._pauseStart=e,this._group&&this._group.remove(this)),this},e.prototype.resume=function(e){return void 0===e&&(e=r()),this._isPaused&&this._isPlaying?(this._isPaused=!1,this._startTime+=e-this._pauseStart,this._pauseStart=0,this._group&&this._group.add(this),this):this},e.prototype.stopChainedTweens=function(){for(var e=0,t=this._chainedTweens.length;e<t;e++)this._chainedTweens[e].stop();return this},e.prototype.group=function(e){return this._group=e,this},e.prototype.delay=function(e){return this._delayTime=e,this},e.prototype.repeat=function(e){return this._initialRepeat=e,this._repeat=e,this},e.prototype.repeatDelay=function(e){return this._repeatDelayTime=e,this},e.prototype.yoyo=function(e){return this._yoyo=e,this},e.prototype.easing=function(e){return this._easingFunction=e,this},e.prototype.interpolation=function(e){return this._interpolationFunction=e,this},e.prototype.chain=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return this._chainedTweens=e,this},e.prototype.onStart=function(e){return this._onStartCallback=e,this},e.prototype.onUpdate=function(e){return this._onUpdateCallback=e,this},e.prototype.onRepeat=function(e){return this._onRepeatCallback=e,this},e.prototype.onComplete=function(e){return this._onCompleteCallback=e,this},e.prototype.onStop=function(e){return this._onStopCallback=e,this},e.prototype.update=function(e,t){if(void 0===e&&(e=r()),void 0===t&&(t=!0),this._isPaused)return!0;var a,i,o=this._startTime+this._duration;if(!this._goToEnd&&!this._isPlaying){if(e>o)return!1;t&&this.start(e)}if(this._goToEnd=!1,e<this._startTime)return!0;!1===this._onStartCallbackFired&&(this._onStartCallback&&this._onStartCallback(this._object),this._onStartCallbackFired=!0),i=(e-this._startTime)/this._duration,i=0===this._duration||i>1?1:i;var n=this._easingFunction(i);if(this._updateProperties(this._object,this._valuesStart,this._valuesEnd,n),this._onUpdateCallback&&this._onUpdateCallback(this._object,i),1===i){if(this._repeat>0){for(a in isFinite(this._repeat)&&this._repeat--,this._valuesStartRepeat)this._yoyo||"string"!=typeof this._valuesEnd[a]||(this._valuesStartRepeat[a]=this._valuesStartRepeat[a]+parseFloat(this._valuesEnd[a])),this._yoyo&&this._swapEndStartRepeatValues(a),this._valuesStart[a]=this._valuesStartRepeat[a];return this._yoyo&&(this._reversed=!this._reversed),void 0!==this._repeatDelayTime?this._startTime=e+this._repeatDelayTime:this._startTime=e+this._delayTime,this._onRepeatCallback&&this._onRepeatCallback(this._object),!0}this._onCompleteCallback&&this._onCompleteCallback(this._object);for(var s=0,l=this._chainedTweens.length;s<l;s++)this._chainedTweens[s].start(this._startTime+this._duration);return this._isPlaying=!1,!1}return!0},e.prototype._updateProperties=function(e,t,a,r){for(var i in a)if(void 0!==t[i]){var o=t[i]||0,n=a[i],s=Array.isArray(e[i]),l=Array.isArray(n);!s&&l?e[i]=this._interpolationFunction(n,r):"object"==typeof n&&n?this._updateProperties(e[i],o,n,r):"number"==typeof(n=this._handleRelativeValue(o,n))&&(e[i]=o+(n-o)*r)}},e.prototype._handleRelativeValue=function(e,t){return"string"!=typeof t?t:"+"===t.charAt(0)||"-"===t.charAt(0)?e+parseFloat(t):parseFloat(t)},e.prototype._swapEndStartRepeatValues=function(e){var t=this._valuesStartRepeat[e],a=this._valuesEnd[e];this._valuesStartRepeat[e]="string"==typeof a?this._valuesStartRepeat[e]+parseFloat(a):this._valuesEnd[e],this._valuesEnd[e]=t},e}(),u="18.6.4",d=n.nextId,h=s,c=h.getAll.bind(h),p=h.removeAll.bind(h),f=h.add.bind(h),m=h.remove.bind(h),E=h.update.bind(h),T={Easing:a,Group:i,Interpolation:o,now:r,Sequence:n,nextId:d,Tween:l,VERSION:u,getAll:c,removeAll:p,add:f,remove:m,update:E};e.Easing=a,e.Group=i,e.Interpolation=o,e.Sequence=n,e.Tween=l,e.VERSION=u,e.add=f,e.default=T,e.getAll=c,e.nextId=d,e.now=r,e.remove=m,e.removeAll=p,e.update=E,Object.defineProperty(e,"__esModule",{value:!0})}.apply(t,[t]))||(e.exports=a)},353:(e,t,a)=>{"use strict";a.r(t);var r=a(949),i={};for(const e in r)"default"!==e&&(i[e]=()=>r[e]);a.d(t,i)}},t={};function a(r){var i=t[r];if(void 0!==i)return i.exports;var o=t[r]={exports:{}};return e[r].call(o.exports,o,o.exports,a),o.exports}a.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return a.d(t,{a:t}),t},a.d=(e,t)=>{for(var r in t)a.o(t,r)&&!a.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},a.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),a.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},a(316)})();